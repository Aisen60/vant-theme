import{a as _,A as V,P as a,t as y}from"./css-g76xnzBU.js";import{W as w}from"./WorkspaceEnum-XTYi_47x.js";import{I as s}from"./IframeSyncEnum-pf-6dmJO.js";const u="VANT_THEME_TAG",E="V2_VANT_THEME_TAG";_(V.APP_LOCALE,"zh-CN");let o=a.VERSION_4;const g=()=>{o=document.querySelector('meta[name="vant-theme-mobile-version"]').content},h=()=>{(o===a.VERSION_2||o===a.VERSION_3)&&document.querySelector("html").classList.add("van-theme-light")},v=()=>{const t=document.createElement("style");if(t.id=u,document.head.appendChild(t),o===a.VERSION_2){const e=document.createElement("style");e.id=E,document.head.appendChild(e)}},A=()=>{window.addEventListener("message",t=>{if(t.data.type===s.UPDATE_LOCALE){const e=JSON.parse(t.data.value),n=e.appLocale,r=e.project.version===a.VERSION_2?window.vueRouter.currentRoute:window.vueRouter.currentRoute.value,[,,c=w.WORKSPACE_BASIC]=r.path.split("/"),i="/"+n+"/"+c;window.vueRouter.replace(i)}})},R=()=>{window.addEventListener("message",t=>{if(t.data.type===s.GET_VAR){const e=JSON.parse(t.data.value),n=y(e,o);O(n)}})},f=()=>{window.addEventListener("message",t=>{if(t.data.type===s.SET_VAR){const e=JSON.parse(t.data.value),n=i=>{let d="{";return Object.entries(i).forEach(([m,p])=>{const T=o!==a.VERSION_2?m:m.replace(/@([a-z0-9-]+)/g,"--van-$1"),S=o!==a.VERSION_2?p:p.replace(/@([a-z0-9-]+)/g,"var(--van-$1)");d+=`${T}: ${S}; `}),d+="}",d},l=n(e.light),r=n(e.dark),c=document.querySelector(`#${u}`);c&&(c.innerHTML=`
          html.van-theme-light ${l}
          html.van-theme-dark ${r}
        `)}})},L=()=>{window.addEventListener("message",t=>{if(t.data.type===s.SET_VAR_V2){const e=t.data.value,n=document.querySelector(`#${E}`);n&&(n.innerHTML=e)}})},O=t=>{window.top&&window.top.postMessage({type:s.GET_VAR,value:JSON.stringify(t)},"*")},I=()=>{window.top&&window.top.postMessage({type:s.MOBILE_READY},"*"),g(),h(),v(),A(),R(),f(),L()};I();
