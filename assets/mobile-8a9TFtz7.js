import{a as m,A as u,P as a,t as E}from"./css-andF0sLI.js";import{W as S}from"./WorkspaceEnum-XTYi_47x.js";import{I as s}from"./IframeSyncEnum-pf-6dmJO.js";const i="VANT_THEME_TAG",l="V2_VANT_THEME_TAG";m(u.APP_LOCALE,"zh-CN");let o=a.VERSION_4;const T=()=>{o=document.querySelector('meta[name="vant-theme-mobile-version"]').content},g=()=>{(o===a.VERSION_2||o===a.VERSION_3)&&document.querySelector("html").classList.add("van-theme-light")},y=()=>{const e=document.createElement("style");if(e.id=i,document.head.appendChild(e),o===a.VERSION_2){const t=document.createElement("style");t.id=l,document.head.appendChild(t)}},_=()=>{window.addEventListener("message",e=>{if(e.data.type===s.UPDATE_LOCALE){const t=JSON.parse(e.data.value),n=t.appLocale,r=t.project.version===a.VERSION_2?window.vueRouter.currentRoute:window.vueRouter.currentRoute.value,[,,d=S.WORKSPACE_BASIC]=r.path.split("/"),p="/"+n+"/"+d;window.vueRouter.replace(p)}})},V=()=>{window.addEventListener("message",e=>{if(e.data.type===s.GET_VAR){const t=JSON.parse(e.data.value),n=E(t,o);f(n)}})},w=()=>{window.addEventListener("message",e=>{if(e.data.type===s.SET_VAR){const t=JSON.parse(e.data.value);let n=JSON.stringify(t.light).replace(/,/g,";").replace(/"/g,""),c=JSON.stringify(t.dark).replace(/,/g,";").replace(/"/g,"");o===a.VERSION_2&&(n=n.replace(/@/g,"--van-"),c=c.replace(/@/g,"--van-"));const r=document.querySelector(`#${i}`);r&&(r.innerHTML=`
          .van-theme-light ${n}
          .van-theme-dark ${c}
        `)}})},v=()=>{window.addEventListener("message",e=>{if(e.data.type===s.SET_VAR_V2){const t=e.data.value,n=document.querySelector(`#${l}`);n&&(n.innerHTML=t)}})},f=e=>{window.top&&window.top.postMessage({type:s.GET_VAR,value:JSON.stringify(e)},"*")},A=()=>{window.top&&window.top.postMessage({type:s.MOBILE_READY},"*"),T(),g(),y(),_(),V(),w(),v()};A();
