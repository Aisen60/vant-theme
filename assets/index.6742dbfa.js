var Y=Object.defineProperty;var $=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var U=(e,t,s)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,w=(e,t)=>{for(var s in t||(t={}))Z.call(t,s)&&U(e,s,t[s]);if($)for(var s of $(t))ee.call(t,s)&&U(e,s,t[s]);return e};import{g as x,h as te,i as se,j as ne,k as L,l as k,m as P,n as oe,o as re,q as R,r as ae,s as ie,t as j,u as V,v as F,w as ce,x as le,A as T}from"./index.ae33ee3b.js";import{J as ue,K as m,d as O,r as p,w as de,L as he,M as _e,O as ve,o as h,c as N,a as f,b as E,u as g,P as me,Q as fe,S as ge,T as G,U as pe,V as Ee,m as _,n as u,t as S,F as q,q as B,j as Ce,v as D,W as Te,X as ye,Y as Ie}from"./vendor.20d57b1a.js";function be(e){let t;try{t=JSON.parse(e)}catch{t=t||null}return t}function we(e){let t;try{t=JSON.stringify(e)}catch{t=t||null}return t}function z(){function e(o){const r=window.localStorage.getItem(o);return r&&be(r)}function t(o,r){const a=we(r);window.localStorage.setItem(o,a)}function s(o){window.localStorage.removeItem(o)}function n(){window.localStorage.clear()}return{getItem:e,setItem:t,removeItem:s,clear:n}}const Ve=z();let M=[],W=!1;function y(e){W?e():M.push(e)}function et(){window.top===window&&window.addEventListener("message",e=>{e.data.type==="iframeReady"&&(W=!0,M.forEach(t=>t()),M=[])})}function tt(e){window.addEventListener("message",t=>{var n,o;if(((n=t.data)==null?void 0:n.type)!==x)return;const s=((o=t.data)==null?void 0:o.value)||"";e.currentRoute.value.path!==s&&e.replace(s).catch(()=>{})})}function st(){const e=document.querySelector("iframe");e&&y(()=>{var t;(t=e==null?void 0:e.contentWindow)==null||t.postMessage({type:x,value:Ae()},"*")})}function nt(e){window.localStorage.setItem("vantTheme",e);const t=document.querySelector("iframe");t&&y(()=>{var s;(s=t==null?void 0:t.contentWindow)==null||s.postMessage({type:"updateTheme",value:e},"*")})}function ot(e,t){const s=document.querySelector("iframe");s&&y(()=>{var n;(n=s==null?void 0:s.contentWindow)==null||n.postMessage({type:te,value:JSON.stringify(e),version:t},"*")})}function rt(e,t){const s=document.querySelector("iframe");s&&y(()=>{var n;(n=s==null?void 0:s.contentWindow)==null||n.postMessage({type:se,value:JSON.stringify(e),version:t},"*")})}function at(e){const t=document.querySelector("iframe");t&&y(()=>{var s;(s=t==null?void 0:t.contentWindow)==null||s.postMessage({type:ne,version:e},"*")})}function Se(){const e=Ve.getItem(L);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function Ae(){const e=window.vueRouter,{path:t}=e.currentRoute.value;return t}const Le="modulepreload",J={},ke="/vant-theme/",c=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${ke}${n}`,n in J)return;J[n]=!0;const o=n.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Le,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((l,v)=>{a.addEventListener("load",l),a.addEventListener("error",v)})})).then(()=>t())};function Pe(e){switch(e){case"./styles/en-us/base-v2.json":return c(()=>import("./base-v2.6e2cf420.js"),[]);case"./styles/en-us/base-v3.json":return c(()=>import("./base-v3.d69772a7.js"),[]);case"./styles/en-us/base-v4.json":return c(()=>import("./base-v4.22c45f3d.js"),[]);case"./styles/en-us/v2.json":return c(()=>import("./v2.8b888a08.js"),[]);case"./styles/en-us/v3.json":return c(()=>import("./v3.d4217aa1.js"),[]);case"./styles/en-us/v4.json":return c(()=>import("./v4.677c06ff.js"),[]);case"./styles/zh-cn/base-v2.json":return c(()=>import("./base-v2.502fefe1.js"),[]);case"./styles/zh-cn/base-v3.json":return c(()=>import("./base-v3.ec06435c.js"),[]);case"./styles/zh-cn/base-v4.json":return c(()=>import("./base-v4.ce7f6f1d.js"),[]);case"./styles/zh-cn/v2.json":return c(()=>import("./v2.b9739cb4.js"),[]);case"./styles/zh-cn/v3.json":return c(()=>import("./v3.ca719dbd.js"),[]);case"./styles/zh-cn/v4.json":return c(()=>import("./v4.f62e2b13.js"),[]);default:return new Promise(function(t,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function Re(e){switch(e){case"./styles/en-us/base-v2.json":return c(()=>import("./base-v2.6e2cf420.js"),[]);case"./styles/en-us/base-v3.json":return c(()=>import("./base-v3.d69772a7.js"),[]);case"./styles/en-us/base-v4.json":return c(()=>import("./base-v4.22c45f3d.js"),[]);case"./styles/zh-cn/base-v2.json":return c(()=>import("./base-v2.502fefe1.js"),[]);case"./styles/zh-cn/base-v3.json":return c(()=>import("./base-v3.ec06435c.js"),[]);case"./styles/zh-cn/base-v4.json":return c(()=>import("./base-v4.ce7f6f1d.js"),[]);default:return new Promise(function(t,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const K=async(e,t)=>{const s=e,n=t.toLocaleLowerCase(),{default:o}=await Re(`./styles/${n}/base-${s}.json`);return o},it=async(e,t)=>{const s=e,n=t.toLocaleLowerCase(),o=await K(e,t),{default:r}=await Pe(`./styles/${n}/${s}.json`);return[o,...r]},i=z(),je={v2:[],v3:[],v4:[]},H="";function Q(e){const t=le();return{version:e.version,id:t,name:e.name,describe:e.describe,config:w({},e.config),create:t,update:t}}const ct=ue("main",{state:()=>({needBackups:!1,appVersion:k.version,schemeColor:Se(),version:i.getItem(P)||oe,versionList:re,language:i.getItem(R)||ae,languageList:ie,userConfig:i.getItem(j)||je,currentConfigId:i.getItem(V)||H,loadVantCssState:!1,iframeState:!1,createRouteState:!1,listenSyncPathState:!1}),getters:{versionInfo(e){const t=e.version,s=m(e.versionList);return s.forEach(n=>{n.disabled=t===n.key}),s.filter(n=>n.key===t)[0]},versionAllTheme(e){const t=e.version;return e.userConfig[t]},versionCurrentTheme(e){const t=e.version,s=e.userConfig,n=e.currentConfigId;return s[t].filter(o=>o.id===n)[0]}},actions:{async init(){const e=this.appVersion,t=this.schemeColor,s=this.version,n=this.language,o=this.userConfig,r=this.currentConfigId;i.setItem(F,e),i.setItem(L,t),i.setItem(P,s),i.setItem(R,n),i.setItem(j,o),i.setItem(V,r)},handleOldVersionConfig(){const e=i.getItem("VANT_THEME_USER_CONFIG"),t={v2:[],v3:[],v4:[]};e&&Object.keys(e).forEach(s=>{t[s]=[];const n=e[s];n&&n.length>0&&n.forEach(o=>{t[s].push({version:s,id:o.id,name:o.name,describe:"",config:o.theme,create:o.update,update:o.update})})}),console.log(t),i.removeItem("base"),i.removeItem("VANT_THEME_PREVIEW_CONFIG"),i.removeItem("VANT_THEME_PREVIEW_ID")},setAppVersion(){this.appVersion=k.version,i.setItem(F,k.version)},setSchemeColor(e){this.schemeColor=e,i.setItem(L,e)},setVersion(e){const{key:t}=e;this.version!==t&&(this.version=t,i.setItem(P,t))},setLanguage(e){this.language=e,i.setItem(R,e)},importTheme(e){const{version:t}=e;t&&this.updateUserConfigHandler("add",t,{index:0,theme:e})},addTheme(e){const{name:t,describe:s}=e,n=this.version,o=Q({version:n,name:t,describe:s});this.updateUserConfigHandler("add",n,{index:0,theme:o})},editTheme(e,t){const s=this.version,o=this.userConfig[s],r=m(e),{name:a,describe:l}=t;r.name=a,r.describe=l;const v=o.findIndex(I=>I.id===r.id);this.updateUserConfigHandler("update",s,{index:v,theme:r})},copyTheme(e,t){const s=this.version,n=m(e),{name:o,describe:r}=t,a=Q({version:s,name:o,describe:r});a.config=m(n.config),this.updateUserConfigHandler("add",s,{index:0,theme:a})},deleteTheme(e){const t=this.version,o=m(this.userConfig)[t].findIndex(r=>r.id===e);o!==void 0&&o!==-1&&this.updateUserConfigHandler("delete",t,{index:o})},async downloadTheme(e){var a;const t=this.version,s=this.language,n=await K(t,s),o=m(this.userConfig)[t].filter(l=>l.id===e)[0],r=(a=n.children)==null?void 0:a.map(l=>l.label);return ce(t,o,r)},updateUserConfigHandler(e,t,s){const n=this.userConfig,{index:o,theme:r}=s;e==="add"&&r&&n[t].push(r),e==="update"&&(n[t][o].name=r==null?void 0:r.name,n[t][o].describe=r==null?void 0:r.describe,n[t][o].config=r==null?void 0:r.config,n[t][o].update=r==null?void 0:r.update),e==="delete"&&n[t].splice(o,1),i.setItem(j,n)},useTheme(e){this.currentConfigId=e,i.setItem(V,e)},clearCurrentConfigId(){this.currentConfigId=H,i.setItem(V,H)},setLoadVantCssState(e){this.loadVantCssState=e},setIframeState(e){this.iframeState=e},setCreateRouteState(e){this.createRouteState=e},setListenSyncPathState(e){this.listenSyncPathState=e},setVariables(e){const t=this.version,n=this.userConfig[t],o=m(this.versionCurrentTheme),r=n.findIndex(a=>a.id===o.id);o.config=w(w({},o.config),e),this.updateUserConfigHandler("update",t,{index:r,theme:o})},clearVariables(e){const t=this.version,n=this.userConfig[t],o=m(this.versionCurrentTheme),r=n.findIndex(a=>a.id===e);o.config={},this.updateUserConfigHandler("update",t,{index:r,theme:o})}}}),Oe=O({props:{schemeColor:null,language:null},setup(e){const t=e,s=p(),n=p(),o={common:{primaryColor:"#2080f0",primaryColorHover:"#4098fc",primaryColorPressed:"#1060c9",primaryColorSuppl:"#1060c9"}},r={common:{primaryColor:"#70c0e8",primaryColorHover:"#8acbec",primaryColorPressed:"#66afd3",primaryColorSuppl:"#66afd3"}},a=p(null),l=p(null);return de(()=>{t.schemeColor==="dark"?(s.value=he,n.value=r):(s.value=null,n.value=o),a.value=t.language==="en-US"?null:_e,l.value=t.language==="en-US"?null:ve}),(v,I)=>(h(),N(g(Ee),{theme:s.value,"theme-overrides":n.value,locale:a.value,"date-locale":l.value},{default:f(()=>[E(g(pe),null,{default:f(()=>[E(g(me),null,{default:f(()=>[E(g(fe),null,{default:f(()=>[E(g(ge),null,{default:f(()=>[G(v.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["theme","theme-overrides","locale","date-locale"]))}}),Ne={class:"vant-theme-header"},De={class:"vant-theme-header__top"},Me=["href"],He=["src"],$e={class:"vant-theme-header__title"},Ue={class:"vant-theme-header__subtitle"},xe={class:"vant-theme-header__top-nav"},Fe=["href"],Ge=["src"],qe={class:"vant-theme-header__link",target:"_blank"},Be={key:0,class:"vant-theme-header__version-pop"},ze=["onClick"],We=O({props:{title:null,subtitle:null,links:null,schemeColor:null,version:null,versionList:null},emits:["switch-scheme-color","switch-version"],setup(e,{emit:t}){const s=e,n=`${T}logo.png`,o=`${T}logo-dark.png`,r=`${T}light-theme.png`,a=`${T}dark-theme.png`,l=p(!1),v=p(),I=()=>{const C=!l.value,b=C?"add":"remove";document.body[`${b}EventListener`]("click",X),l.value=C},X=C=>{v.value.contains(C.target)||(l.value=!1)};return(C,b)=>(h(),_("div",Ne,[u("div",De,[u("a",{class:"vant-theme-header__logo",href:g(T)},[u("img",{src:s.schemeColor==="dark"?o:n},null,8,He),u("span",$e,S(s.title),1),u("span",Ue," \uFF08"+S(s.subtitle)+"\uFF09 ",1)],8,Me),u("ul",xe,[(h(!0),_(q,null,B(s.links,(d,A)=>(h(),_("li",{key:A,class:"vant-theme-header__top-nav-item"},[u("a",{class:"vant-theme-header__link",target:"_blank",href:d.url},[d.lightLogo?(h(),_("img",{key:0,src:s.schemeColor==="dark"?d.lightLogo:d.darkLogo},null,8,Ge)):D("",!0)],8,Fe)]))),128)),u("li",{class:"vant-theme-header__top-nav-item",onClick:b[0]||(b[0]=d=>t("switch-scheme-color"))},[u("a",qe,[s.schemeColor==="dark"?(h(),_("img",{key:0,src:r})):(h(),_("img",{key:1,src:a}))])]),u("li",{ref_key:"versionRef",ref:v,class:"vant-theme-header__top-nav-item"},[u("span",{class:"vant-theme-header__cube vant-theme-header__version",onClick:I},[Ce(S(e.version)+" ",1),E(Te,{name:"vant-theme-dropdown"},{default:f(()=>[l.value?(h(),_("div",Be,[(h(!0),_(q,null,B(s.versionList,(d,A)=>(h(),_("div",{key:A,class:ye(["vant-theme-header__version-pop-item",{disabled:d.disabled&&e.version!==d.key,active:e.version===d.key}]),onClick:Qe=>t("switch-version",d)},S(`${d.title}\uFF08${d.subtitle}\uFF09`),11,ze))),128))])):D("",!0)]),_:1})])],512)])])]))}}),Je={class:"vant-theme-app"},Ke={class:"vant-theme-container"},lt=O({props:{app:null,header:null,router:{type:Boolean,default:!0}},emits:["switch-scheme-color","switch-version"],setup(e,{emit:t}){const s=e;return(n,o)=>(h(),N(Oe,{"scheme-color":s.app.schemeColor,language:s.app.language},{default:f(()=>[u("div",Je,[E(We,{links:s.header.links,title:s.header.title,subtitle:s.header.subtitle,"scheme-color":s.header.schemeColor,version:s.header.version,versionList:s.header.versionList,onSwitchSchemeColor:o[0]||(o[0]=r=>t("switch-scheme-color")),onSwitchVersion:o[1]||(o[1]=r=>t("switch-version",r))},null,8,["links","title","subtitle","scheme-color","version","versionList"]),u("div",Ke,[s.router?(h(),N(g(Ie),{key:0})):D("",!0),G(n.$slots,"default")])])]),_:3},8,["scheme-color","language"]))}});export{lt as _,rt as a,at as b,nt as c,tt as d,c as e,st as f,it as g,z as h,et as l,ot as s,ct as u};
