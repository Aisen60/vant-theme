var Y=Object.defineProperty;var $=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var U=(e,t,s)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,w=(e,t)=>{for(var s in t||(t={}))Z.call(t,s)&&U(e,s,t[s]);if($)for(var s of $(t))ee.call(t,s)&&U(e,s,t[s]);return e};import{g as x,h as te,i as se,j as ne,k as L,l as k,m as P,n as oe,o as re,q as R,r as ae,s as ie,t as j,u as V,v as F,w as ce,x as le,A as C}from"./index.4db19684.js";import{J as ue,K as v,d as N,r as T,w as de,L as he,M as _e,O as ve,o as h,c as O,a as f,b as p,u as m,P as fe,Q as me,S as ge,T as G,U as pe,V as Ee,m as _,n as u,t as b,F as q,q as B,j as Ce,v as D,W as Te,X as Ie,Y as ye}from"./vendor.35a753a3.js";function we(e){let t;try{t=JSON.parse(e)}catch{t=t||null}return t}function Ve(e){let t;try{t=JSON.stringify(e)}catch{t=t||null}return t}function z(){function e(n){const r=window.localStorage.getItem(n);return r&&we(r)}function t(n,r){const a=Ve(r);window.localStorage.setItem(n,a)}function s(n){window.localStorage.removeItem(n)}function o(){window.localStorage.clear()}return{getItem:e,setItem:t,removeItem:s,clear:o}}const be=z();let M=[],W=!1;function I(e){W?e():M.push(e)}function et(){window.top===window&&window.addEventListener("message",e=>{e.data.type==="iframeReady"&&(W=!0,M.forEach(t=>t()),M=[])})}function tt(e){window.addEventListener("message",t=>{var o,n;if(((o=t.data)==null?void 0:o.type)!==x)return;const s=((n=t.data)==null?void 0:n.value)||"";e.currentRoute.value.path!==s&&e.replace(s).catch(()=>{})})}function st(){const e=document.querySelector("iframe");e&&I(()=>{var t;(t=e==null?void 0:e.contentWindow)==null||t.postMessage({type:x,value:Se()},"*")})}function nt(e){window.localStorage.setItem("vantTheme",e);const t=document.querySelector("iframe");t&&I(()=>{var s;(s=t==null?void 0:t.contentWindow)==null||s.postMessage({type:"updateTheme",value:e},"*")})}function ot(e,t){const s=document.querySelector("iframe");s&&I(()=>{var o;(o=s==null?void 0:s.contentWindow)==null||o.postMessage({type:te,value:JSON.stringify(e),version:t},"*")})}function rt(e,t){const s=document.querySelector("iframe");s&&I(()=>{var o;(o=s==null?void 0:s.contentWindow)==null||o.postMessage({type:se,value:JSON.stringify(e),version:t},"*")})}function at(e){const t=document.querySelector("iframe");t&&I(()=>{var s;(s=t==null?void 0:t.contentWindow)==null||s.postMessage({type:ne,version:e},"*")})}function Ae(){const e=be.getItem(L);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function Se(){const e=window.vueRouter,{path:t}=e.currentRoute.value;return t}const Le="modulepreload",J={},ke="/vant-theme/",c=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${ke}${o}`,o in J)return;J[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":Le,n||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),n)return new Promise((l,g)=>{a.addEventListener("load",l),a.addEventListener("error",g)})})).then(()=>t())};function Pe(e){switch(e){case"./styles/en-us/base-v2.json":return c(()=>import("./base-v2.6e2cf420.js"),[]);case"./styles/en-us/base-v3.json":return c(()=>import("./base-v3.d69772a7.js"),[]);case"./styles/en-us/base-v4.json":return c(()=>import("./base-v4.22c45f3d.js"),[]);case"./styles/en-us/v2.json":return c(()=>import("./v2.8b888a08.js"),[]);case"./styles/en-us/v3.json":return c(()=>import("./v3.372eff6d.js"),[]);case"./styles/en-us/v4.json":return c(()=>import("./v4.d8bc33dd.js"),[]);case"./styles/zh-cn/base-v2.json":return c(()=>import("./base-v2.502fefe1.js"),[]);case"./styles/zh-cn/base-v3.json":return c(()=>import("./base-v3.ec06435c.js"),[]);case"./styles/zh-cn/base-v4.json":return c(()=>import("./base-v4.ce7f6f1d.js"),[]);case"./styles/zh-cn/v2.json":return c(()=>import("./v2.7040d3a2.js"),[]);case"./styles/zh-cn/v3.json":return c(()=>import("./v3.93359d12.js"),[]);case"./styles/zh-cn/v4.json":return c(()=>import("./v4.61b65489.js"),[]);default:return new Promise(function(t,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function Re(e){switch(e){case"./styles/en-us/base-v2.json":return c(()=>import("./base-v2.6e2cf420.js"),[]);case"./styles/en-us/base-v3.json":return c(()=>import("./base-v3.d69772a7.js"),[]);case"./styles/en-us/base-v4.json":return c(()=>import("./base-v4.22c45f3d.js"),[]);case"./styles/zh-cn/base-v2.json":return c(()=>import("./base-v2.502fefe1.js"),[]);case"./styles/zh-cn/base-v3.json":return c(()=>import("./base-v3.ec06435c.js"),[]);case"./styles/zh-cn/base-v4.json":return c(()=>import("./base-v4.ce7f6f1d.js"),[]);default:return new Promise(function(t,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const K=async(e,t)=>{const s=e,o=t.toLocaleLowerCase(),{default:n}=await Re(`./styles/${o}/base-${s}.json`);return n},it=async(e,t)=>{const s=e,o=t.toLocaleLowerCase(),n=await K(e,t),{default:r}=await Pe(`./styles/${o}/${s}.json`);return[n,...r]},i=z(),je={v2:[],v3:[],v4:[]},H="";function Q(e){const t=le();return{version:e.version,id:t,name:e.name,describe:e.describe,config:w({},e.config),create:t,update:t}}const ct=ue("main",{state:()=>({needBackups:!1,appVersion:k.version,schemeColor:Ae(),version:i.getItem(P)||oe,versionList:re,language:i.getItem(R)||ae,languageList:ie,userConfig:i.getItem(j)||je,currentConfigId:i.getItem(V)||H,loadVantCssState:!1,iframeState:!1,createRouteState:!1,listenSyncPathState:!1}),getters:{versionInfo(e){const t=e.version,s=v(e.versionList);return s.forEach(o=>{o.disabled=t===o.key}),s.filter(o=>o.key===t)[0]},versionAllTheme(e){const t=e.version;return e.userConfig[t]},versionCurrentTheme(e){const t=e.version,s=e.userConfig,o=e.currentConfigId;return s[t].filter(n=>n.id===o)[0]}},actions:{async init(){const e=this.appVersion,t=this.schemeColor,s=this.version,o=this.language,n=this.userConfig,r=this.currentConfigId;i.setItem(F,e),i.setItem(L,t),i.setItem(P,s),i.setItem(R,o),i.setItem(j,n),i.setItem(V,r)},handleOldVersionConfig(){const e=i.getItem("VANT_THEME_USER_CONFIG"),t={v2:[],v3:[],v4:[]};e&&Object.keys(e).forEach(s=>{t[s]=[];const o=e[s];o&&o.length>0&&o.forEach(n=>{t[s].push({version:s,id:n.id,name:n.name,describe:"",config:n.theme,create:n.update,update:n.update})})}),console.log(t),i.removeItem("base"),i.removeItem("VANT_THEME_PREVIEW_CONFIG"),i.removeItem("VANT_THEME_PREVIEW_ID")},setAppVersion(){this.appVersion=k.version,i.setItem(F,k.version)},setSchemeColor(e){this.schemeColor=e,i.setItem(L,e)},setVersion(e){const{key:t}=e;this.version!==t&&(this.version=t,i.setItem(P,t))},setLanguage(e){this.language=e,i.setItem(R,e)},importTheme(e){const{version:t}=e;t&&this.updateUserConfigHandler("add",t,{index:0,theme:e})},addTheme(e){const{name:t,describe:s}=e,o=this.version,n=Q({version:o,name:t,describe:s});this.updateUserConfigHandler("add",o,{index:0,theme:n})},editTheme(e,t){const s=this.version,n=this.userConfig[s],r=v(e),{name:a,describe:l}=t;r.name=a,r.describe=l;const g=n.findIndex(A=>A.id===r.id);this.updateUserConfigHandler("update",s,{index:g,theme:r})},copyTheme(e,t){const s=this.version,o=v(e),{name:n,describe:r}=t,a=Q({version:s,name:n,describe:r});a.config=v(o.config),this.updateUserConfigHandler("add",s,{index:0,theme:a})},deleteTheme(e){const t=this.version,n=v(this.userConfig)[t].findIndex(r=>r.id===e);n!==void 0&&n!==-1&&this.updateUserConfigHandler("delete",t,{index:n})},async downloadTheme(e){var a;const t=this.version,s=this.language,o=await K(t,s),n=v(this.userConfig)[t].filter(l=>l.id===e)[0],r=(a=o.children)==null?void 0:a.map(l=>l.label);return ce(t,n,r)},updateUserConfigHandler(e,t,s){const o=this.userConfig,{index:n,theme:r}=s;e==="add"&&r&&o[t].push(r),e==="update"&&(o[t][n].name=r==null?void 0:r.name,o[t][n].describe=r==null?void 0:r.describe,o[t][n].config=r==null?void 0:r.config,o[t][n].update=r==null?void 0:r.update),e==="delete"&&o[t].splice(n,1),i.setItem(j,o)},useTheme(e){this.currentConfigId=e,i.setItem(V,e)},clearCurrentConfigId(){this.currentConfigId=H,i.setItem(V,H)},setLoadVantCssState(e){this.loadVantCssState=e},setIframeState(e){this.iframeState=e},setCreateRouteState(e){this.createRouteState=e},setListenSyncPathState(e){this.listenSyncPathState=e},setVariables(e){const t=this.version,o=this.userConfig[t],n=v(this.versionCurrentTheme),r=o.findIndex(a=>a.id===n.id);n.config=w(w({},n.config),e),this.updateUserConfigHandler("update",t,{index:r,theme:n})},clearVariables(e){const t=this.version,o=this.userConfig[t],n=v(this.versionCurrentTheme),r=o.findIndex(a=>a.id===e);n.config={},this.updateUserConfigHandler("update",t,{index:r,theme:n})}}}),Ne=N({props:{schemeColor:null,language:null},setup(e){const t=e,s=T(),o={},n=T(null),r=T(null);return de(()=>{s.value=t.schemeColor==="dark"?he:null,n.value=t.language==="en-US"?null:_e,r.value=t.language==="en-US"?null:ve}),(a,l)=>(h(),O(m(Ee),{theme:s.value,"theme-overrides":o,locale:n.value,"date-locale":r.value},{default:f(()=>[p(m(pe),null,{default:f(()=>[p(m(fe),null,{default:f(()=>[p(m(me),null,{default:f(()=>[p(m(ge),null,{default:f(()=>[G(a.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["theme","locale","date-locale"]))}}),Oe={class:"vant-theme-header"},De={class:"vant-theme-header__top"},Me=["href"],He=["src"],$e={class:"vant-theme-header__title"},Ue={class:"vant-theme-header__subtitle"},xe={class:"vant-theme-header__top-nav"},Fe=["href"],Ge=["src"],qe={class:"vant-theme-header__link",target:"_blank"},Be={key:0,class:"vant-theme-header__version-pop"},ze=["onClick"],We=N({props:{title:null,subtitle:null,links:null,schemeColor:null,version:null,versionList:null},emits:["switch-scheme-color","switch-version"],setup(e,{emit:t}){const s=e,o=`${C}logo.png`,n=`${C}logo-dark.png`,r=`${C}light-theme.png`,a=`${C}dark-theme.png`,l=T(!1),g=T(),A=()=>{const E=!l.value,y=E?"add":"remove";document.body[`${y}EventListener`]("click",X),l.value=E},X=E=>{g.value.contains(E.target)||(l.value=!1)};return(E,y)=>(h(),_("div",Oe,[u("div",De,[u("a",{class:"vant-theme-header__logo",href:m(C)},[u("img",{src:s.schemeColor==="dark"?n:o},null,8,He),u("span",$e,b(s.title),1),u("span",Ue," \uFF08"+b(s.subtitle)+"\uFF09 ",1)],8,Me),u("ul",xe,[(h(!0),_(q,null,B(s.links,(d,S)=>(h(),_("li",{key:S,class:"vant-theme-header__top-nav-item"},[u("a",{class:"vant-theme-header__link",target:"_blank",href:d.url},[d.lightLogo?(h(),_("img",{key:0,src:s.schemeColor==="dark"?d.lightLogo:d.darkLogo},null,8,Ge)):D("",!0)],8,Fe)]))),128)),u("li",{class:"vant-theme-header__top-nav-item",onClick:y[0]||(y[0]=d=>t("switch-scheme-color"))},[u("a",qe,[s.schemeColor==="dark"?(h(),_("img",{key:0,src:r})):(h(),_("img",{key:1,src:a}))])]),u("li",{ref_key:"versionRef",ref:g,class:"vant-theme-header__top-nav-item"},[u("span",{class:"vant-theme-header__cube vant-theme-header__version",onClick:A},[Ce(b(e.version)+" ",1),p(Te,{name:"vant-theme-dropdown"},{default:f(()=>[l.value?(h(),_("div",Be,[(h(!0),_(q,null,B(s.versionList,(d,S)=>(h(),_("div",{key:S,class:Ie(["vant-theme-header__version-pop-item",{disabled:d.disabled&&e.version!==d.key,active:e.version===d.key}]),onClick:Qe=>t("switch-version",d)},b(`${d.title}\uFF08${d.subtitle}\uFF09`),11,ze))),128))])):D("",!0)]),_:1})])],512)])])]))}}),Je={class:"vant-theme-app"},Ke={class:"vant-theme-container"},lt=N({props:{app:null,header:null,router:{type:Boolean,default:!0}},emits:["switch-scheme-color","switch-version"],setup(e,{emit:t}){const s=e;return(o,n)=>(h(),O(Ne,{"scheme-color":s.app.schemeColor,language:s.app.language},{default:f(()=>[u("div",Je,[p(We,{links:s.header.links,title:s.header.title,subtitle:s.header.subtitle,"scheme-color":s.header.schemeColor,version:s.header.version,versionList:s.header.versionList,onSwitchSchemeColor:n[0]||(n[0]=r=>t("switch-scheme-color")),onSwitchVersion:n[1]||(n[1]=r=>t("switch-version",r))},null,8,["links","title","subtitle","scheme-color","version","versionList"]),u("div",Ke,[s.router?(h(),O(m(ye),{key:0})):D("",!0),G(o.$slots,"default")])])]),_:3},8,["scheme-color","language"]))}});export{lt as _,rt as a,at as b,nt as c,tt as d,c as e,st as f,it as g,z as h,et as l,ot as s,ct as u};
