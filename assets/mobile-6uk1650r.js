import{a as p,A as u,P as n,t as E}from"./css-g76xnzBU.js";import{W as S}from"./WorkspaceEnum-XTYi_47x.js";import{I as s}from"./IframeSyncEnum-pf-6dmJO.js";const i="VANT_THEME_TAG",l="V2_VANT_THEME_TAG";p(u.APP_LOCALE,"zh-CN");let o=n.VERSION_4;const T=()=>{o=document.querySelector('meta[name="vant-theme-mobile-version"]').content},g=()=>{(o===n.VERSION_2||o===n.VERSION_3)&&document.querySelector("html").classList.add("van-theme-light")},y=()=>{const e=document.createElement("style");if(e.id=i,document.head.appendChild(e),o===n.VERSION_2){const t=document.createElement("style");t.id=l,document.head.appendChild(t)}},V=()=>{window.addEventListener("message",e=>{if(e.data.type===s.UPDATE_LOCALE){const t=JSON.parse(e.data.value),a=t.appLocale,r=t.project.version===n.VERSION_2?window.vueRouter.currentRoute:window.vueRouter.currentRoute.value,[,,d=S.WORKSPACE_BASIC]=r.path.split("/"),m="/"+a+"/"+d;window.vueRouter.replace(m)}})},_=()=>{window.addEventListener("message",e=>{if(e.data.type===s.GET_VAR){const t=JSON.parse(e.data.value),a=E(t,o);v(a)}})},w=()=>{window.addEventListener("message",e=>{if(e.data.type===s.SET_VAR){const t=JSON.parse(e.data.value);let a=JSON.stringify(t.light).replace(/,/g,";").replace(/"/g,""),c=JSON.stringify(t.dark).replace(/,/g,";").replace(/"/g,"");o===n.VERSION_2&&(a=a.replace(/@/g,"--van-"),c=c.replace(/@/g,"--van-"));const r=document.querySelector(`#${i}`);r&&(r.innerHTML=`
          html.van-theme-light ${a}
          html.van-theme-dark ${c}
        `)}})},h=()=>{window.addEventListener("message",e=>{if(e.data.type===s.SET_VAR_V2){const t=e.data.value,a=document.querySelector(`#${l}`);a&&(a.innerHTML=t)}})},v=e=>{window.top&&window.top.postMessage({type:s.GET_VAR,value:JSON.stringify(e)},"*")},f=()=>{window.top&&window.top.postMessage({type:s.MOBILE_READY},"*"),T(),g(),y(),V(),_(),w(),h()};f();
