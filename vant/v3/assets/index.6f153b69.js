import{c as e,i as t,p as o,z as s,a as l}from"./use-translate.91889477.js";import{w as i}from"./with-install.c9eedd0e.js";import{c as r}from"./interceptor.fd551ac3.js";import{u as a}from"./use-touch.30351383.js";import{u as n}from"./use-expose.5ea79906.js";import{z as d,D as c,E as u,C as f,e as m,r as p,o as g,a as b,w as h,B as j,F as x}from"./vue-libs.71fdcafc.js";import{u as v}from"./index.43faf238.js";import{u as C}from"./index.f5d5940e.js";import{B as y}from"./index.60661b5f.js";import{C as T}from"./index.5d323f2c.js";import{C as w}from"./index.6e065662.js";import{D as q}from"./function-call.1456f37b.js";import"./utils.b0356070.js";import"./index.94f7437a.js";import"./constant.4d85ecb9.js";import"./use-route.913efdd2.js";import"./index.d38d9435.js";import"./index.6e9dbec3.js";import"./index.f9150974.js";import"./index.9ee79ebb.js";import"./mount-component.d3f8f39a.js";import"./index.b58615a3.js";import"./index.9e2e36ca.js";import"./use-lazy-render.3dcfda58.js";import"./on-popup-reopen.d7054786.js";import"./index.38991bce.js";import"./index.f84002e0.js";import"./useChildren.edf9a3d1.js";import"./useParent.e4fd6deb.js";const[z,W]=e("swipe-cell");const _=i(d({name:z,props:{disabled:Boolean,leftWidth:[Number,String],rightWidth:[Number,String],beforeClose:Function,stopPropagation:Boolean,name:{type:[Number,String],default:""}},emits:["open","close","click"],setup(e,{emit:l,slots:i}){let d,p,g;const b=c(),h=c(),j=c(),x=u({offset:0,dragging:!1}),y=a(),T=e=>e.value?v(e).width:0,w=f((()=>t(e.leftWidth)?+e.leftWidth:T(h))),q=f((()=>t(e.rightWidth)?+e.rightWidth:T(j))),z=t=>{d=!0,x.offset="left"===t?w.value:-q.value,l("open",{name:e.name,position:t})},_=t=>{x.offset=0,d&&(d=!1,l("close",{name:e.name,position:t}))},k=t=>{e.disabled||(g=x.offset,y.start(t))},B=t=>{if(e.disabled)return;const{deltaX:l}=y;if(y.move(t),y.isHorizontal()){p=!0,x.dragging=!0;(!d||l.value*g<0)&&o(t,e.stopPropagation),x.offset=s(l.value+g,-q.value,w.value)}},N=()=>{x.dragging&&(x.dragging=!1,(e=>{const t=Math.abs(x.offset),o=d?.85:.15,s="left"===e?w.value:q.value;s&&t>s*o?z(e):_(e)})(x.offset>0?"left":"right"),setTimeout((()=>{p=!1}),0))},P=(t="outside")=>{l("click",t),d&&!p&&r({interceptor:e.beforeClose,args:[{name:e.name,position:t}],done:()=>_(t)})},S=(e,t)=>o=>{t&&o.stopPropagation(),P(e)},D=(e,t)=>{const o=i[e];if(o)return m("div",{ref:t,class:W(e),onClick:S(e,!0)},[o()])};return n({open:z,close:_}),C(b,(()=>P("outside")),{eventName:"touchstart"}),()=>{var e;const t={transform:`translate3d(${x.offset}px, 0, 0)`,transitionDuration:x.dragging?"0s":".6s"};return m("div",{ref:b,class:W(),onClick:S("cell"),onTouchstart:k,onTouchmove:B,onTouchend:N,onTouchcancel:N},[m("div",{class:W("wrapper"),style:t},[D("left",h),null==(e=i.default)?void 0:e.call(i),D("right",j)])])}}}));const k=d({setup(e){const t=l({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),o=({position:e})=>{switch(e){case"left":case"cell":case"outside":return!0;case"right":return new Promise((e=>{q.confirm({title:t("confirm")}).then(e)}))}};return(e,s)=>{const l=p("demo-block");return g(),b(x,null,[m(l,{title:j(t)("basicUsage")},{default:h((()=>[m(j(_),null,{left:h((()=>[m(j(y),{square:"",type:"primary",text:j(t)("select")},null,8,["text"])])),right:h((()=>[m(j(y),{square:"",type:"danger",text:j(t)("delete")},null,8,["text"]),m(j(y),{square:"",type:"primary",text:j(t)("collect")},null,8,["text"])])),default:h((()=>[m(j(T),{border:!1,title:j(t)("title"),value:j(t)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"]),m(l,{title:j(t)("customContent")},{default:h((()=>[m(j(_),null,{right:h((()=>[m(j(y),{square:"",type:"danger",class:"delete-button",text:j(t)("delete")},null,8,["text"])])),default:h((()=>[m(j(w),{num:"2",price:"2.00",desc:j(t)("desc"),title:j(t)("cardTitle"),thumb:"https://img.yzcdn.cn/vant/ipad.jpeg"},null,8,["desc","title"])])),_:1})])),_:1},8,["title"]),m(l,{title:j(t)("beforeClose")},{default:h((()=>[m(j(_),{"before-close":o},{left:h((()=>[m(j(y),{square:"",type:"primary",text:j(t)("select")},null,8,["text"])])),right:h((()=>[m(j(y),{square:"",type:"danger",text:j(t)("delete")},null,8,["text"])])),default:h((()=>[m(j(T),{border:!1,title:j(t)("title"),value:j(t)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"])],64)}}});export{k as default};
