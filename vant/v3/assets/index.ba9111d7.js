import{t as e}from"./use-translate.b583725c.js";import{c as r,w as t}from"./with-install.62f47d2f.js";import{F as o}from"./constant.4d85ecb9.js";import{u as n}from"./use-expose.33de0944.js";import{A as s,e as a}from"./vendor.ef334a89.js";import{u as l}from"./useChildren.a94b5b99.js";const[i,m]=r("form");const d=t(s({name:i,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:e,showErrorMessage:e,errorMessageAlign:String,validateTrigger:{type:String,default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:r,slots:t}){const{children:s,linkChildren:i}=l(o),d=e=>e?s.filter((r=>e.includes(r.name))):s,u=r=>{return"string"==typeof r?(e=>{const r=s.find((r=>r.name===e));return r?new Promise(((e,t)=>{r.validate().then((r=>{r?t(r):e()}))})):Promise.reject()})(r):e.validateFirst?(t=r,new Promise(((e,r)=>{const o=[];d(t).reduce(((e,r)=>e.then((()=>{if(!o.length)return r.validate().then((e=>{e&&o.push(e)}))}))),Promise.resolve()).then((()=>{o.length?r(o):e()}))}))):(e=>new Promise(((r,t)=>{const o=d(e);Promise.all(o.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?t(e):r()}))})))(r);var t},c=(e,r)=>{s.some((t=>t.name===e&&(t.$el.scrollIntoView(r),!0)))},f=()=>{const t=s.reduce(((e,r)=>(e[r.name]=r.formValue.value,e)),{});u().then((()=>r("submit",t))).catch((o=>{r("failed",{values:t,errors:o}),e.scrollToError&&o[0].name&&c(o[0].name)}))},p=e=>{e.preventDefault(),f()};return i({props:e}),n({submit:f,validate:u,scrollToField:c,resetValidation:e=>{"string"==typeof e&&(e=[e]);d(e).forEach((e=>{e.resetValidation()}))}}),()=>{var e;return a("form",{class:m(),onSubmit:p},[null==(e=t.default)?void 0:e.call(t)])}}}));export{d as F};
