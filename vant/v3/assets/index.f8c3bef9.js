import{c as e,i as t,t as o,u as l,m as a,a as i}from"./use-translate.91889477.js";import{w as n}from"./with-install.c9eedd0e.js";import{u as s}from"./index.f5d5940e.js";import{z as u,D as r,C as d,e as p,E as c,k as m,v,A as f,Q as x,r as V,o as b,a as h,w,B as C,d as j,h as g,t as y,F as O}from"./vue-libs.71fdcafc.js";import{u as k}from"./useChildren.edf9a3d1.js";import{u as T}from"./index.9e2e36ca.js";import{u as U}from"./index.94f7437a.js";import{u as _}from"./index.43faf238.js";import{u as z}from"./use-expose.5ea79906.js";import{C as P}from"./index.5d323f2c.js";import{I as S}from"./index.d38d9435.js";import{P as A}from"./index.b58615a3.js";import{u as D}from"./useParent.e4fd6deb.js";import{S as I}from"./index.954014f6.js";import{B as W}from"./index.60661b5f.js";import"./utils.b0356070.js";import"./use-route.913efdd2.js";import"./interceptor.fd551ac3.js";import"./use-touch.30351383.js";import"./use-lazy-render.3dcfda58.js";import"./on-popup-reopen.d7054786.js";import"./index.38991bce.js";import"./index.6e9dbec3.js";import"./index.a16d08bc.js";import"./constant.4d85ecb9.js";const[B,E]=e("dropdown-menu"),M={overlay:o,zIndex:[Number,String],activeColor:String,closeOnClickOutside:o,closeOnClickOverlay:o,duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"}},N=Symbol(B);const R=n(u({name:B,props:M,setup(e,{slots:o}){const l=r(),a=r(),i=r(0),{children:n,linkChildren:u}=k(N),c=T(l),m=d((()=>n.some((e=>e.state.showWrapper)))),v=d((()=>{if(m.value&&t(e.zIndex))return{zIndex:+e.zIndex+1}})),f=()=>{if(a.value){const t=_(a);"down"===e.direction?i.value=t.bottom:i.value=window.innerHeight-t.top}},x=(t,o)=>{const{showPopup:l}=t.state,{disabled:a,titleClass:i}=t;return p("div",{role:"button",tabindex:a?-1:0,class:E("item",{disabled:a}),onClick:()=>{var e;a||(e=o,n.forEach(((t,o)=>{o===e?(f(),t.toggle()):t.state.showPopup&&t.toggle(!1,{immediate:!0})})))}},[p("span",{class:[E("title",{down:l===("down"===e.direction),active:l}),i],style:{color:l?e.activeColor:""}},[p("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return u({props:e,offset:i}),s(l,(()=>{e.closeOnClickOutside&&n.forEach((e=>{e.toggle(!1)}))})),U("scroll",(()=>{m.value&&f()}),{target:c}),()=>{var e;return p("div",{ref:l,class:E()},[p("div",{ref:a,style:v.value,class:E("bar",{opened:m.value})},[n.map(x)]),null==(e=o.default)?void 0:e.call(o)])}}}));const[$,F]=e("dropdown-item");const H=n(u({name:$,props:{title:String,disabled:Boolean,teleport:[String,Object],lazyRender:o,modelValue:l,titleClass:l,options:{type:Array,default:()=>[]}},emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:o}){const l=c({showPopup:!1,transition:!0,showWrapper:!1}),{parent:i}=D(N);if(!i)return;const n=e=>()=>t(e),s=n("open"),u=n("close"),r=n("opened"),d=()=>{l.showWrapper=!1,t("closed")},V=t=>{e.teleport&&t.stopPropagation()},b=o=>{const{activeColor:a}=i.props,n=o.value===e.modelValue;return p(P,{clickable:!0,key:o.value,icon:o.icon,title:o.text,class:F("option",{active:n}),style:{color:n?a:""},onClick:()=>{l.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value))}},{value:()=>{if(n)return p(S,{class:F("icon"),color:a,name:"success"},null)}})},h=()=>{const{offset:t}=i,{zIndex:n,overlay:c,duration:f,direction:x,closeOnClickOverlay:h}=i.props,w=a(n);return"down"===x?w.top=`${t.value}px`:w.bottom=`${t.value}px`,m(p("div",{style:w,class:F([x]),onClick:V},[p(A,{show:l.showPopup,"onUpdate:show":e=>l.showPopup=e,class:F("content"),overlay:c,position:"down"===x?"top":"bottom",duration:l.transition?f:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:h,onOpen:s,onClose:u,onOpened:r,onClosed:d},{default:()=>{var t;return[e.options.map(b),null==(t=o.default)?void 0:t.call(o)]}})]),[[v,l.showWrapper]])};return z({state:l,toggle:(e=!l.showPopup,t={})=>{e!==l.showPopup&&(l.showPopup=e,l.transition=!t.immediate,e&&(l.showWrapper=!0))},renderTitle:()=>{if(o.title)return o.title();if(e.title)return e.title;const t=e.options.find((t=>t.value===e.modelValue));return t?t.text:""}}),()=>{if(e.teleport){let o;return p(x,{to:e.teleport},"function"==typeof(t=o=h())||"[object Object]"===Object.prototype.toString.call(t)&&!f(t)?o:{default:()=>[o]})}var t;return h()}}})),Q={style:{padding:"5px 16px"}},q=u({setup(e){const t=i({"zh-CN":{disableMenu:"禁用菜单",switchTitle1:"包邮",switchTitle2:"团购",itemTitle:"筛选",expandDirection:"向上展开",customContent:"自定义菜单内容",customActiveColor:"自定义选中态颜色",option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),o=r(),l=r(!0),a=r(!1),n=r(0),s=r("a"),u=d((()=>t("option1"))),c=d((()=>t("option2"))),m=()=>{var e;null==(e=o.value)||e.toggle()};return(e,i)=>{const r=V("demo-block");return b(),h(O,null,[p(r,{title:C(t)("basicUsage")},{default:w((()=>[p(C(R),null,{default:w((()=>[p(C(H),{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e),options:C(u)},null,8,["modelValue","options"]),p(C(H),{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e),options:C(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),p(r,{title:C(t)("customContent")},{default:w((()=>[p(C(R),null,{default:w((()=>[p(C(H),{modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=e=>n.value=e),options:C(u)},null,8,["modelValue","options"]),p(C(H),{title:C(t)("itemTitle"),ref:(e,t)=>{t.item=e,o.value=e}},{default:w((()=>[p(C(P),{center:"",title:C(t)("switchTitle1")},{"right-icon":w((()=>[p(C(I),{modelValue:l.value,"onUpdate:modelValue":i[3]||(i[3]=e=>l.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),p(C(P),{center:"",title:C(t)("switchTitle2")},{"right-icon":w((()=>[p(C(I),{modelValue:a.value,"onUpdate:modelValue":i[4]||(i[4]=e=>a.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),j("div",Q,[p(C(W),{type:"danger",block:"",round:"",style:{height:"40px"},onClick:m},{default:w((()=>[g(y(C(t)("confirm")),1)])),_:1})])])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),p(r,{title:C(t)("customActiveColor")},{default:w((()=>[p(C(R),{"active-color":"#1989fa"},{default:w((()=>[p(C(H),{modelValue:n.value,"onUpdate:modelValue":i[5]||(i[5]=e=>n.value=e),options:C(u)},null,8,["modelValue","options"]),p(C(H),{modelValue:s.value,"onUpdate:modelValue":i[6]||(i[6]=e=>s.value=e),options:C(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),p(r,{title:C(t)("expandDirection")},{default:w((()=>[p(C(R),{direction:"up"},{default:w((()=>[p(C(H),{modelValue:n.value,"onUpdate:modelValue":i[7]||(i[7]=e=>n.value=e),options:C(u)},null,8,["modelValue","options"]),p(C(H),{modelValue:s.value,"onUpdate:modelValue":i[8]||(i[8]=e=>s.value=e),options:C(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),p(r,{title:C(t)("disableMenu")},{default:w((()=>[p(C(R),null,{default:w((()=>[p(C(H),{modelValue:n.value,"onUpdate:modelValue":i[9]||(i[9]=e=>n.value=e),disabled:"",options:C(u)},null,8,["modelValue","options"]),p(C(H),{modelValue:s.value,"onUpdate:modelValue":i[10]||(i[10]=e=>s.value=e),disabled:"",options:C(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])],64)}}});export{q as default};
