import{i as e,a as t}from"./use-translate.b583725c.js";import{c as o,w as s}from"./with-install.62f47d2f.js";import{p as r}from"./event.7d40caae.js";import{c as i}from"./interceptor.ab1192d4.js";import{c as l}from"./number.b01aa591.js";import{u as a}from"./use-touch.ce80657e.js";import{u as n}from"./use-expose.33de0944.js";import{A as c,E as u,G as d,D as m,e as f,r as p,o as g,a as b,w as j,C as h,F as x}from"./vendor.ef334a89.js";import{u as v}from"./index.90a1ecc4.js";import{u as C}from"./index.e65d868e.js";import{B as y}from"./index.627ee112.js";import{C as T}from"./index.550f913c.js";import{C as w}from"./index.e27c0e50.js";import{D as q}from"./function-call.533d4529.js";import"./utils.b0356070.js";import"./index.7e292110.js";import"./constant.4d85ecb9.js";import"./use-route.3fda2186.js";import"./index.3af24151.js";import"./unit.49c29796.js";import"./index.6fa13143.js";import"./index.e1f3a671.js";import"./index.620c085b.js";import"./mount-component.4a14b4e1.js";import"./index.aa2914ba.js";import"./index.253cf6b3.js";import"./use-lazy-render.49349a00.js";import"./on-popup-reopen.522dc00c.js";import"./index.0acb7aaf.js";import"./index.1c8d237b.js";import"./useChildren.a94b5b99.js";import"./useParent.0a2f50cb.js";const[W,_]=o("swipe-cell");const k=s(c({name:W,props:{disabled:Boolean,leftWidth:[Number,String],rightWidth:[Number,String],beforeClose:Function,stopPropagation:Boolean,name:{type:[Number,String],default:""}},emits:["open","close","click"],setup(t,{emit:o,slots:s}){let c,p,g;const b=u(),j=u(),h=u(),x=d({offset:0,dragging:!1}),y=a(),T=e=>e.value?v(e).width:0,w=m((()=>e(t.leftWidth)?+t.leftWidth:T(j))),q=m((()=>e(t.rightWidth)?+t.rightWidth:T(h))),W=e=>{c=!0,x.offset="left"===e?w.value:-q.value,o("open",{name:t.name,position:e})},k=e=>{x.offset=0,c&&(c=!1,o("close",{name:t.name,position:e}))},N=e=>{t.disabled||(g=x.offset,y.start(e))},P=e=>{if(t.disabled)return;const{deltaX:o}=y;if(y.move(e),y.isHorizontal()){p=!0,x.dragging=!0;(!c||o.value*g<0)&&r(e,t.stopPropagation),x.offset=l(o.value+g,-q.value,w.value)}},S=()=>{x.dragging&&(x.dragging=!1,(e=>{const t=Math.abs(x.offset),o=c?.85:.15,s="left"===e?w.value:q.value;s&&t>s*o?W(e):k(e)})(x.offset>0?"left":"right"),setTimeout((()=>{p=!1}),0))},z=(e="outside")=>{o("click",e),c&&!p&&i({interceptor:t.beforeClose,args:[{name:t.name,position:e}],done:()=>k(e)})},B=(e,t)=>o=>{t&&o.stopPropagation(),z(e)},D=(e,t)=>{const o=s[e];if(o)return f("div",{ref:t,class:_(e),onClick:B(e,!0)},[o()])};return n({open:W,close:k}),C(b,(()=>z("outside")),{eventName:"touchstart"}),()=>{var e;const t={transform:`translate3d(${x.offset}px, 0, 0)`,transitionDuration:x.dragging?"0s":".6s"};return f("div",{ref:b,class:_(),onClick:B("cell"),onTouchstart:N,onTouchmove:P,onTouchend:S,onTouchcancel:S},[f("div",{class:_("wrapper"),style:t},[D("left",j),null==(e=s.default)?void 0:e.call(s),D("right",h)])])}}}));const N=c({setup(e){const o=t({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),s=({position:e})=>{switch(e){case"left":case"cell":case"outside":return!0;case"right":return new Promise((e=>{q.confirm({title:o("confirm")}).then(e)}))}};return(e,t)=>{const r=p("demo-block");return g(),b(x,null,[f(r,{title:h(o)("basicUsage")},{default:j((()=>[f(h(k),null,{left:j((()=>[f(h(y),{square:"",type:"primary",text:h(o)("select")},null,8,["text"])])),right:j((()=>[f(h(y),{square:"",type:"danger",text:h(o)("delete")},null,8,["text"]),f(h(y),{square:"",type:"primary",text:h(o)("collect")},null,8,["text"])])),default:j((()=>[f(h(T),{border:!1,title:h(o)("title"),value:h(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"]),f(r,{title:h(o)("customContent")},{default:j((()=>[f(h(k),null,{right:j((()=>[f(h(y),{square:"",type:"danger",class:"delete-button",text:h(o)("delete")},null,8,["text"])])),default:j((()=>[f(h(w),{num:"2",price:"2.00",desc:h(o)("desc"),title:h(o)("cardTitle"),thumb:"https://img.yzcdn.cn/vant/ipad.jpeg"},null,8,["desc","title"])])),_:1})])),_:1},8,["title"]),f(r,{title:h(o)("beforeClose")},{default:j((()=>[f(h(k),{"before-close":s},{left:j((()=>[f(h(y),{square:"",type:"primary",text:h(o)("select")},null,8,["text"])])),right:j((()=>[f(h(y),{square:"",type:"danger",text:h(o)("delete")},null,8,["text"])])),default:j((()=>[f(h(T),{border:!1,title:h(o)("title"),value:h(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"])],64)}}});export{N as default};
