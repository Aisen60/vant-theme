import{a as P,T as st}from"./index.3e522d0e.js";import{c as $,M as it,b as ct,i as at,n as rt,m as lt,N as ut,K as z,G as D,y as dt,x as M,u as ft,e as ht,t as pt,a as mt}from"./use-translate.aef3085b.js";import{t as xt,n as V,a as gt,w as F}from"./with-install.796b4cad.js";import{u as vt}from"./use-touch.8e5a0907.js";import{u as U}from"./use-expose.b82056d2.js";import{z as A,C as k,B as j,M as yt,x as G,e as c,R as bt,P as Tt,q as Ct,G as St,o as _,c as kt,w as y,A as n,a as H,b as K,d as X,F as Y,h as It,t as At}from"./vue-libs.f710b8ed.js";import{f as jt}from"./constant.80c6de18.js";import{C as b}from"./index.57ab404d.js";import"./use-route.7ce7c3ed.js";import"./index.3a921ec7.js";import"./on-popup-reopen.4b166a39.js";import"./interceptor.3dc21389.js";import"./use-refs.29822121.js";import"./index.132d67d0.js";import"./index.c480cbe8.js";function _t(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Tt(e)}function wt(){const e="A".charCodeAt(0);return Array(26).fill("").map((o,l)=>String.fromCharCode(e+l))}const[q,w]=$("index-bar"),Lt={sticky:xt,zIndex:V,teleport:[String,Object],highlightColor:String,stickyOffsetTop:gt(0),indexList:{type:Array,default:wt}},Z=Symbol(q);var Bt=A({name:q,props:Lt,emits:["select","change"],setup(e,{emit:a,slots:o}){const l=k(),d=k(""),m=vt(),u=it(l),{children:x,linkChildren:s}=ct(Z);s({props:e});const T=j(()=>{if(at(e.zIndex))return{zIndex:+e.zIndex+1}}),C=j(()=>{if(e.highlightColor)return{color:e.highlightColor}}),W=(t,i)=>{for(let r=x.length-1;r>=0;r--){const h=r>0?i[r-1].height:0,f=e.sticky?h+e.stickyOffsetTop:0;if(t+f>=i[r].top)return r}return-1},L=()=>{if(ut(l))return;const{sticky:t,indexList:i}=e,r=z(u.value),h=D(u),f=x.map(I=>I.getRect(u.value,h)),g=W(r,f);d.value=i[g],t&&x.forEach((I,v)=>{const{state:p,$el:ot}=I;if(v===g||v===g-1){const S=ot.getBoundingClientRect();p.left=S.left,p.width=S.width}else p.left=null,p.width=null;if(v===g)p.active=!0,p.top=Math.max(e.stickyOffsetTop,f[v].top-r)+h.top;else if(v===g-1){const S=f[g].top-r;p.active=S>0,p.top=S+h.top-f[v].height}else p.active=!1})},B=()=>Ct(L);rt("scroll",L,{target:u}),yt(B),G(()=>e.indexList,B),G(d,t=>{t&&a("change",t)});const tt=()=>e.indexList.map(t=>{const i=t===d.value;return c("span",{class:w("index",{active:i}),style:i?C.value:void 0,"data-index":t},[t])}),O=t=>{t=String(t);const i=x.find(r=>String(r.index)===t);i&&(i.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&dt(M()-e.stickyOffsetTop),a("select",i.index))},R=t=>{const{index:i}=t.dataset;i&&O(i)},et=t=>{R(t.target)};let E;const nt=t=>{if(m.move(t),m.isVertical()){lt(t);const{clientX:i,clientY:r}=t.touches[0],h=document.elementFromPoint(i,r);if(h){const{index:f}=h.dataset;f&&E!==f&&(E=f,R(h))}}},N=()=>c("div",{class:w("sidebar"),style:T.value,onClick:et,onTouchstart:m.start,onTouchmove:nt},[tt()]);return U({scrollTo:O}),()=>{var i;let t;return c("div",{ref:l,class:w()},[e.teleport?c(bt,{to:e.teleport},_t(t=N())?t:{default:()=>[t]}):N(),(i=o.default)==null?void 0:i.call(o)])}}});const J=F(Bt),[Ot,Rt]=$("index-anchor"),Et={index:V};var Nt=A({name:Ot,props:Et,setup(e,{slots:a}){const o=St({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),l=k(),{parent:d}=ft(Z);if(!d)return;const m=()=>o.active&&d.props.sticky,u=j(()=>{const{zIndex:s,highlightColor:T}=d.props;if(m())return ht(pt(s),{left:o.left?`${o.left}px`:void 0,width:o.width?`${o.width}px`:void 0,transform:o.top?`translate3d(0, ${o.top}px, 0)`:void 0,color:T})});return U({state:o,getRect:(s,T)=>{const C=D(l);return o.rect.height=C.height,s===window||s===document.body?o.rect.top=C.top+M():o.rect.top=C.top+z(s)-T.top,o.rect}}),()=>{const s=m();return c("div",{ref:l,style:{height:s?`${o.rect.height}px`:void 0}},[c("div",{style:u.value,class:[Rt({sticky:s}),{[jt]:s}]},[a.default?a.default():e.index])])}}});const Q=F(Nt),Jt=A({setup(e){const a=mt({"zh-CN":{text:"\u6587\u672C",customIndexList:"\u81EA\u5B9A\u4E49\u7D22\u5F15\u5217\u8868"},"en-US":{text:"Text",customIndexList:"Custom Index List"}}),o=k(0),l=[],d=[1,2,3,4,5,6,8,9,10],m="A".charCodeAt(0);for(let u=0;u<26;u++)l.push(String.fromCharCode(m+u));return(u,x)=>(_(),kt(n(st),{active:o.value,"onUpdate:active":x[0]||(x[0]=s=>o.value=s)},{default:y(()=>[c(n(P),{title:n(a)("basicUsage")},{default:y(()=>[c(n(J),null,{default:y(()=>[(_(),H(Y,null,K(l,s=>X("div",{key:s},[c(n(Q),{index:s},null,8,["index"]),c(n(b),{title:n(a)("text")},null,8,["title"]),c(n(b),{title:n(a)("text")},null,8,["title"]),c(n(b),{title:n(a)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"]),c(n(P),{title:n(a)("customIndexList")},{default:y(()=>[c(n(J),{"index-list":d},{default:y(()=>[(_(),H(Y,null,K(d,s=>X("div",{key:s},[c(n(Q),{index:s},{default:y(()=>[It(At(n(a)("title")+s),1)]),_:2},1032,["index"]),c(n(b),{title:n(a)("text")},null,8,["title"]),c(n(b),{title:n(a)("text")},null,8,["title"]),c(n(b),{title:n(a)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"])]),_:1},8,["active"]))}});export{Jt as default};
