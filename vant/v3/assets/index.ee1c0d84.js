import{i as e,t,u as o,a as l}from"./use-translate.b583725c.js";import{c as a,w as i}from"./with-install.62f47d2f.js";import{u as n}from"./index.e65d868e.js";import{A as s,E as u,D as r,e as d,G as p,l as c,v as m,B as v,R as f,r as x,o as b,a as V,w as h,C as w,d as C,i as j,t as g,F as y}from"./vendor.ef334a89.js";import{u as O}from"./useChildren.a94b5b99.js";import{u as k}from"./index.253cf6b3.js";import{u as T}from"./index.7e292110.js";import{u as U}from"./index.90a1ecc4.js";import{b as _}from"./unit.49c29796.js";import{u as z}from"./use-expose.33de0944.js";import{C as P}from"./index.550f913c.js";import{I as S}from"./index.3af24151.js";import{P as A}from"./index.aa2914ba.js";import{u as D}from"./useParent.0a2f50cb.js";import{S as I}from"./index.3ef909c5.js";import{B as W}from"./index.627ee112.js";import"./utils.b0356070.js";import"./use-route.3fda2186.js";import"./interceptor.ab1192d4.js";import"./use-touch.ce80657e.js";import"./event.7d40caae.js";import"./use-lazy-render.49349a00.js";import"./on-popup-reopen.522dc00c.js";import"./index.0acb7aaf.js";import"./index.6fa13143.js";import"./index.49199c0d.js";import"./constant.4d85ecb9.js";const[B,E]=a("dropdown-menu"),M={overlay:t,zIndex:[Number,String],activeColor:String,closeOnClickOutside:t,closeOnClickOverlay:t,duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"}},R=Symbol(B);const N=i(s({name:B,props:M,setup(t,{slots:o}){const l=u(),a=u(),i=u(0),{children:s,linkChildren:p}=O(R),c=k(l),m=r((()=>s.some((e=>e.state.showWrapper)))),v=r((()=>{if(m.value&&e(t.zIndex))return{zIndex:+t.zIndex+1}})),f=()=>{if(a.value){const e=U(a);"down"===t.direction?i.value=e.bottom:i.value=window.innerHeight-e.top}},x=(e,o)=>{const{showPopup:l}=e.state,{disabled:a,titleClass:i}=e;return d("div",{role:"button",tabindex:a?-1:0,class:E("item",{disabled:a}),onClick:()=>{var e;a||(e=o,s.forEach(((t,o)=>{o===e?(f(),t.toggle()):t.state.showPopup&&t.toggle(!1,{immediate:!0})})))}},[d("span",{class:[E("title",{down:l===("down"===t.direction),active:l}),i],style:{color:l?t.activeColor:""}},[d("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return p({props:t,offset:i}),n(l,(()=>{t.closeOnClickOutside&&s.forEach((e=>{e.toggle(!1)}))})),T("scroll",(()=>{m.value&&f()}),{target:c}),()=>{var e;return d("div",{ref:l,class:E()},[d("div",{ref:a,style:v.value,class:E("bar",{opened:m.value})},[s.map(x)]),null==(e=o.default)?void 0:e.call(o)])}}}));const[$,F]=a("dropdown-item");const G=i(s({name:$,props:{title:String,disabled:Boolean,teleport:[String,Object],lazyRender:t,modelValue:o,titleClass:o,options:{type:Array,default:()=>[]}},emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:o}){const l=p({showPopup:!1,transition:!0,showWrapper:!1}),{parent:a}=D(R);if(!a)return;const i=e=>()=>t(e),n=i("open"),s=i("close"),u=i("opened"),r=()=>{l.showWrapper=!1,t("closed")},x=t=>{e.teleport&&t.stopPropagation()},b=o=>{const{activeColor:i}=a.props,n=o.value===e.modelValue;return d(P,{clickable:!0,key:o.value,icon:o.icon,title:o.text,class:F("option",{active:n}),style:{color:n?i:""},onClick:()=>{l.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value))}},{value:()=>{if(n)return d(S,{class:F("icon"),color:i,name:"success"},null)}})},V=()=>{const{offset:t}=a,{zIndex:i,overlay:p,duration:v,direction:f,closeOnClickOverlay:V}=a.props,h=_(i);return"down"===f?h.top=`${t.value}px`:h.bottom=`${t.value}px`,c(d("div",{style:h,class:F([f]),onClick:x},[d(A,{show:l.showPopup,"onUpdate:show":e=>l.showPopup=e,class:F("content"),overlay:p,position:"down"===f?"top":"bottom",duration:l.transition?v:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:V,onOpen:n,onClose:s,onOpened:u,onClosed:r},{default:()=>{var t;return[e.options.map(b),null==(t=o.default)?void 0:t.call(o)]}})]),[[m,l.showWrapper]])};return z({state:l,toggle:(e=!l.showPopup,t={})=>{e!==l.showPopup&&(l.showPopup=e,l.transition=!t.immediate,e&&(l.showWrapper=!0))},renderTitle:()=>{if(o.title)return o.title();if(e.title)return e.title;const t=e.options.find((t=>t.value===e.modelValue));return t?t.text:""}}),()=>{if(e.teleport){let o;return d(f,{to:e.teleport},"function"==typeof(t=o=V())||"[object Object]"===Object.prototype.toString.call(t)&&!v(t)?o:{default:()=>[o]})}var t;return V()}}})),H={style:{padding:"5px 16px"}},q=s({setup(e){const t=l({"zh-CN":{disableMenu:"禁用菜单",switchTitle1:"包邮",switchTitle2:"团购",itemTitle:"筛选",expandDirection:"向上展开",customContent:"自定义菜单内容",customActiveColor:"自定义选中态颜色",option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),o=u(),a=u(!0),i=u(!1),n=u(0),s=u("a"),p=r((()=>t("option1"))),c=r((()=>t("option2"))),m=()=>{var e;null==(e=o.value)||e.toggle()};return(e,l)=>{const u=x("demo-block");return b(),V(y,null,[d(u,{title:w(t)("basicUsage")},{default:h((()=>[d(w(N),null,{default:h((()=>[d(w(G),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),options:w(p)},null,8,["modelValue","options"]),d(w(G),{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),options:w(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:w(t)("customContent")},{default:h((()=>[d(w(N),null,{default:h((()=>[d(w(G),{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value=e),options:w(p)},null,8,["modelValue","options"]),d(w(G),{title:w(t)("itemTitle"),ref:(e,t)=>{t.item=e,o.value=e}},{default:h((()=>[d(w(P),{center:"",title:w(t)("switchTitle1")},{"right-icon":h((()=>[d(w(I),{modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),d(w(P),{center:"",title:w(t)("switchTitle2")},{"right-icon":h((()=>[d(w(I),{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),C("div",H,[d(w(W),{type:"danger",block:"",round:"",style:{height:"40px"},onClick:m},{default:h((()=>[j(g(w(t)("confirm")),1)])),_:1})])])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),d(u,{title:w(t)("customActiveColor")},{default:h((()=>[d(w(N),{"active-color":"#1989fa"},{default:h((()=>[d(w(G),{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=e=>n.value=e),options:w(p)},null,8,["modelValue","options"]),d(w(G),{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value=e),options:w(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:w(t)("expandDirection")},{default:h((()=>[d(w(N),{direction:"up"},{default:h((()=>[d(w(G),{modelValue:n.value,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value=e),options:w(p)},null,8,["modelValue","options"]),d(w(G),{modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value=e),options:w(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:w(t)("disableMenu")},{default:h((()=>[d(w(N),null,{default:h((()=>[d(w(G),{modelValue:n.value,"onUpdate:modelValue":l[9]||(l[9]=e=>n.value=e),disabled:"",options:w(p)},null,8,["modelValue","options"]),d(w(G),{modelValue:s.value,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value=e),disabled:"",options:w(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])],64)}}});export{q as default};
