import{c as U,b as R,L as W,i as H,X as G,n as K,G as L,P as X,u as Y,t as Z,a as q}from"./use-translate.c431c781.js";import{t as j,n as J,c as Q,m as ee,w as z,b as te,u as F}from"./with-install.6654422d.js";import{H as oe}from"./constant.80c6de18.js";import{u as le}from"./use-id.af5595af.js";import{z as S,C as V,B as D,e as o,G as ne,j as ae,v as ue,P as se,R as ie,r as re,o as de,a as ce,w as c,A as t,d as pe,h as me,t as fe,F as ve}from"./vue-libs.cab43f37.js";import{u as Ce}from"./use-expose.cd1f8e82.js";import{C as I}from"./index.c58eb23d.js";import{I as we}from"./index.73431c4d.js";import{P as be}from"./index.949f0f09.js";import{S as N}from"./index.0fb18d07.js";import{B as xe}from"./index.f77b2820.js";import"./use-route.1ad21ca2.js";import"./interceptor.17973404.js";import"./use-touch.0cf4a6e6.js";import"./use-lazy-render.c492e2a8.js";import"./on-popup-reopen.6de6ab9a.js";import"./index.c2bf76af.js";import"./index.7c2cb6fe.js";const[_,B]=U("dropdown-menu"),Ve={overlay:j,zIndex:J,duration:Q(.2),direction:ee("down"),activeColor:String,closeOnClickOutside:j,closeOnClickOverlay:j},$=Symbol(_);var ge=S({name:_,props:Ve,setup(a,{slots:u}){const f=le(),s=V(),p=V(),r=V(0),{children:i,linkChildren:w}=R($),b=W(s),g=D(()=>i.some(e=>e.state.showWrapper)),y=D(()=>{if(g.value&&H(a.zIndex))return{zIndex:+a.zIndex+1}}),n=()=>{a.closeOnClickOutside&&i.forEach(e=>{e.toggle(!1)})},v=()=>{if(p.value){const e=L(p);a.direction==="down"?r.value=e.bottom:r.value=X.value-e.top}},l=()=>{g.value&&v()},P=e=>{i.forEach((d,m)=>{m===e?(v(),d.toggle()):d.state.showPopup&&d.toggle(!1,{immediate:!0})})},k=(e,d)=>{const{showPopup:m}=e.state,{disabled:x,titleClass:O}=e;return o("div",{id:`${f}-${d}`,role:"button",tabindex:x?void 0:0,class:[B("item",{disabled:x}),{[oe]:!x}],onClick:()=>{x||P(d)}},[o("span",{class:[B("title",{down:m===(a.direction==="down"),active:m}),O],style:{color:m?a.activeColor:""}},[o("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return w({id:f,props:a,offset:r}),G(s,n),K("scroll",l,{target:b}),()=>{var e;return o("div",{ref:s,class:B()},[o("div",{ref:p,style:y.value,class:B("bar",{opened:g.value})},[i.map(k)]),(e=u.default)==null?void 0:e.call(u)])}}});const h=z(ge);function ye(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!se(a)}const[Oe,A]=U("dropdown-item"),Pe={title:String,options:te(),disabled:Boolean,teleport:[String,Object],lazyRender:j,modelValue:F,titleClass:F};var he=S({name:Oe,props:Pe,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:u,slots:f}){const s=ne({showPopup:!1,transition:!0,showWrapper:!1}),{parent:p,index:r}=Y($);if(!p)return;const i=e=>()=>u(e),w=i("open"),b=i("close"),g=i("opened"),y=()=>{s.showWrapper=!1,u("closed")},n=e=>{a.teleport&&e.stopPropagation()},v=(e=!s.showPopup,d={})=>{e!==s.showPopup&&(s.showPopup=e,s.transition=!d.immediate,e&&(s.showWrapper=!0))},l=()=>{if(f.title)return f.title();if(a.title)return a.title;const e=a.options.find(d=>d.value===a.modelValue);return e?e.text:""},P=e=>{const{activeColor:d}=p.props,m=e.value===a.modelValue,x=()=>{s.showPopup=!1,e.value!==a.modelValue&&(u("update:modelValue",e.value),u("change",e.value))},O=()=>{if(m)return o(we,{class:A("icon"),color:d,name:"success"},null)};return o(I,{role:"menuitem",key:e.value,icon:e.icon,title:e.text,class:A("option",{active:m}),style:{color:m?d:""},tabindex:m?0:-1,clickable:!0,onClick:x},{value:O})},k=()=>{const{offset:e}=p,{zIndex:d,overlay:m,duration:x,direction:O,closeOnClickOverlay:M}=p.props,T=Z(d);return O==="down"?T.top=`${e.value}px`:T.bottom=`${e.value}px`,ae(o("div",{style:T,class:A([O]),onClick:n},[o(be,{show:s.showPopup,"onUpdate:show":E=>s.showPopup=E,role:"menu",class:A("content"),overlay:m,position:O==="down"?"top":"bottom",duration:s.transition?x:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${p.id}-${r.value}`,closeOnClickOverlay:M,onOpen:w,onClose:b,onOpened:g,onClosed:y},{default:()=>{var E;return[a.options.map(P),(E=f.default)==null?void 0:E.call(f)]}})]),[[ue,s.showWrapper]])};return Ce({state:s,toggle:v,renderTitle:l}),()=>{if(a.teleport){let e;return o(ie,{to:a.teleport},ye(e=k())?e:{default:()=>[e]})}return k()}}});const C=z(he),ke={style:{padding:"5px 16px"}},Ge=S({setup(a){const u=q({"zh-CN":{disableMenu:"\u7981\u7528\u83DC\u5355",switchTitle1:"\u5305\u90AE",switchTitle2:"\u56E2\u8D2D",itemTitle:"\u7B5B\u9009",expandDirection:"\u5411\u4E0A\u5C55\u5F00",customContent:"\u81EA\u5B9A\u4E49\u83DC\u5355\u5185\u5BB9",customActiveColor:"\u81EA\u5B9A\u4E49\u9009\u4E2D\u6001\u989C\u8272",option1:[{text:"\u5168\u90E8\u5546\u54C1",value:0},{text:"\u65B0\u6B3E\u5546\u54C1",value:1},{text:"\u6D3B\u52A8\u5546\u54C1",value:2}],option2:[{text:"\u9ED8\u8BA4\u6392\u5E8F",value:"a"},{text:"\u597D\u8BC4\u6392\u5E8F",value:"b"},{text:"\u9500\u91CF\u6392\u5E8F",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),f=V(),s=V(!0),p=V(!1),r=V(0),i=V("a"),w=D(()=>u("option1")),b=D(()=>u("option2")),g=()=>{var y;(y=f.value)==null||y.toggle()};return(y,n)=>{const v=re("demo-block");return de(),ce(ve,null,[o(v,{title:t(u)("basicUsage")},{default:c(()=>[o(t(h),null,{default:c(()=>[o(t(C),{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=l=>r.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=l=>i.value=l),options:t(b)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(v,{title:t(u)("customContent")},{default:c(()=>[o(t(h),null,{default:c(()=>[o(t(C),{modelValue:r.value,"onUpdate:modelValue":n[2]||(n[2]=l=>r.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{title:t(u)("itemTitle"),ref:(l,P)=>{P.item=l,f.value=l}},{default:c(()=>[o(t(I),{center:"",title:t(u)("switchTitle1")},{"right-icon":c(()=>[o(t(N),{modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=l=>s.value=l),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])]),_:1},8,["title"]),o(t(I),{center:"",title:t(u)("switchTitle2")},{"right-icon":c(()=>[o(t(N),{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=l=>p.value=l),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])]),_:1},8,["title"]),pe("div",ke,[o(t(xe),{type:"danger",block:"",round:"",style:{height:"40px"},onClick:g},{default:c(()=>[me(fe(t(u)("confirm")),1)]),_:1})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title"]),o(v,{title:t(u)("customActiveColor")},{default:c(()=>[o(t(h),{"active-color":"#1989fa"},{default:c(()=>[o(t(C),{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=l=>r.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[6]||(n[6]=l=>i.value=l),options:t(b)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(v,{title:t(u)("expandDirection")},{default:c(()=>[o(t(h),{direction:"up"},{default:c(()=>[o(t(C),{modelValue:r.value,"onUpdate:modelValue":n[7]||(n[7]=l=>r.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[8]||(n[8]=l=>i.value=l),options:t(b)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(v,{title:t(u)("disableMenu")},{default:c(()=>[o(t(h),null,{default:c(()=>[o(t(C),{modelValue:r.value,"onUpdate:modelValue":n[9]||(n[9]=l=>r.value=l),disabled:"",options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[10]||(n[10]=l=>i.value=l),disabled:"",options:t(b)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"])],64)}}});export{Ge as default};
