import{c as t,t as e,j as r,d as a,a as o}from"./use-translate.91889477.js";import{w as s}from"./with-install.c9eedd0e.js";import{c as l,r as u}from"./utils.b0356070.js";import{z as n,C as i,x as c,e as d,D as p,r as m,o as x,a as f,w as v,B as h,d as y,F as k}from"./vue-libs.71fdcafc.js";import{B as g}from"./index.60661b5f.js";import"./constant.4d85ecb9.js";import"./use-route.913efdd2.js";import"./index.d38d9435.js";import"./index.6e9dbec3.js";const[b,S]=t("circle");let C=0;const w=t=>Math.min(Math.max(+t,0),100);const j=s(n({name:b,props:{text:String,size:[Number,String],color:[String,Object],clockwise:e,layerColor:String,strokeLinecap:String,currentRate:{type:Number,default:0},speed:{type:[Number,String],default:0},fill:{type:String,default:"none"},rate:{type:[Number,String],default:100},strokeWidth:{type:[Number,String],default:40},startPosition:{type:String,default:"top"}},emits:["update:currentRate"],setup(t,{emit:e,slots:o}){const s="van-circle-"+C++,n=i((()=>+t.strokeWidth+1e3)),p=i((()=>function(t,e){const r=t?1:0;return`M ${e/2} ${e/2} m 0, -500 a 500, 500 0 1, ${r} 0, 1000 a 500, 500 0 1, ${r} 0, -1000`}(t.clockwise,n.value))),m=i((()=>{const e={top:0,right:90,bottom:180,left:270}[t.startPosition];if(e)return{transform:`rotate(${e}deg)`}}));c((()=>t.rate),(r=>{let a;const o=Date.now(),s=t.currentRate,n=w(r),i=Math.abs(1e3*(s-n)/+t.speed),c=()=>{const t=Date.now(),r=Math.min((t-o)/i,1)*(n-s)+s;e("update:currentRate",w(parseFloat(r.toFixed(1)))),(n>s?r<n:r>n)&&(a=u(c))};t.speed?(a&&l(a),a=u(c)):e("update:currentRate",n)}),{immediate:!0});const x=()=>{const{strokeWidth:e,currentRate:r,strokeLinecap:o}=t,l=3140*r/100,u=a(t.color)?`url(#${s})`:t.color,n={stroke:u,strokeWidth:+e+1+"px",strokeLinecap:o,strokeDasharray:`${l}px 3140px`};return d("path",{d:p.value,style:n,class:S("hover"),stroke:u},null)},f=()=>{const e={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return d("path",{class:S("layer"),style:e,d:p.value},null)},v=()=>{const{color:e}=t;if(!a(e))return;const r=Object.keys(e).sort(((t,e)=>parseFloat(t)-parseFloat(e))).map(((t,r)=>d("stop",{key:r,offset:t,"stop-color":e[t]},null)));return d("defs",null,[d("linearGradient",{id:s,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[r])])};return()=>d("div",{class:S(),style:r(t.size)},[d("svg",{viewBox:`0 0 ${n.value} ${n.value}`,style:m.value},[v(),f(),x()]),o.default?o.default():t.text?d("div",{class:S("text")},[t.text]):void 0])}}));const z={style:{"margin-top":"15px"}},W=n({setup(t){const e=o({"zh-CN":{left:"左侧",right:"右侧",bottom:"底部",gradient:"渐变色",customSize:"大小定制",customStyle:"样式定制",customColor:"颜色定制",customWidth:"宽度定制",startPosition:"起始位置",counterClockwise:"逆时针"},"en-US":{left:"Left",right:"Right",bottom:"Bottom",gradient:"Gradient",customSize:"Custom Size",customStyle:"Custom Style",customColor:"Custom Color",customWidth:"Custom Width",startPosition:"Start Position",counterClockwise:"Counter Clockwise"}}),r=p(70),a=p(70),s=p(70),l=p(70),u=p(70),n={"0%":"#3fecff","100%":"#6149f6"},i=t=>Math.min(Math.max(t,0),100),c=()=>{r.value=i(r.value+20)},b=()=>{r.value=i(r.value-20)};return(t,o)=>{const i=m("demo-block");return x(),f(k,null,[d(i,{title:h(e)("basicUsage")},{default:v((()=>[d(h(j),{"current-rate":a.value,"onUpdate:current-rate":o[0]||(o[0]=t=>a.value=t),rate:r.value,speed:100,text:a.value.toFixed(0)+"%"},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),d(i,{title:h(e)("customStyle")},{default:v((()=>[d(h(j),{"current-rate":l.value,"onUpdate:current-rate":o[1]||(o[1]=t=>l.value=t),rate:r.value,speed:100,"stroke-width":60,text:h(e)("customWidth")},null,8,["current-rate","rate","text"]),d(h(j),{"current-rate":l.value,"onUpdate:current-rate":o[2]||(o[2]=t=>l.value=t),color:"#ee0a24",rate:r.value,"layer-color":"#ebedf0",speed:100,text:h(e)("customColor")},null,8,["current-rate","rate","text"]),d(h(j),{"current-rate":s.value,"onUpdate:current-rate":o[3]||(o[3]=t=>s.value=t),rate:r.value,speed:100,color:n,text:h(e)("gradient")},null,8,["current-rate","rate","text"]),d(h(j),{"current-rate":u.value,"onUpdate:current-rate":o[4]||(o[4]=t=>u.value=t),color:"#07c160",rate:r.value,speed:100,clockwise:!1,text:h(e)("counterClockwise"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"]),d(h(j),{"current-rate":u.value,"onUpdate:current-rate":o[5]||(o[5]=t=>u.value=t),color:"#7232dd",rate:r.value,speed:100,size:"120px",clockwise:!1,text:h(e)("customSize"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),y("div",z,[d(h(g),{text:h(e)("add"),type:"primary",size:"small",onClick:c},null,8,["text"]),d(h(g),{text:h(e)("decrease"),type:"danger",size:"small",onClick:b},null,8,["text"])]),d(i,{title:h(e)("startPosition")},{default:v((()=>[d(h(j),{"current-rate":75,rate:r.value,text:h(e)("left"),"start-position":"left"},null,8,["rate","text"]),d(h(j),{"current-rate":75,rate:r.value,text:h(e)("right"),"start-position":"right"},null,8,["rate","text"]),d(h(j),{"current-rate":75,rate:r.value,text:h(e)("bottom"),"start-position":"bottom"},null,8,["rate","text"])])),_:1},8,["title"])],64)}}});export{W as default};
