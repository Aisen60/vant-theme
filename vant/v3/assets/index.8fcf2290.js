import{c as b,h as d,i as E,d as $}from"./use-translate.55dc92d8.js";import{n as c,t as y,m as L,w as B}from"./with-install.c8955fea.js";import{I as D}from"./index.f787d2de.js";import{z as C,D as u,P as U,C as N,x as R,J as k,e as a,j as A,U as F,A as P}from"./vue-libs.b1f02cae.js";const[J,o]=b("image"),V={src:String,alt:String,fit:String,position:String,round:Boolean,width:c,height:c,radius:c,lazyLoad:Boolean,iconSize:c,showError:y,errorIcon:L("photo-fail"),iconPrefix:String,showLoading:y,loadingIcon:L("photo")};var _=C({name:J,props:V,emits:["load","error"],setup(e,{emit:f,slots:n}){const i=u(!1),t=u(!0),l=u(),{$Lazyload:s}=U().proxy,z=N(()=>{const r={width:d(e.width),height:d(e.height)};return E(e.radius)&&(r.overflow="hidden",r.borderRadius=d(e.radius)),r});R(()=>e.src,()=>{i.value=!1,t.value=!0});const g=r=>{t.value=!1,f("load",r)},m=r=>{i.value=!0,t.value=!1,f("error",r)},h=(r,x,I)=>I?I():a(D,{name:r,size:e.iconSize,class:x,classPrefix:e.iconPrefix},null),S=()=>{if(t.value&&e.showLoading)return a("div",{class:o("loading")},[h(e.loadingIcon,o("loading-icon"),n.loading)]);if(i.value&&e.showError)return a("div",{class:o("error")},[h(e.errorIcon,o("error-icon"),n.error)])},j=()=>{if(i.value||!e.src)return;const r={alt:e.alt,class:o("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?A(a("img",P({ref:l},r),null),[[F("lazy"),e.src]]):a("img",P({src:e.src,onLoad:g,onError:m},r),null)},v=({el:r})=>{r===l.value&&t.value&&g()},w=({el:r})=>{r===l.value&&!i.value&&m()};return s&&$&&(s.$on("loaded",v),s.$on("error",w),k(()=>{s.$off("loaded",v),s.$off("error",w)})),()=>{var r;return a("div",{class:o({round:e.round}),style:z.value},[j(),S(),(r=n.default)==null?void 0:r.call(n)])}}});const M=B(_);export{M as I};
