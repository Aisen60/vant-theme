import{c as W,s as S,i as M,a as P}from"./use-translate.e667ce10.js";import{w as V}from"./with-install.feb19484.js";import{z as B,D as F,E as q,x as z,j as L,v as U,e as t,r as $,o as O,a as X,w as r,B as e,h,t as w,F as G}from"./vue-libs.1dda7261.js";import{u as H}from"./use-expose.9b0dd301.js";import{o as J}from"./on-popup-reopen.1b0dc8ad.js";import{I as y}from"./index.472ff4df.js";import{o as K,u as Q}from"./index.904c4b4d.js";import{r as Y,d as C}from"./utils.39620306.js";import{u as A}from"./index.eddf1708.js";import{S as Z,a as _}from"./index.d7333b46.js";import"./use-touch.b0c07ae6.js";import"./useChildren.ed284d59.js";import"./useParent.5e3d1dfb.js";const[ee,m]=W("notice-bar"),te={text:String,mode:String,color:String,delay:S(1),speed:S(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var oe=B({name:ee,props:te,emits:["close","replay"],setup(l,{emit:o,slots:c}){let i=0,a=0,v;const p=F(),b=F(),n=q({show:!0,offset:0,duration:0}),j=()=>{if(c["left-icon"])return c["left-icon"]();if(l.leftIcon)return t(y,{class:m("left-icon"),name:l.leftIcon},null)},T=()=>{if(l.mode==="closeable")return"cross";if(l.mode==="link")return"arrow"},D=s=>{l.mode==="closeable"&&(n.show=!1,o("close",s))},k=()=>{if(c["right-icon"])return c["right-icon"]();const s=T();if(s)return t(y,{name:s,class:m("right-icon"),onClick:D},null)},I=()=>{n.offset=i,n.duration=0,Y(()=>{C(()=>{n.offset=-a,n.duration=(a+i)/+l.speed,o("replay")})})},R=()=>{const s=l.scrollable===!1&&!l.wrapable,d={transform:n.offset?`translateX(${n.offset}px)`:"",transitionDuration:`${n.duration}s`};return t("div",{ref:p,role:"marquee",class:m("wrap")},[t("div",{ref:b,style:d,class:[m("content"),{"van-ellipsis":s}],onTransitionend:I},[c.default?c.default():l.text])])},f=()=>{const{delay:s,speed:d,scrollable:x}=l,N=M(s)?+s*1e3:0;i=0,a=0,n.offset=0,n.duration=0,clearTimeout(v),v=setTimeout(()=>{if(!p.value||!b.value||x===!1)return;const g=A(p).width,E=A(b).width;(x||E>g)&&C(()=>{i=g,a=E,n.offset=-a,n.duration=a/+d})},N)};return J(f),K(f),Q("pageshow",f),H({reset:f}),z(()=>[l.text,l.scrollable],f),()=>{const{color:s,wrapable:d,background:x}=l;return L(t("div",{role:"alert",class:m({wrapable:d}),style:{color:s,background:x}},[j(),R(),k()]),[[U,n.show]])}}});const u=V(oe);const be=B({setup(l){const o=P({"zh-CN":{text:"\u5728\u4EE3\u7801\u9605\u8BFB\u8FC7\u7A0B\u4E2D\u4EBA\u4EEC\u8BF4\u810F\u8BDD\u7684\u9891\u7387\u662F\u8861\u91CF\u4EE3\u7801\u8D28\u91CF\u7684\u552F\u4E00\u6807\u51C6\u3002",mode:"\u901A\u77E5\u680F\u6A21\u5F0F",content:"\u5185\u5BB9",wrapable:"\u591A\u884C\u5C55\u793A",shortText:"\u6280\u672F\u662F\u5F00\u53D1\u5B83\u7684\u4EBA\u7684\u5171\u540C\u7075\u9B42\u3002",scrollable:"\u6EDA\u52A8\u64AD\u653E",customStyle:"\u81EA\u5B9A\u4E49\u6837\u5F0F",verticalScroll:"\u5782\u76F4\u6EDA\u52A8"},"en-US":{text:"Technology is the common soul of the people who developed it.",mode:"Mode",content:"Content",wrapable:"Wrapable",shortText:"Some short text.",customStyle:"Custom Style",scrollable:"Scrollable",verticalScroll:"Vertical Scroll"}});return(c,i)=>{const a=$("demo-block");return O(),X(G,null,[t(a,{title:e(o)("basicUsage")},{default:r(()=>[t(e(u),{text:e(o)("text"),scrollable:"","left-icon":"volume-o"},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("scrollable")},{default:r(()=>[t(e(u),{scrollable:"",text:e(o)("shortText")},null,8,["text"]),t(e(u),{scrollable:!1,text:e(o)("text")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("wrapable")},{default:r(()=>[t(e(u),{wrapable:"",scrollable:!1,text:e(o)("text")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("mode")},{default:r(()=>[t(e(u),{mode:"closeable",text:e(o)("shortText")},null,8,["text"]),t(e(u),{mode:"link",text:e(o)("shortText")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("customStyle")},{default:r(()=>[t(e(u),{text:e(o)("shortText"),color:"#1989fa",background:"#ecf9ff","left-icon":"info-o"},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("verticalScroll")},{default:r(()=>[t(e(u),{"left-icon":"volume-o",scrollable:!1},{default:r(()=>[t(e(Z),{vertical:"",class:"notice-swipe",autoplay:3e3,"show-indicators":!1},{default:r(()=>[t(e(_),null,{default:r(()=>[h(w(e(o)("content"))+" 1",1)]),_:1}),t(e(_),null,{default:r(()=>[h(w(e(o)("content"))+" 2",1)]),_:1}),t(e(_),null,{default:r(()=>[h(w(e(o)("content"))+" 3",1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])],64)}}});export{be as default};
