import{K as e,c as t,t as s,a}from"./use-translate.91889477.js";import{w as l}from"./with-install.c9eedd0e.js";import{u as o}from"./use-expose.5ea79906.js";import{c as i,i as n,r}from"./utils.b0356070.js";import{D as u,C as m,O as c,P as d,N as p,z as f,x as h,e as v,r as S,o as j,a as b,w as x,B as D,d as y,t as C,F as H}from"./vue-libs.71fdcafc.js";import{G as F,a as M}from"./index.b18c40be.js";import{T as g}from"./function-call.470433b8.js";import"./constant.4d85ecb9.js";import"./useChildren.edf9a3d1.js";import"./use-route.913efdd2.js";import"./index.d38d9435.js";import"./useParent.e4fd6deb.js";import"./mount-component.d3f8f39a.js";import"./index.b58615a3.js";import"./interceptor.fd551ac3.js";import"./use-touch.30351383.js";import"./index.94f7437a.js";import"./index.9e2e36ca.js";import"./use-lazy-render.3dcfda58.js";import"./on-popup-reopen.d7054786.js";import"./index.38991bce.js";import"./index.6e9dbec3.js";function k(e){var t,s,a,l,o=u(e.time),f=m((()=>{return{total:e=o.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),h=()=>{a=!1,i(t)},v=()=>Math.max(s-Date.now(),0),S=t=>{o.value=t,null==e.onChange||e.onChange(f.value),0===t&&(h(),null==e.onFinish||e.onFinish())},j=()=>{t=r((()=>{a&&(S(v()),o.value>0&&j())}))},b=()=>{t=r((()=>{if(a){var e=v();t=e,s=o.value,(Math.floor(t/1e3)!==Math.floor(s/1e3)||0===e)&&S(e),o.value>0&&b()}var t,s}))},x=()=>{n&&(e.millisecond?j():b())};return c(h),d((()=>{l&&(a=!0,l=!1,x())})),p((()=>{a&&(h(),l=!0)})),{start:()=>{a||(s=Date.now()+o.value,a=!0,x())},pause:h,reset:(t=e.time)=>{h(),o.value=t},current:f}}const[w,_]=t("count-down");const z=l(f({name:w,props:{autoStart:s,millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"}},emits:["change","finish"],setup(t,{emit:s,slots:a}){const{start:l,pause:i,reset:n,current:r}=k({time:+t.time,millisecond:t.millisecond,onChange:e=>s("change",e),onFinish:()=>s("finish")}),u=m((()=>function(t,s){const{days:a}=s;let{hours:l,minutes:o,seconds:i,milliseconds:n}=s;if(t.includes("DD")?t=t.replace("DD",e(a)):l+=24*a,t.includes("HH")?t=t.replace("HH",e(l)):o+=60*l,t.includes("mm")?t=t.replace("mm",e(o)):i+=60*o,t.includes("ss")?t=t.replace("ss",e(i)):n+=1e3*i,t.includes("S")){const s=e(n,3);t=t.includes("SSS")?t.replace("SSS",s):t.includes("SS")?t.replace("SS",s.slice(0,2)):t.replace("S",s.charAt(0))}return t}(t.format,r.value))),c=()=>{n(+t.time),t.autoStart&&l()};return h((()=>t.time),c,{immediate:!0}),o({start:l,pause:i,reset:c}),()=>v("div",{class:_()},[a.default?a.default(r.value):u.value])}}));const N={class:"block"},P=y("span",{class:"colon"},":",-1),W={class:"block"},B=y("span",{class:"colon"},":",-1),U={class:"block"},A=f({setup(e){const t=a({"zh-CN":{reset:"重置",pause:"暂停",start:"开始",finished:"倒计时结束",millisecond:"毫秒级渲染",customStyle:"自定义样式",customFormat:"自定义格式",manualControl:"手动控制",formatWithDay:"DD 天 HH 时 mm 分 ss 秒"},"en-US":{reset:"Reset",pause:"Pause",start:"Start",finished:"Finished",millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss"}}),s=u(108e6),l=u(),o=()=>{var e;null==(e=l.value)||e.start()},i=()=>{var e;null==(e=l.value)||e.pause()},n=()=>{var e;null==(e=l.value)||e.reset()},r=()=>g(t("finished"));return(e,a)=>{const u=S("demo-block");return j(),b(H,null,[v(u,{title:D(t)("basicUsage")},{default:x((()=>[v(D(z),{time:s.value},null,8,["time"])])),_:1},8,["title"]),v(u,{title:D(t)("customFormat")},{default:x((()=>[v(D(z),{time:s.value,format:D(t)("formatWithDay")},null,8,["time","format"])])),_:1},8,["title"]),v(u,{title:D(t)("millisecond")},{default:x((()=>[v(D(z),{millisecond:"",time:s.value,format:"HH:mm:ss:SS"},null,8,["time"])])),_:1},8,["title"]),v(u,{title:D(t)("customStyle")},{default:x((()=>[v(D(z),{time:s.value},{default:x((e=>[y("span",N,C(e.hours),1),P,y("span",W,C(e.minutes),1),B,y("span",U,C(e.seconds),1)])),_:1},8,["time"])])),_:1},8,["title"]),v(u,{title:D(t)("manualControl")},{default:x((()=>[v(D(z),{ref:(e,t)=>{t.countDown=e,l.value=e},millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:r},null,512),v(D(F),{clickable:"","column-num":3},{default:x((()=>[v(D(M),{icon:"play-circle-o",text:D(t)("start"),onClick:o},null,8,["text"]),v(D(M),{icon:"pause-circle-o",text:D(t)("pause"),onClick:i},null,8,["text"]),v(D(M),{icon:"replay",text:D(t)("reset"),onClick:n},null,8,["text"])])),_:1})])),_:1},8,["title"])],64)}}});export{A as default};
