import"./use-translate.b583725c.js";import{c as e,w as t}from"./with-install.62f47d2f.js";import{s as r,p as a}from"./event.7d40caae.js";import{a as l,g as n}from"./unit.49c29796.js";import{a as o,c as i}from"./number.b01aa591.js";import{u}from"./use-touch.ce80657e.js";import{A as s,E as d,D as m,e as c}from"./vendor.ef334a89.js";import{u as v}from"./index.49199c0d.js";import{u as b}from"./index.90a1ecc4.js";const[g,p]=e("slider");const f=t(s({name:g,props:{range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:t,slots:s}){let g,f,h;const y=d(),N=d(),S=u(),V=m((()=>Number(e.max)-Number(e.min))),x=m((()=>{const t=e.vertical?"width":"height";return{background:e.inactiveColor,[t]:l(e.barHeight)}})),j=t=>e.range&&Array.isArray(t),w=()=>{const{modelValue:t,min:r}=e;return j(t)?100*(t[1]-t[0])/V.value+"%":100*(t-Number(r))/V.value+"%"},C=m((()=>{const t={[e.vertical?"height":"width"]:w(),background:e.activeColor};N.value&&(t.transition="none");return t[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:t,min:r}=e;return j(t)?100*(t[0]-Number(r))/V.value+"%":"0%"})(),t})),B=t=>{const r=+e.min,a=+e.max,l=+e.step;t=i(t,r,a);const n=Math.round((t-r)/l)*l;return o(r,n)},k=(e,t)=>JSON.stringify(e)===JSON.stringify(t),A=(r,a)=>{r=j(r)?(t=>{var r,a;const l=null!=(r=t[0])?r:Number(e.min),n=null!=(a=t[1])?a:Number(e.max);return l>n?[n,l]:[l,n]})(r).map(B):B(r),k(r,e.modelValue)||t("update:modelValue",r),a&&!k(r,f)&&t("change",r)},T=t=>{if(t.stopPropagation(),e.disabled||e.readonly)return;const{min:r,reverse:a,vertical:l,modelValue:n}=e,o=b(y),i=l?o.height:o.width,u=Number(r)+(l?a?o.bottom-t.clientY:t.clientY-o.top:a?o.right-t.clientX:t.clientX-o.left)/i*V.value;if(j(n)){const[e,t]=n;A(u<=(e+t)/2?[u,t]:[e,u],!0)}else A(u,!0)},z=r=>{if(e.disabled||e.readonly)return;"start"===N.value&&t("drag-start",r),a(r,!0),S.move(r),N.value="dragging";const l=b(y);let n=(e.vertical?S.deltaY.value:S.deltaX.value)/(e.vertical?l.height:l.width)*V.value;if(e.reverse&&(n=-n),j(f)){const t=e.reverse?1-g:g;h[t]=f[t]+n}else h=f+n;A(h)},X=r=>{e.disabled||e.readonly||("dragging"===N.value&&(A(h,!0),t("drag-end",r)),N.value="")},Y=t=>{if("number"==typeof t){return p("button-wrapper",["left","right"][t])}return p("button-wrapper",e.reverse?"left":"right")},H=(t,r)=>{if("number"==typeof r){const e=s[0===r?"left-button":"right-button"];if(e)return e({value:t})}return s.button?s.button({value:t}):c("div",{class:p("button"),style:n(e.buttonSize)},null)},J=t=>{const a="number"==typeof t?e.modelValue[t]:e.modelValue;return c("div",{role:"slider",class:Y(t),tabindex:e.disabled||e.readonly?-1:0,"aria-valuemin":+e.min,"aria-valuenow":a,"aria-valuemax":+e.max,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstart:r=>{"number"==typeof t&&(g=t),(t=>{e.disabled||e.readonly||(S.start(t),h=e.modelValue,f=j(h)?h.map(B):B(h),N.value="start")})(r)},onTouchmove:z,onTouchend:X,onTouchcancel:X,onClick:r},[H(a,t)])};return A(e.modelValue),v((()=>e.modelValue)),()=>c("div",{ref:y,style:x.value,class:p({vertical:e.vertical,disabled:e.disabled}),onClick:T},[c("div",{class:p("bar"),style:C.value},[e.range?[J(0),J(1)]:J()])])}}));export{f as S};
