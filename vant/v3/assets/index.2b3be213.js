import{b as t,c as e,A as o,e as s,m as i,E as r,D as a}from"./use-translate.91889477.js";import{w as n}from"./with-install.c9eedd0e.js";import{N as f,O as l,z as d,D as u,E as c,C as m,x as p,e as h}from"./vue-libs.71fdcafc.js";import{o as x,u as v}from"./index.94f7437a.js";import{u as g}from"./index.9e2e36ca.js";import{u as b}from"./index.43faf238.js";const[w,j]=e("sticky");const y=n(d({name:w,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(e,{emit:n,slots:d}){const w=u(),y=g(w),$=c({fixed:!1,width:0,height:0,transform:0}),S=m((()=>o("top"===e.position?e.offsetTop:e.offsetBottom))),I=m((()=>{const{fixed:t,height:e,width:o}=$;if(t)return{width:`${o}px`,height:`${e}px`}})),N=m((()=>{if(!$.fixed)return;const t=s(i(e.zIndex),{width:`${$.width}px`,height:`${$.height}px`,[e.position]:`${S.value}px`});return $.transform&&(t.transform=`translate3d(0, ${$.transform}px, 0)`),t})),O=()=>{if(!w.value||r(w))return;const{container:t,position:o}=e,s=b(w),i=a(window);if($.width=s.width,$.height=s.height,"top"===o)if(t){const e=b(t),o=e.bottom-S.value-$.height;$.fixed=S.value>s.top&&e.bottom>0,$.transform=o<0?o:0}else $.fixed=S.value>s.top;else{const{clientHeight:e}=document.documentElement;if(t){const o=b(t),i=e-o.top-S.value-$.height;$.fixed=e-S.value<s.bottom&&e>o.top,$.transform=i<0?-i:0}else $.fixed=e-S.value<s.bottom}(t=>{n("scroll",{scrollTop:t,isFixed:$.fixed})})(i)};return p((()=>$.fixed),(t=>n("change",t))),v("scroll",O,{target:y}),function(e,o){if(!t||!window.IntersectionObserver)return;const s=new IntersectionObserver((t=>{o(t[0].intersectionRatio>0)}),{root:document.body}),i=()=>{e.value&&s.unobserve(e.value)};f(i),l(i),x((()=>{e.value&&s.observe(e.value)}))}(w,O),()=>{var t;return h("div",{ref:w,style:I.value},[h("div",{class:j({fixed:$.fixed}),style:N.value},[null==(t=d.default)?void 0:t.call(d)])])}}}));export{y as S};
