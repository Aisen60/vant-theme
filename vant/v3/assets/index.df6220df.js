import{t,c as e,a as r}from"./use-translate.b583725c.js";import{c as a,w as o}from"./with-install.62f47d2f.js";import{g as s}from"./unit.49c29796.js";import{c as l,r as n}from"./utils.b0356070.js";import{A as u,D as i,y as c,e as d,E as p,r as m,o as f,a as x,w as v,C as y,d as h,F as g}from"./vendor.ef334a89.js";import{B as k}from"./index.627ee112.js";import"./constant.4d85ecb9.js";import"./use-route.3fda2186.js";import"./index.3af24151.js";import"./index.6fa13143.js";const[S,b]=a("circle");let C=0;function w(t){return Math.min(Math.max(+t,0),100)}const j=o(u({name:S,props:{text:String,size:[Number,String],color:[String,Object],clockwise:t,layerColor:String,strokeLinecap:String,currentRate:{type:Number,default:0},speed:{type:[Number,String],default:0},fill:{type:String,default:"none"},rate:{type:[Number,String],default:100},strokeWidth:{type:[Number,String],default:40},startPosition:{type:String,default:"top"}},emits:["update:currentRate"],setup(t,{emit:r,slots:a}){const o="van-circle-"+C++,u=i((()=>+t.strokeWidth+1e3)),p=i((()=>function(t,e){const r=t?1:0;return`M ${e/2} ${e/2} m 0, -500 a 500, 500 0 1, ${r} 0, 1000 a 500, 500 0 1, ${r} 0, -1000`}(t.clockwise,u.value))),m=i((()=>{const e={top:0,right:90,bottom:180,left:270}[t.startPosition];if(e)return{transform:`rotate(${e}deg)`}}));c((()=>t.rate),(e=>{let a;const o=Date.now(),s=t.currentRate,u=w(e),i=Math.abs(1e3*(s-u)/+t.speed),c=()=>{const t=Date.now(),e=Math.min((t-o)/i,1)*(u-s)+s;r("update:currentRate",w(parseFloat(e.toFixed(1)))),(u>s?e<u:e>u)&&(a=n(c))};t.speed?(a&&l(a),a=n(c)):r("update:currentRate",u)}),{immediate:!0});const f=()=>{const{strokeWidth:r,currentRate:a,strokeLinecap:s}=t,l=3140*a/100,n=e(t.color)?`url(#${o})`:t.color,u={stroke:n,strokeWidth:+r+1+"px",strokeLinecap:s,strokeDasharray:`${l}px 3140px`};return d("path",{d:p.value,style:u,class:b("hover"),stroke:n},null)},x=()=>{const e={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return d("path",{class:b("layer"),style:e,d:p.value},null)},v=()=>{const{color:r}=t;if(!e(r))return;const a=Object.keys(r).sort(((t,e)=>parseFloat(t)-parseFloat(e))).map(((t,e)=>d("stop",{key:e,offset:t,"stop-color":r[t]},null)));return d("defs",null,[d("linearGradient",{id:o,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[a])])};return()=>d("div",{class:b(),style:s(t.size)},[d("svg",{viewBox:`0 0 ${u.value} ${u.value}`,style:m.value},[v(),x(),f()]),a.default?a.default():t.text?d("div",{class:b("text")},[t.text]):void 0])}}));const z={style:{"margin-top":"15px"}},W=u({setup(t){const e=r({"zh-CN":{left:"左侧",right:"右侧",bottom:"底部",gradient:"渐变色",customSize:"大小定制",customStyle:"样式定制",customColor:"颜色定制",customWidth:"宽度定制",startPosition:"起始位置",counterClockwise:"逆时针"},"en-US":{left:"Left",right:"Right",bottom:"Bottom",gradient:"Gradient",customSize:"Custom Size",customStyle:"Custom Style",customColor:"Custom Color",customWidth:"Custom Width",startPosition:"Start Position",counterClockwise:"Counter Clockwise"}}),a=p(70),o=p(70),s=p(70),l=p(70),n=p(70),u={"0%":"#3fecff","100%":"#6149f6"},i=t=>Math.min(Math.max(t,0),100),c=()=>{a.value=i(a.value+20)},S=()=>{a.value=i(a.value-20)};return(t,r)=>{const i=m("demo-block");return f(),x(g,null,[d(i,{title:y(e)("basicUsage")},{default:v((()=>[d(y(j),{"current-rate":o.value,"onUpdate:current-rate":r[0]||(r[0]=t=>o.value=t),rate:a.value,speed:100,text:o.value.toFixed(0)+"%"},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),d(i,{title:y(e)("customStyle")},{default:v((()=>[d(y(j),{"current-rate":l.value,"onUpdate:current-rate":r[1]||(r[1]=t=>l.value=t),rate:a.value,speed:100,"stroke-width":60,text:y(e)("customWidth")},null,8,["current-rate","rate","text"]),d(y(j),{"current-rate":l.value,"onUpdate:current-rate":r[2]||(r[2]=t=>l.value=t),color:"#ee0a24",rate:a.value,"layer-color":"#ebedf0",speed:100,text:y(e)("customColor")},null,8,["current-rate","rate","text"]),d(y(j),{"current-rate":s.value,"onUpdate:current-rate":r[3]||(r[3]=t=>s.value=t),rate:a.value,speed:100,color:u,text:y(e)("gradient")},null,8,["current-rate","rate","text"]),d(y(j),{"current-rate":n.value,"onUpdate:current-rate":r[4]||(r[4]=t=>n.value=t),color:"#07c160",rate:a.value,speed:100,clockwise:!1,text:y(e)("counterClockwise"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"]),d(y(j),{"current-rate":n.value,"onUpdate:current-rate":r[5]||(r[5]=t=>n.value=t),color:"#7232dd",rate:a.value,speed:100,size:"120px",clockwise:!1,text:y(e)("customSize"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),h("div",z,[d(y(k),{text:y(e)("add"),type:"primary",size:"small",onClick:c},null,8,["text"]),d(y(k),{text:y(e)("decrease"),type:"danger",size:"small",onClick:S},null,8,["text"])]),d(i,{title:y(e)("startPosition")},{default:v((()=>[d(y(j),{"current-rate":75,rate:a.value,text:y(e)("left"),"start-position":"left"},null,8,["rate","text"]),d(y(j),{"current-rate":75,rate:a.value,text:y(e)("right"),"start-position":"right"},null,8,["rate","text"]),d(y(j),{"current-rate":75,rate:a.value,text:y(e)("bottom"),"start-position":"bottom"},null,8,["rate","text"])])),_:1},8,["title"])],64)}}});export{W as default};
