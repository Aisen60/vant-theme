import{c as e,g as t,I as a,J as r,p as l,j as n,z as o}from"./use-translate.91889477.js";import{w as i}from"./with-install.c9eedd0e.js";import{u}from"./use-touch.30351383.js";import{z as s,D as d,C as m,e as c}from"./vue-libs.71fdcafc.js";import{u as v}from"./index.a16d08bc.js";import{u as b}from"./index.43faf238.js";const[g,f]=e("slider");const p=i(s({name:g,props:{range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:i,slots:s}){let g,p,h;const y=d(),N=d(),S=u(),V=m((()=>Number(e.max)-Number(e.min))),x=m((()=>{const a=e.vertical?"width":"height";return{background:e.inactiveColor,[a]:t(e.barHeight)}})),w=t=>e.range&&Array.isArray(t),j=()=>{const{modelValue:t,min:a}=e;return w(t)?100*(t[1]-t[0])/V.value+"%":100*(t-Number(a))/V.value+"%"},C=m((()=>{const t={[e.vertical?"height":"width"]:j(),background:e.activeColor};N.value&&(t.transition="none");return t[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:t,min:a}=e;return w(t)?100*(t[0]-Number(a))/V.value+"%":"0%"})(),t})),z=t=>{const a=+e.min,l=+e.max,n=+e.step;t=o(t,a,l);const i=Math.round((t-a)/n)*n;return r(a,i)},B=(e,t)=>JSON.stringify(e)===JSON.stringify(t),k=(t,a)=>{t=w(t)?(t=>{var a,r;const l=null!=(a=t[0])?a:Number(e.min),n=null!=(r=t[1])?r:Number(e.max);return l>n?[n,l]:[l,n]})(t).map(z):z(t),B(t,e.modelValue)||i("update:modelValue",t),a&&!B(t,p)&&i("change",t)},T=t=>{if(t.stopPropagation(),e.disabled||e.readonly)return;const{min:a,reverse:r,vertical:l,modelValue:n}=e,o=b(y),i=l?o.height:o.width,u=Number(a)+(l?r?o.bottom-t.clientY:t.clientY-o.top:r?o.right-t.clientX:t.clientX-o.left)/i*V.value;if(w(n)){const[e,t]=n;k(u<=(e+t)/2?[u,t]:[e,u],!0)}else k(u,!0)},A=t=>{if(e.disabled||e.readonly)return;"start"===N.value&&i("drag-start",t),l(t,!0),S.move(t),N.value="dragging";const a=b(y);let r=(e.vertical?S.deltaY.value:S.deltaX.value)/(e.vertical?a.height:a.width)*V.value;if(e.reverse&&(r=-r),w(p)){const t=e.reverse?1-g:g;h[t]=p[t]+r}else h=p+r;k(h)},J=t=>{e.disabled||e.readonly||("dragging"===N.value&&(k(h,!0),i("drag-end",t)),N.value="")},X=t=>{if("number"==typeof t){return f("button-wrapper",["left","right"][t])}return f("button-wrapper",e.reverse?"left":"right")},Y=(t,a)=>{if("number"==typeof a){const e=s[0===a?"left-button":"right-button"];if(e)return e({value:t})}return s.button?s.button({value:t}):c("div",{class:f("button"),style:n(e.buttonSize)},null)},H=t=>{const r="number"==typeof t?e.modelValue[t]:e.modelValue;return c("div",{role:"slider",class:X(t),tabindex:e.disabled||e.readonly?-1:0,"aria-valuemin":+e.min,"aria-valuenow":r,"aria-valuemax":+e.max,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstart:a=>{"number"==typeof t&&(g=t),(t=>{e.disabled||e.readonly||(S.start(t),h=e.modelValue,p=w(h)?h.map(z):z(h),N.value="start")})(a)},onTouchmove:A,onTouchend:J,onTouchcancel:J,onClick:a},[Y(r,t)])};return k(e.modelValue),v((()=>e.modelValue)),()=>c("div",{ref:y,style:x.value,class:f({vertical:e.vertical,disabled:e.disabled}),onClick:T},[c("div",{class:f("bar"),style:C.value},[e.range?[H(0),H(1)]:H()])])}}));export{p as S};
