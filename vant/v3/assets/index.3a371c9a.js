import{J as Z,K as ye,H as Te,c as _,i as F,L as Se,b as we,E as Ce,M as xe,o as Ie,n as Be,p as ke,N as Re,h as Y,y as je,O as p,G as Q,e as $e,u as Pe}from"./use-translate.c431c781.js";import{n as B,t as E,d as V,m as Ae,c as M,u as Ne,w as ee}from"./with-install.6654422d.js";import{z as H,B as C,e as m,P as te,C as R,x as k,M as Oe,G as ze,q as j,J as Le,Q as _e,D as Ee,H as Me,j as He,v as De}from"./vue-libs.cab43f37.js";import{u as ne}from"./use-id.af5595af.js";import{u as ae}from"./use-expose.cd1f8e82.js";import{a as We,r as Ze}from"./use-route.1ad21ca2.js";import{S as Fe,a as Ve}from"./index.eff5b04c.js";import{b as Ke}from"./constant.80c6de18.js";import{c as qe}from"./interceptor.17973404.js";import{u as Ge}from"./use-refs.38ed045b.js";import{o as Je}from"./on-popup-reopen.6de6ab9a.js";import{S as Ue}from"./index.081b8118.js";import{B as Xe}from"./index.73431c4d.js";function Ye(e,i,a){let l=0;const o=e.scrollLeft,s=a===0?1:Math.round(a*1e3/16);function f(){e.scrollLeft+=(i-o)/s,++l<s&&Z(f)}f()}function pe(e,i,a,l){let o=ye(e);const s=o<i,f=a===0?1:Math.round(a*1e3/16),u=(i-o)/f;function c(){o+=u,(s&&o>i||!s&&o<i)&&(o=i),Te(e,o),s&&o<i||!s&&o>i?Z(c):l&&Z(l)}c()}function Qe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[et,ie]=_("tab");var tt=H({name:et,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:B,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:E},setup(e){const i=C(()=>{const l={},{type:o,color:s,disabled:f,isActive:u,activeColor:c,inactiveColor:h}=e;s&&o==="card"&&(l.borderColor=s,f||(u?l.backgroundColor=s:l.color=s));const T=u?c:h;return T&&(l.color=T),l}),a=()=>{const l=m("span",{class:ie("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||F(e.badge)&&e.badge!==""?m(Xe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},Qe(l)?l:{default:()=>[l]}):l};return()=>m("div",{id:e.id,role:"tab",class:[ie({active:e.isActive,disabled:e.disabled})],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[a()])}});function nt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[at,oe]=_("tabs");var it=H({name:at,props:{count:V(Number),inited:Boolean,animated:Boolean,duration:V(B),swipeable:Boolean,lazyRender:Boolean,currentIndex:V(Number)},emits:["change"],setup(e,{emit:i,slots:a}){const l=R(),o=u=>i("change",u),s=()=>{var c;const u=(c=a.default)==null?void 0:c.call(a);return e.animated||e.swipeable?m(Fe,{ref:l,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},nt(u)?u:{default:()=>[u]}):u},f=u=>{const c=l.value;c&&c.state.active!==u&&c.swipeTo(u,{immediate:!e.inited})};return k(()=>e.currentIndex,f),Oe(()=>{f(e.currentIndex)}),()=>m("div",{class:oe("content",{animated:e.animated||e.swipeable})},[s()])}});const[le,D]=_("tabs"),ot={type:Ae("line"),color:String,border:Boolean,sticky:Boolean,active:M(0),duration:M(.3),animated:Boolean,ellipsis:E,swipeable:Boolean,scrollspy:Boolean,offsetTop:M(0),background:String,lazyRender:E,lineWidth:B,lineHeight:B,beforeChange:Function,swipeThreshold:M(5),titleActiveColor:String,titleInactiveColor:String},re=Symbol(le);var lt=H({name:le,props:ot,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:a}){let l,o,s;const f=R(),u=R(),c=R(),h=ne(),y=Se(f),[T,$]=Ge(),{children:b,linkChildren:P}=we(re),d=ze({inited:!1,position:"",lineStyle:{},currentIndex:-1}),x=C(()=>b.length>e.swipeThreshold||!e.ellipsis),A=C(()=>({borderColor:e.color,background:e.background})),S=(t,n)=>{var r;return(r=t.name)!=null?r:n},q=C(()=>{const t=b[d.currentIndex];if(t)return S(t,d.currentIndex)}),W=C(()=>Ce(e.offsetTop)),G=C(()=>e.sticky?W.value+l:0),N=t=>{const n=u.value,r=T.value;if(!x.value||!n||!r||!r[d.currentIndex])return;const v=r[d.currentIndex].$el,g=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Ye(n,g,t?0:+e.duration)},w=()=>{const t=d.inited;j(()=>{const n=T.value;if(!n||!n[d.currentIndex]||e.type!=="line"||Re(f.value))return;const r=n[d.currentIndex].$el,{lineWidth:v,lineHeight:g}=e,I=r.offsetLeft+r.offsetWidth/2,L={width:Y(v),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(t&&(L.transitionDuration=`${e.duration}s`),F(g)){const X=Y(g);L.height=X,L.borderRadius=X}d.lineStyle=L})},se=t=>{const n=t<d.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=n}},O=t=>{const n=se(t);if(!F(n))return;const r=b[n],v=S(r,n),g=d.currentIndex!==null;d.currentIndex=n,v!==e.active&&(i("update:active",v),g&&i("change",v,r.title))},z=t=>{const n=b.find((v,g)=>S(v,g)===t),r=n?b.indexOf(n):0;O(r)},J=(t=!1)=>{if(e.scrollspy){const n=b[d.currentIndex].$el;if(n&&y.value){const r=p(n,y.value)-G.value;o=!0,pe(y.value,r,t?0:+e.duration,()=>{o=!1})}}},de=(t,n,r)=>{const{title:v,disabled:g}=b[n],I=S(b[n],n);g?i("disabled",I,v):(qe(e.beforeChange,{args:[I],done:()=>{O(n),J()}}),i("click",I,v),We(t)),i("click-tab",{name:I,title:v,event:r,disabled:g})},ue=t=>{s=t.isFixed,i("scroll",t)},fe=t=>{j(()=>{z(t),J(!0)})},be=()=>{for(let t=0;t<b.length;t++){const{top:n}=Q(b[t].$el);if(n>G.value)return t===0?0:t-1}return b.length-1},ve=()=>{if(e.scrollspy&&!o){const t=be();O(t)}},me=()=>b.map((t,n)=>m(tt,_e({id:`${h}-${n}`,ref:$(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===d.currentIndex,controls:t.id,scrollable:x.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:r=>de(t,n,r)},ke(t,["dot","badge","title","disabled","showZeroBadge"])),null)),U=()=>{var r,v;const{type:t,border:n}=e;return m("div",{ref:c,class:[D("wrap",{scrollable:x.value}),{[Ke]:t==="line"&&n}]},[m("div",{ref:u,role:"tablist",class:D("nav",[t,{complete:x.value}]),style:A.value,"aria-orientation":"horizontal"},[(r=a["nav-left"])==null?void 0:r.call(a),me(),t==="line"&&m("div",{class:D("line"),style:d.lineStyle},null),(v=a["nav-right"])==null?void 0:v.call(a)])])};k([()=>e.color,xe],w),k(()=>e.active,t=>{t!==q.value&&z(t)}),k(()=>b.length,()=>{d.inited&&(z(e.active),w(),j(()=>{N(!0)}))}),k(()=>d.currentIndex,()=>{N(),w(),s&&!e.scrollspy&&je(Math.ceil(p(f.value)-W.value))});const he=()=>{z(e.active),j(()=>{d.inited=!0,c.value&&(l=Q(c.value).height),N(!0)})},ge=(t,n)=>i("rendered",t,n);return ae({resize:w,scrollTo:fe}),Le(w),Je(w),Ie(he),Be("scroll",ve,{target:y}),P({id:h,props:e,setLine:w,onRendered:ge,currentName:q,scrollIntoView:N}),()=>{var t;return m("div",{ref:f,class:D([e.type])},[e.sticky?m(Ue,{container:f.value,offsetTop:W.value,onScroll:ue},{default:()=>{var n;return[U(),(n=a["nav-bottom"])==null?void 0:n.call(a)]}}):[U(),(t=a["nav-bottom"])==null?void 0:t.call(a)],m(it,{count:b.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:O},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}}});const ce=Symbol(),xt=()=>Ee(ce,null),[rt,K]=_("tab"),ct=$e({},Ze,{dot:Boolean,name:B,badge:B,title:String,disabled:Boolean,titleClass:Ne,titleStyle:[String,Object],showZeroBadge:E});var st=H({name:rt,props:ct,setup(e,{slots:i}){const a=ne(),l=R(!1),{parent:o,index:s}=Pe(re);if(!o)return;const f=()=>{var h;return(h=e.name)!=null?h:s.value},u=()=>{l.value=!0,o.props.lazyRender&&j(()=>{o.onRendered(f(),e.title)})},c=C(()=>{const h=f()===o.currentName.value;return h&&!l.value&&u(),h});return k(()=>e.title,()=>{o.setLine(),o.scrollIntoView()}),Me(ce,c),()=>{var A;const h=`${o.id}-${s.value}`,{animated:y,swipeable:T,scrollspy:$,lazyRender:b}=o.props;if(!i.default&&!y)return;const P=$||c.value;if(y||T)return m(Ve,{id:a,role:"tabpanel",class:K("pane-wrapper",{inactive:!c.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":h},{default:()=>{var S;return[m("div",{class:K("panel")},[(S=i.default)==null?void 0:S.call(i)])]}});const x=l.value||$||!b?(A=i.default)==null?void 0:A.call(i):null;return ae({id:a}),He(m("div",{id:a,role:"tabpanel",class:K("panel"),tabindex:P?0:-1,"aria-labelledby":h},[x]),[[De,P]])}}});const It=ee(st),Bt=ee(lt);export{Bt as T,It as a,xt as u};
