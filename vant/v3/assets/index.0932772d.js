import{q as e,t,a as s}from"./use-translate.b583725c.js";import{c as a,w as l}from"./with-install.62f47d2f.js";import{u as o}from"./use-expose.33de0944.js";import{c as i,i as n,r}from"./utils.b0356070.js";import{E as u,D as m,P as c,Q as d,O as p,A as f,y as h,e as v,r as S,o as j,a as b,w as x,C as y,d as D,t as C,F as H}from"./vendor.ef334a89.js";import{G as F,a as M}from"./index.d73d94a0.js";import{T as g}from"./function-call.b2678465.js";import"./constant.4d85ecb9.js";import"./unit.49c29796.js";import"./useChildren.a94b5b99.js";import"./use-route.3fda2186.js";import"./index.3af24151.js";import"./useParent.0a2f50cb.js";import"./mount-component.4a14b4e1.js";import"./index.aa2914ba.js";import"./interceptor.ab1192d4.js";import"./use-touch.ce80657e.js";import"./event.7d40caae.js";import"./index.7e292110.js";import"./index.253cf6b3.js";import"./use-lazy-render.49349a00.js";import"./on-popup-reopen.522dc00c.js";import"./index.0acb7aaf.js";import"./index.6fa13143.js";function k(e){var t,s,a,l,o=u(e.time),f=m((()=>{return{total:e=o.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),h=()=>{a=!1,i(t)},v=()=>Math.max(s-Date.now(),0),S=t=>{o.value=t,null==e.onChange||e.onChange(f.value),0===t&&(h(),null==e.onFinish||e.onFinish())},j=()=>{t=r((()=>{a&&(S(v()),o.value>0&&j())}))},b=()=>{t=r((()=>{if(a){var e=v();t=e,s=o.value,(Math.floor(t/1e3)!==Math.floor(s/1e3)||0===e)&&S(e),o.value>0&&b()}var t,s}))},x=()=>{n&&(e.millisecond?j():b())};return c(h),d((()=>{l&&(a=!0,l=!1,x())})),p((()=>{a&&(h(),l=!0)})),{start:()=>{a||(s=Date.now()+o.value,a=!0,x())},pause:h,reset:(t=e.time)=>{h(),o.value=t},current:f}}const[w,_]=a("count-down");const P=l(f({name:w,props:{autoStart:t,millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"}},emits:["change","finish"],setup(t,{emit:s,slots:a}){const{start:l,pause:i,reset:n,current:r}=k({time:+t.time,millisecond:t.millisecond,onChange:e=>s("change",e),onFinish:()=>s("finish")}),u=m((()=>function(t,s){const{days:a}=s;let{hours:l,minutes:o,seconds:i,milliseconds:n}=s;if(t.includes("DD")?t=t.replace("DD",e(a)):l+=24*a,t.includes("HH")?t=t.replace("HH",e(l)):o+=60*l,t.includes("mm")?t=t.replace("mm",e(o)):i+=60*o,t.includes("ss")?t=t.replace("ss",e(i)):n+=1e3*i,t.includes("S")){const s=e(n,3);t=t.includes("SSS")?t.replace("SSS",s):t.includes("SS")?t.replace("SS",s.slice(0,2)):t.replace("S",s.charAt(0))}return t}(t.format,r.value))),c=()=>{n(+t.time),t.autoStart&&l()};return h((()=>t.time),c,{immediate:!0}),o({start:l,pause:i,reset:c}),()=>v("div",{class:_()},[a.default?a.default(r.value):u.value])}}));const W={class:"block"},z=D("span",{class:"colon"},":",-1),A={class:"block"},N=D("span",{class:"colon"},":",-1),U={class:"block"},q=f({setup(e){const t=s({"zh-CN":{reset:"重置",pause:"暂停",start:"开始",finished:"倒计时结束",millisecond:"毫秒级渲染",customStyle:"自定义样式",customFormat:"自定义格式",manualControl:"手动控制",formatWithDay:"DD 天 HH 时 mm 分 ss 秒"},"en-US":{reset:"Reset",pause:"Pause",start:"Start",finished:"Finished",millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss"}}),a=u(108e6),l=u(),o=()=>{var e;null==(e=l.value)||e.start()},i=()=>{var e;null==(e=l.value)||e.pause()},n=()=>{var e;null==(e=l.value)||e.reset()},r=()=>g(t("finished"));return(e,s)=>{const u=S("demo-block");return j(),b(H,null,[v(u,{title:y(t)("basicUsage")},{default:x((()=>[v(y(P),{time:a.value},null,8,["time"])])),_:1},8,["title"]),v(u,{title:y(t)("customFormat")},{default:x((()=>[v(y(P),{time:a.value,format:y(t)("formatWithDay")},null,8,["time","format"])])),_:1},8,["title"]),v(u,{title:y(t)("millisecond")},{default:x((()=>[v(y(P),{millisecond:"",time:a.value,format:"HH:mm:ss:SS"},null,8,["time"])])),_:1},8,["title"]),v(u,{title:y(t)("customStyle")},{default:x((()=>[v(y(P),{time:a.value},{default:x((e=>[D("span",W,C(e.hours),1),z,D("span",A,C(e.minutes),1),N,D("span",U,C(e.seconds),1)])),_:1},8,["time"])])),_:1},8,["title"]),v(u,{title:y(t)("manualControl")},{default:x((()=>[v(y(P),{ref:(e,t)=>{t.countDown=e,l.value=e},millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:r},null,512),v(y(F),{clickable:"","column-num":3},{default:x((()=>[v(y(M),{icon:"play-circle-o",text:y(t)("start"),onClick:o},null,8,["text"]),v(y(M),{icon:"pause-circle-o",text:y(t)("pause"),onClick:i},null,8,["text"]),v(y(M),{icon:"replay",text:y(t)("reset"),onClick:n},null,8,["text"])])),_:1})])),_:1},8,["title"])],64)}}});export{q as default};
