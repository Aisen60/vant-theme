import{c as t,e as o,u as e,t as n,o as l,g as s,r as a,b as c}from"./use-translate.91889477.js";import{w as r}from"./with-install.c9eedd0e.js";import{m as i,u}from"./mount-component.d3f8f39a.js";import{a as m,b as f}from"./constant.4d85ecb9.js";import{c as d}from"./interceptor.fd551ac3.js";import{a as g,p,P as B}from"./index.b58615a3.js";import{B as C}from"./index.60661b5f.js";import{b as w,a as h}from"./index.f84002e0.js";import{z as b,E as v,e as x,I as y}from"./vue-libs.71fdcafc.js";const[O,k,S]=t("dialog"),j=[...g,"transition","closeOnPopstate"];var T=b({name:O,props:o({},p,{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:e,messageAlign:String,closeOnPopstate:n,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:n,closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"}}),emits:["confirm","cancel","update:show"],setup(t,{emit:o,slots:e}){const n=v({confirm:!1,cancel:!1}),c=t=>o("update:show",t),r=o=>{c(!1),t.callback&&t.callback(o)},i=e=>()=>{t.show&&(o(e),t.beforeClose?(n[e]=!0,d({interceptor:t.beforeClose,args:[e],done(){r(e),n[e]=!1},canceled(){n[e]=!1}})):r(e))},u=i("cancel"),g=i("confirm"),p=()=>{const o=e.title?e.title():t.title;if(o)return x("div",{class:k("header",{isolated:!t.message&&!e.default})},[o])},b=o=>{const{message:e,allowHtml:n,messageAlign:l}=t,s=k("message",{"has-title":o,[l]:l}),c=a(e)?e():e;return n&&"string"==typeof c?x("div",{class:s,innerHTML:c},null):x("div",{class:s},[c])},O=()=>{if(e.default)return x("div",{class:k("content")},[e.default()]);const{title:o,message:n,allowHtml:l}=t;if(n){const t=!(!o&&!e.title);return x("div",{key:l?1:0,class:k("content",{isolated:!t})},[b(t)])}},T=()=>e.footer?e.footer():"round-button"===t.theme?x(h,{class:k("footer")},{default:()=>[t.showCancelButton&&x(w,{type:"warning",text:t.cancelButtonText||S("cancel"),class:k("cancel"),color:t.cancelButtonColor,loading:n.cancel,onClick:u},null),t.showConfirmButton&&x(w,{type:"danger",text:t.confirmButtonText||S("confirm"),class:k("confirm"),color:t.confirmButtonColor,loading:n.confirm,onClick:g},null)]}):x("div",{class:[f,k("footer")]},[t.showCancelButton&&x(C,{size:"large",text:t.cancelButtonText||S("cancel"),class:k("cancel"),style:{color:t.cancelButtonColor},loading:n.cancel,onClick:u},null),t.showConfirmButton&&x(C,{size:"large",text:t.confirmButtonText||S("confirm"),class:[k("confirm"),{[m]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:n.confirm,onClick:g},null)]);return()=>{const{width:o,title:e,theme:n,message:a,className:r}=t;return x(B,y({role:"dialog",class:[k([n]),r],style:{width:s(o)},"aria-labelledby":e||a},l(t,j),{"onUpdate:show":c}),{default:()=>[p(),O(),T()]})}}});let P;function H(t){return c?new Promise(((e,n)=>{P||function(){const t={setup(){const{state:t,toggle:o}=u();return()=>x(T,y(t,{"onUpdate:show":o}),null)}};({instance:P}=i(t))}(),P.open(o({},H.currentOptions,t,{callback:t=>{("confirm"===t?e:n)(t)}}))})):Promise.resolve()}H.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},H.currentOptions=o({},H.defaultOptions),H.alert=H,H.confirm=t=>H(o({showCancelButton:!0},t)),H.close=()=>{P&&P.toggle(!1)},H.setDefaultOptions=t=>{o(H.currentOptions,t)},H.resetDefaultOptions=()=>{H.currentOptions=o({},H.defaultOptions)},H.Component=r(T),H.install=t=>{t.use(H.Component),t.config.globalProperties.$dialog=H};export{H as D};
