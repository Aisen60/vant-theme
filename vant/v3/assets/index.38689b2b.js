import{a as D,T as it}from"./index.15407be1.js";import{c as N,i as rt,p as ct,D as at,C as $,s as lt,r as P,z as V,e as ut,l as dt,u as ft}from"./use-translate.789845f9.js";import{t as ht,n as F,a as pt,w as M}from"./with-install.c13b505f.js";import{u as mt}from"./use-touch.b0c07ae6.js";import{u as U}from"./use-expose.d54fed8a.js";import{z as I,D as S,C as A,G as xt,x as H,e as r,Q as gt,A as vt,q as bt,E as yt,o as _,c as Ct,w as b,B as o,a as X,b as Y,d as q,F as G,h as Tt,t as jt}from"./vue-libs.1dda7261.js";import{u as St}from"./index.0749451f.js";import{u as kt}from"./useChildren.ed284d59.js";import{u as It}from"./index.904c4b4d.js";import{f as At}from"./constant.4d85ecb9.js";import{u as _t}from"./useParent.5e3d1dfb.js";import{C as y}from"./index.bb9b6afa.js";import"./use-route.dfb37f70.js";import"./index.a047f0f1.js";import"./on-popup-reopen.1b0dc8ad.js";import"./utils.39620306.js";import"./interceptor.4e67a670.js";import"./use-refs.2bafdad1.js";import"./index.45ab6c22.js";import"./index.83a50000.js";function wt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!vt(e)}function Lt(){const e="A".charCodeAt(0);return Array(26).fill("").map((n,u)=>String.fromCharCode(e+u))}const[K,w]=N("index-bar"),Rt={sticky:ht,zIndex:F,teleport:[String,Object],highlightColor:String,stickyOffsetTop:pt(0),indexList:{type:Array,default:Lt}},Q=Symbol(K);var Bt=I({name:K,props:Rt,emits:["select","change"],setup(e,{emit:c,slots:n}){const u=S(),d=S(""),m=mt(),l=St(u),{children:x,linkChildren:s}=kt(Q);s({props:e});const C=A(()=>{if(rt(e.zIndex))return{zIndex:+e.zIndex+1}}),T=A(()=>{if(e.highlightColor)return{color:e.highlightColor}}),W=()=>"getBoundingClientRect"in l.value?V(l):{top:0,left:0},tt=(t,i)=>{for(let a=x.length-1;a>=0;a--){const h=a>0?i[a-1].height:0,f=e.sticky?h+e.stickyOffsetTop:0;if(t+f>=i[a].top)return a}return-1},L=()=>{if(at(u))return;const{sticky:t,indexList:i}=e,a=$(l.value),h=W(),f=x.map(k=>k.getRect(l.value,h)),g=tt(a,f);d.value=i[g],t&&x.forEach((k,v)=>{const{state:p,$el:st}=k;if(v===g||v===g-1){const j=st.getBoundingClientRect();p.left=j.left,p.width=j.width}else p.left=null,p.width=null;if(v===g)p.active=!0,p.top=Math.max(e.stickyOffsetTop,f[v].top-a)+h.top;else if(v===g-1){const j=f[g].top-a;p.active=j>0,p.top=j+h.top-f[v].height}else p.active=!1})},R=()=>bt(L);It("scroll",L,{target:l}),xt(R),H(()=>e.indexList,R),H(d,t=>{t&&c("change",t)});const et=()=>e.indexList.map(t=>{const i=t===d.value;return r("span",{class:w("index",{active:i}),style:i?T.value:void 0,"data-index":t},[t])}),B=t=>{t=String(t);const i=x.find(a=>String(a.index)===t);i&&(i.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&lt(P()-e.stickyOffsetTop),c("select",i.index))},O=t=>{const{index:i}=t.dataset;i&&B(i)},ot=t=>{O(t.target)};let E;const nt=t=>{if(m.move(t),m.isVertical()){ct(t);const{clientX:i,clientY:a}=t.touches[0],h=document.elementFromPoint(i,a);if(h){const{index:f}=h.dataset;f&&E!==f&&(E=f,O(h))}}},z=()=>r("div",{class:w("sidebar"),style:C.value,onClick:ot,onTouchstart:m.start,onTouchmove:nt},[et()]);return U({scrollTo:B}),()=>{var i;let t;return r("div",{ref:u,class:w()},[e.teleport?r(gt,{to:e.teleport},wt(t=z())?t:{default:()=>[t]}):z(),(i=n.default)==null?void 0:i.call(n)])}}});const Z=M(Bt),[Ot,Et]=N("index-anchor");var zt=I({name:Ot,props:{index:F},setup(e,{slots:c}){const n=yt({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),u=S(),{parent:d}=_t(Q);if(!d)return;const m=()=>n.active&&d.props.sticky,l=A(()=>{const{zIndex:s,highlightColor:C}=d.props;if(m())return ut(dt(s),{left:n.left?`${n.left}px`:void 0,width:n.width?`${n.width}px`:void 0,transform:n.top?`translate3d(0, ${n.top}px, 0)`:void 0,color:C})});return U({state:n,getRect:(s,C)=>{const T=V(u);return n.rect.height=T.height,s===window||s===document.body?n.rect.top=T.top+P():n.rect.top=T.top+$(s)-C.top,n.rect}}),()=>{const s=m();return r("div",{ref:u,style:{height:s?`${n.rect.height}px`:void 0}},[r("div",{style:l.value,class:[Et({sticky:s}),{[At]:s}]},[c.default?c.default():e.index])])}}});const J=M(zt),oe=I({setup(e){const c=ft({"zh-CN":{text:"\u6587\u672C",customIndexList:"\u81EA\u5B9A\u4E49\u7D22\u5F15\u5217\u8868"},"en-US":{text:"Text",customIndexList:"Custom Index List"}}),n=S(0),u=[],d=[1,2,3,4,5,6,8,9,10],m="A".charCodeAt(0);for(let l=0;l<26;l++)u.push(String.fromCharCode(m+l));return(l,x)=>(_(),Ct(o(it),{active:n.value,"onUpdate:active":x[0]||(x[0]=s=>n.value=s)},{default:b(()=>[r(o(D),{title:o(c)("basicUsage")},{default:b(()=>[r(o(Z),null,{default:b(()=>[(_(),X(G,null,Y(u,s=>q("div",{key:s},[r(o(J),{index:s},null,8,["index"]),r(o(y),{title:o(c)("text")},null,8,["title"]),r(o(y),{title:o(c)("text")},null,8,["title"]),r(o(y),{title:o(c)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"]),r(o(D),{title:o(c)("customIndexList")},{default:b(()=>[r(o(Z),{"index-list":d},{default:b(()=>[(_(),X(G,null,Y(d,s=>q("div",{key:s},[r(o(J),{index:s},{default:b(()=>[Tt(jt(o(c)("title")+s),1)]),_:2},1032,["index"]),r(o(y),{title:o(c)("text")},null,8,["title"]),r(o(y),{title:o(c)("text")},null,8,["title"]),r(o(y),{title:o(c)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"])]),_:1},8,["active"]))}});export{oe as default};
