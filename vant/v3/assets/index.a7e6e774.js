import{b as t,e}from"./use-translate.b583725c.js";import{c as o,b as s,w as i}from"./with-install.62f47d2f.js";import{i as r}from"./style.21d4b335.js";import{u as n,b as a}from"./unit.49c29796.js";import{O as f,P as l,A as d,E as u,G as m,D as c,y as p,e as h}from"./vendor.ef334a89.js";import{o as x,u as v}from"./index.7e292110.js";import{u as b}from"./index.253cf6b3.js";import{u as g}from"./index.90a1ecc4.js";const[w,j]=o("sticky");const y=i(d({name:w,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(o,{emit:i,slots:d}){const w=u(),y=b(w),$=m({fixed:!1,width:0,height:0,transform:0}),S=c((()=>n("top"===o.position?o.offsetTop:o.offsetBottom))),I=c((()=>{const{fixed:t,height:e,width:o}=$;if(t)return{width:`${o}px`,height:`${e}px`}})),O=c((()=>{if(!$.fixed)return;const t=e(a(o.zIndex),{width:`${$.width}px`,height:`${$.height}px`,[o.position]:`${S.value}px`});return $.transform&&(t.transform=`translate3d(0, ${$.transform}px, 0)`),t})),N=()=>{if(!w.value||r(w))return;const{container:t,position:e}=o,n=g(w),a=s(window);if($.width=n.width,$.height=n.height,"top"===e)if(t){const e=g(t),o=e.bottom-S.value-$.height;$.fixed=S.value>n.top&&e.bottom>0,$.transform=o<0?o:0}else $.fixed=S.value>n.top;else{const{clientHeight:e}=document.documentElement;if(t){const o=g(t),s=e-o.top-S.value-$.height;$.fixed=e-S.value<n.bottom&&e>o.top,$.transform=s<0?-s:0}else $.fixed=e-S.value<n.bottom}(t=>{i("scroll",{scrollTop:t,isFixed:$.fixed})})(a)};return p((()=>$.fixed),(t=>i("change",t))),v("scroll",N,{target:y}),function(e,o){if(!t||!window.IntersectionObserver)return;const s=new IntersectionObserver((t=>{o(t[0].intersectionRatio>0)}),{root:document.body}),i=()=>{e.value&&s.unobserve(e.value)};f(i),l(i),x((()=>{e.value&&s.observe(e.value)}))}(w,N),()=>{var t;return h("div",{ref:w,style:I.value},[h("div",{class:j({fixed:$.fixed}),style:O.value},[null==(t=d.default)?void 0:t.call(d)])])}}}));export{y as S};
