import{i as t,a as e}from"./use-translate.b583725c.js";import{c as l,w as o}from"./with-install.62f47d2f.js";import{A as a,E as s,G as r,y as n,l as i,v as c,e as u,r as d,o as f,a as m,w as p,C as b,i as x,t as h,F as w}from"./vendor.ef334a89.js";import{u as v}from"./use-expose.33de0944.js";import{o as S}from"./on-popup-reopen.522dc00c.js";import{I as g}from"./index.3af24151.js";import{o as j,u as y}from"./index.7e292110.js";import{r as _,d as T}from"./utils.b0356070.js";import{u as k}from"./index.90a1ecc4.js";import{S as C,a as I}from"./index.c15090cc.js";import"./unit.49c29796.js";import"./style.21d4b335.js";import"./event.7d40caae.js";import"./number.b01aa591.js";import"./use-touch.ce80657e.js";import"./useChildren.a94b5b99.js";import"./useParent.0a2f50cb.js";const[N,B]=l("notice-bar");const U=o(a({name:N,props:{text:String,mode:String,color:String,leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null},delay:{type:[Number,String],default:1},speed:{type:[Number,String],default:60}},emits:["close","replay"],setup(e,{emit:l,slots:o}){let a,d=0,f=0;const m=s(),p=s(),b=r({show:!0,offset:0,duration:0}),x=t=>{"closeable"===e.mode&&(b.show=!1,l("close",t))},h=()=>{if(o["right-icon"])return o["right-icon"]();const t="closeable"===e.mode?"cross":"link"===e.mode?"arrow":void 0;return t?u(g,{name:t,class:B("right-icon"),onClick:x},null):void 0},w=()=>{b.offset=d,b.duration=0,_((()=>{T((()=>{b.offset=-f,b.duration=(f+d)/+e.speed,l("replay")}))}))},C=()=>{const t=!1===e.scrollable&&!e.wrapable,l={transform:b.offset?`translateX(${b.offset}px)`:"",transitionDuration:`${b.duration}s`};return u("div",{ref:m,role:"marquee",class:B("wrap")},[u("div",{ref:p,style:l,class:[B("content"),{"van-ellipsis":t}],onTransitionend:w},[o.default?o.default():e.text])])},I=()=>{const{delay:l,speed:o,scrollable:s}=e,r=t(l)?1e3*+l:0;d=0,f=0,b.offset=0,b.duration=0,clearTimeout(a),a=setTimeout((()=>{if(!m.value||!p.value||!1===s)return;const t=k(m).width,e=k(p).width;(s||e>t)&&T((()=>{d=t,f=e,b.offset=-f,b.duration=f/+o}))}),r)};return S(I),j(I),y("pageshow",I),v({reset:I}),n((()=>[e.text,e.scrollable]),I),()=>{const{color:t,wrapable:l,background:a}=e;return i(u("div",{role:"alert",class:B({wrapable:l}),style:{color:t,background:a}},[o["left-icon"]?o["left-icon"]():e.leftIcon?u(g,{class:B("left-icon"),name:e.leftIcon},null):void 0,C(),h()]),[[c,b.show]])}}}));const $=a({setup(t){const l=e({"zh-CN":{text:"在代码阅读过程中人们说脏话的频率是衡量代码质量的唯一标准。",mode:"通知栏模式",content:"内容",wrapable:"多行展示",shortText:"技术是开发它的人的共同灵魂。",scrollable:"滚动播放",customStyle:"自定义样式",verticalScroll:"垂直滚动"},"en-US":{text:"Technology is the common soul of the people who developed it.",mode:"Mode",content:"Content",wrapable:"Wrapable",shortText:"Some short text.",customStyle:"Custom Style",scrollable:"Scrollable",verticalScroll:"Vertical Scroll"}});return(t,e)=>{const o=d("demo-block");return f(),m(w,null,[u(o,{title:b(l)("basicUsage")},{default:p((()=>[u(b(U),{text:b(l)("text"),scrollable:"","left-icon":"volume-o"},null,8,["text"])])),_:1},8,["title"]),u(o,{title:b(l)("scrollable")},{default:p((()=>[u(b(U),{scrollable:"",text:b(l)("shortText")},null,8,["text"]),u(b(U),{scrollable:!1,text:b(l)("text")},null,8,["text"])])),_:1},8,["title"]),u(o,{title:b(l)("wrapable")},{default:p((()=>[u(b(U),{wrapable:"",scrollable:!1,text:b(l)("text")},null,8,["text"])])),_:1},8,["title"]),u(o,{title:b(l)("mode")},{default:p((()=>[u(b(U),{mode:"closeable",text:b(l)("shortText")},null,8,["text"]),u(b(U),{mode:"link",text:b(l)("shortText")},null,8,["text"])])),_:1},8,["title"]),u(o,{title:b(l)("customStyle")},{default:p((()=>[u(b(U),{text:b(l)("shortText"),color:"#1989fa",background:"#ecf9ff","left-icon":"info-o"},null,8,["text"])])),_:1},8,["title"]),u(o,{title:b(l)("verticalScroll")},{default:p((()=>[u(b(U),{"left-icon":"volume-o",scrollable:!1},{default:p((()=>[u(b(C),{vertical:"",class:"notice-swipe",autoplay:3e3,"show-indicators":!1},{default:p((()=>[u(b(I),null,{default:p((()=>[x(h(b(l)("content"))+" 1",1)])),_:1}),u(b(I),null,{default:p((()=>[x(h(b(l)("content"))+" 2",1)])),_:1}),u(b(I),null,{default:p((()=>[x(h(b(l)("content"))+" 3",1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])],64)}}});export{$ as default};
