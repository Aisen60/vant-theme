import{c as we,p as ye,e as be,u as ge}from"./use-translate.33b17133.js";import{m as J,b as xe,n as Oe,t as _,u as Ee,w as Ce}from"./with-install.d00852e2.js";import{f as ke}from"./constant.80c6de18.js";import{I as je}from"./index.0a08d1ef.js";import{P as oe}from"./index.9f327319.js";import{z as ne,C as F,E as Pe,O as Se,x as Ae,e as d,H as Te,F as K,q as De,r as Le,o as re,a as ae,w as h,A as f,h as I,t as N,d as ie,b as Me}from"./vue-libs.7d3cdfcb.js";import{u as Re}from"./index.586cef8a.js";import{B as U}from"./index.77211d3e.js";import{F as Be}from"./index.488ff9be.js";import{P as Fe}from"./index.e70e36e3.js";import{G as Ie,a as Ne}from"./index.a3858a0f.js";import{T as Ue}from"./function-call.af72b74c.js";import"./interceptor.926f5054.js";import"./use-expose.e553b263.js";import"./use-touch.ac1b49d9.js";import"./index.ba1bb458.js";import"./utils.45a8bdb5.js";import"./index.71250a43.js";import"./use-lazy-render.cbcc62ed.js";import"./on-popup-reopen.aa8649f1.js";import"./index.89fdf2f6.js";import"./use-route.239dc794.js";import"./index.58fe8242.js";import"./index.34cf0753.js";import"./index.02ce6e6d.js";import"./useParent.9724c87d.js";import"./Picker.7c97e892.js";import"./deep-clone.6c0cb266.js";import"./useChildren.0ca62895.js";import"./mount-component.4efac25f.js";function X(e,t){var o=e.getBoundingClientRect(),n=1,r=1;return{width:o.width/n,height:o.height/r,top:o.top/r,right:o.right/n,bottom:o.bottom/r,left:o.left/n,x:o.left/n,y:o.top/r}}function E(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function se(e){var t=E(e),o=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:o,scrollTop:n}}function ce(e){var t=E(e).Element;return e instanceof t||e instanceof Element}function C(e){var t=E(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function We(e){if(typeof ShadowRoot=="undefined")return!1;var t=E(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function _e(e){return e===E(e)||!C(e)?se(e):$e(e)}function j(e){return e?(e.nodeName||"").toLowerCase():null}function z(e){return((ce(e)?e.ownerDocument:e.document)||window.document).documentElement}function Xe(e){return X(z(e)).left+se(e).scrollLeft}function A(e){return E(e).getComputedStyle(e)}function Q(e){var t=A(e),o=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+r+n)}function ze(e){var t=e.getBoundingClientRect(),o=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return o!==1||n!==1}function He(e,t,o){o===void 0&&(o=!1);var n=C(t);C(t)&&ze(t);var r=z(t),a=X(e),u={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(n||!n&&!o)&&((j(t)!=="body"||Q(r))&&(u=_e(t)),C(t)?(i=X(t),i.x+=t.clientLeft,i.y+=t.clientTop):r&&(i.x=Xe(r))),{x:a.left+u.scrollLeft-i.x,y:a.top+u.scrollTop-i.y,width:a.width,height:a.height}}function Ye(e){var t=X(e),o=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-o)<=1&&(o=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:o,height:n}}function Z(e){return j(e)==="html"?e:e.assignedSlot||e.parentNode||(We(e)?e.host:null)||z(e)}function ue(e){return["html","body","#document"].indexOf(j(e))>=0?e.ownerDocument.body:C(e)&&Q(e)?e:ue(Z(e))}function H(e,t){var o;t===void 0&&(t=[]);var n=ue(e),r=n===((o=e.ownerDocument)==null?void 0:o.body),a=E(n),u=r?[a].concat(a.visualViewport||[],Q(n)?n:[]):n,i=t.concat(u);return r?i:i.concat(H(Z(u)))}function qe(e){return["table","td","th"].indexOf(j(e))>=0}function le(e){return!C(e)||A(e).position==="fixed"?null:e.offsetParent}function Ve(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,o=navigator.userAgent.indexOf("Trident")!==-1;if(o&&C(e)){var n=A(e);if(n.position==="fixed")return null}for(var r=Z(e);C(r)&&["html","body"].indexOf(j(r))<0;){var a=A(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function fe(e){for(var t=E(e),o=le(e);o&&qe(o)&&A(o).position==="static";)o=le(o);return o&&(j(o)==="html"||j(o)==="body"&&A(o).position==="static")?t:o||Ve(e)||t}var R="top",Y="bottom",W="right",T="left",Ge="auto",Je=[R,Y,W,T],pe="start",q="end",Ke=[].concat(Je,[Ge]).reduce(function(e,t){return e.concat([t,t+"-"+pe,t+"-"+q])},[]),Qe="beforeRead",Ze="read",et="afterRead",tt="beforeMain",ot="main",nt="afterMain",rt="beforeWrite",at="write",it="afterWrite",st=[Qe,Ze,et,tt,ot,nt,rt,at,it];function ct(e){var t=new Map,o=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function r(a){o.add(a.name);var u=[].concat(a.requires||[],a.requiresIfExists||[]);u.forEach(function(i){if(!o.has(i)){var l=t.get(i);l&&r(l)}}),n.push(a)}return e.forEach(function(a){o.has(a.name)||r(a)}),n}function ut(e){var t=ct(e);return st.reduce(function(o,n){return o.concat(t.filter(function(r){return r.phase===n}))},[])}function lt(e){var t;return function(){return t||(t=new Promise(function(o){Promise.resolve().then(function(){t=void 0,o(e())})})),t}}function ee(e){return e.split("-")[0]}function ft(e){var t=e.reduce(function(o,n){var r=o[n.name];return o[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,o},{});return Object.keys(t).map(function(o){return t[o]})}var V=Math.round;function de(e){return e.split("-")[1]}function pt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function dt(e){var t=e.reference,o=e.element,n=e.placement,r=n?ee(n):null,a=n?de(n):null,u=t.x+t.width/2-o.width/2,i=t.y+t.height/2-o.height/2,l;switch(r){case R:l={x:u,y:t.y-o.height};break;case Y:l={x:u,y:t.y+t.height};break;case W:l={x:t.x+t.width,y:i};break;case T:l={x:t.x-o.width,y:i};break;default:l={x:t.x,y:t.y}}var s=r?pt(r):null;if(s!=null){var c=s==="y"?"height":"width";switch(a){case pe:l[s]=l[s]-(t[c]/2-o[c]/2);break;case q:l[s]=l[s]+(t[c]/2-o[c]/2);break}}return l}var me={placement:"bottom",modifiers:[],strategy:"absolute"};function ve(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function mt(e){e===void 0&&(e={});var t=e,o=t.defaultModifiers,n=o===void 0?[]:o,r=t.defaultOptions,a=r===void 0?me:r;return function(i,l,s){s===void 0&&(s=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},me,a),modifiersData:{},elements:{reference:i,popper:l},attributes:{},styles:{}},p=[],k=!1,w={state:c,setOptions:function(y){var g=typeof y=="function"?y(c.options):y;m(),c.options=Object.assign({},a,c.options,g),c.scrollParents={reference:ce(i)?H(i):i.contextElement?H(i.contextElement):[],popper:H(l)};var x=ut(ft([].concat(n,c.options.modifiers)));return c.orderedModifiers=x.filter(function(O){return O.enabled}),L(),w.update()},forceUpdate:function(){if(!k){var y=c.elements,g=y.reference,x=y.popper;if(!!ve(g,x)){c.rects={reference:He(g,fe(x),c.options.strategy==="fixed"),popper:Ye(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(te){return c.modifiersData[te.name]=Object.assign({},te.data)});for(var O=0;O<c.orderedModifiers.length;O++){if(c.reset===!0){c.reset=!1,O=-1;continue}var b=c.orderedModifiers[O],P=b.fn,M=b.options,$=M===void 0?{}:M,S=b.name;typeof P=="function"&&(c=P({state:c,options:$,name:S,instance:w})||c)}}}},update:lt(function(){return new Promise(function(v){w.forceUpdate(),v(c)})}),destroy:function(){m(),k=!0}};if(!ve(i,l))return w;w.setOptions(s).then(function(v){!k&&s.onFirstUpdate&&s.onFirstUpdate(v)});function L(){c.orderedModifiers.forEach(function(v){var y=v.name,g=v.options,x=g===void 0?{}:g,O=v.effect;if(typeof O=="function"){var b=O({state:c,name:y,instance:w,options:x}),P=function(){};p.push(b||P)}})}function m(){p.forEach(function(v){return v()}),p=[]}return w}}var G={passive:!0};function vt(e){var t=e.state,o=e.instance,n=e.options,r=n.scroll,a=r===void 0?!0:r,u=n.resize,i=u===void 0?!0:u,l=E(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&s.forEach(function(c){c.addEventListener("scroll",o.update,G)}),i&&l.addEventListener("resize",o.update,G),function(){a&&s.forEach(function(c){c.removeEventListener("scroll",o.update,G)}),i&&l.removeEventListener("resize",o.update,G)}}var ht={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vt,data:{}};function wt(e){var t=e.state,o=e.name;t.modifiersData[o]=dt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var yt={name:"popperOffsets",enabled:!0,phase:"read",fn:wt,data:{}},bt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gt(e){var t=e.x,o=e.y,n=window,r=n.devicePixelRatio||1;return{x:V(V(t*r)/r)||0,y:V(V(o*r)/r)||0}}function he(e){var t,o=e.popper,n=e.popperRect,r=e.placement,a=e.variation,u=e.offsets,i=e.position,l=e.gpuAcceleration,s=e.adaptive,c=e.roundOffsets,p=c===!0?gt(u):typeof c=="function"?c(u):u,k=p.x,w=k===void 0?0:k,L=p.y,m=L===void 0?0:L,v=u.hasOwnProperty("x"),y=u.hasOwnProperty("y"),g=T,x=R,O=window;if(s){var b=fe(o),P="clientHeight",M="clientWidth";b===E(o)&&(b=z(o),A(b).position!=="static"&&i==="absolute"&&(P="scrollHeight",M="scrollWidth")),b=b,(r===R||(r===T||r===W)&&a===q)&&(x=Y,m-=b[P]-n.height,m*=l?1:-1),(r===T||(r===R||r===Y)&&a===q)&&(g=W,w-=b[M]-n.width,w*=l?1:-1)}var $=Object.assign({position:i},s&&bt);if(l){var S;return Object.assign({},$,(S={},S[x]=y?"0":"",S[g]=v?"0":"",S.transform=(O.devicePixelRatio||1)<=1?"translate("+w+"px, "+m+"px)":"translate3d("+w+"px, "+m+"px, 0)",S))}return Object.assign({},$,(t={},t[x]=y?m+"px":"",t[g]=v?w+"px":"",t.transform="",t))}function xt(e){var t=e.state,o=e.options,n=o.gpuAcceleration,r=n===void 0?!0:n,a=o.adaptive,u=a===void 0?!0:a,i=o.roundOffsets,l=i===void 0?!0:i,s={placement:ee(t.placement),variation:de(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,he(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,he(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Ot={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xt,data:{}};function Et(e){var t=e.state;Object.keys(t.elements).forEach(function(o){var n=t.styles[o]||{},r=t.attributes[o]||{},a=t.elements[o];!C(a)||!j(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(u){var i=r[u];i===!1?a.removeAttribute(u):a.setAttribute(u,i===!0?"":i)}))})}function Ct(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach(function(n){var r=t.elements[n],a=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:o[n]),i=u.reduce(function(l,s){return l[s]="",l},{});!C(r)||!j(r)||(Object.assign(r.style,i),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}}var kt={name:"applyStyles",enabled:!0,phase:"write",fn:Et,effect:Ct,requires:["computeStyles"]},jt=[ht,yt,Ot,kt],Pt=mt({defaultModifiers:jt});function St(e,t,o){var n=ee(e),r=[T,R].indexOf(n)>=0?-1:1,a=typeof o=="function"?o(Object.assign({},t,{placement:e})):o,u=a[0],i=a[1];return u=u||0,i=(i||0)*r,[T,W].indexOf(n)>=0?{x:i,y:u}:{x:u,y:i}}function At(e){var t=e.state,o=e.options,n=e.name,r=o.offset,a=r===void 0?[0,0]:r,u=Ke.reduce(function(c,p){return c[p]=St(p,t.rects,a),c},{}),i=u[t.placement],l=i.x,s=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=s),t.modifiersData[n]=u}var Tt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:At};const[Dt,D]=we("popover"),Lt=["show","overlay","duration","teleport","overlayStyle","overlayClass","closeOnClickOverlay"],Mt={show:Boolean,theme:J("light"),overlay:Boolean,actions:xe(),trigger:J("click"),duration:Oe,showArrow:_,placement:J("bottom"),iconPrefix:String,overlayClass:Ee,overlayStyle:Object,closeOnClickAction:_,closeOnClickOverlay:_,closeOnClickOutside:_,offset:{type:Array,default:()=>[0,8]},teleport:{type:[String,Object],default:"body"}};var Rt=ne({name:Dt,props:Mt,emits:["select","touchstart","update:show"],setup(e,{emit:t,slots:o,attrs:n}){let r;const a=F(),u=F(),i=()=>a.value&&u.value?Pt(a.value,u.value.popupRef.value,{placement:e.placement,modifiers:[{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},be({},Tt,{options:{offset:e.offset}})]}):null,l=()=>{De(()=>{!e.show||(r?r.setOptions({placement:e.placement}):r=i())})},s=m=>t("update:show",m),c=()=>{e.trigger==="click"&&s(!e.show)},p=m=>{m.stopPropagation(),t("touchstart",m)},k=(m,v)=>{m.disabled||(t("select",m,v),e.closeOnClickAction&&s(!1))},w=()=>{e.closeOnClickOutside&&(!e.overlay||e.closeOnClickOverlay)&&s(!1)},L=(m,v)=>{const{icon:y,text:g,color:x,disabled:O,className:b}=m;return d("div",{role:"menuitem",class:[D("action",{disabled:O,"with-icon":y}),b],style:{color:x},onClick:()=>k(m,v)},[y&&d(je,{name:y,classPrefix:e.iconPrefix,class:D("action-icon")},null),d("div",{class:[D("action-text"),ke]},[g])])};return Pe(l),Se(()=>{r&&(r.destroy(),r=null)}),Ae(()=>[e.show,e.placement],l),Re(a,w,{eventName:"touchstart"}),()=>{var m;return d(K,null,[d("span",{ref:a,class:D("wrapper"),onClick:c},[(m=o.reference)==null?void 0:m.call(o)]),d(oe,Te({ref:u,class:D([e.theme]),position:"",transition:"van-popover-zoom",lockScroll:!1,onTouchstart:p,"onUpdate:show":s},n,ye(e,Lt)),{default:()=>[e.showArrow&&d("div",{class:D("arrow")},null),d("div",{role:"menu",class:D("content")},[o.default?o.default():e.actions.map(L)])]})])}}});const B=Ce(Rt);const Bt={class:"demo-popover-box"},Ft=ie("div",{class:"demo-popover-refer"},null,-1),mo=ne({setup(e){const t=ge({"zh-CN":{actions:[{text:"\u9009\u9879\u4E00"},{text:"\u9009\u9879\u4E8C"},{text:"\u9009\u9879\u4E09"}],shortActions:[{text:"\u9009\u9879\u4E00"},{text:"\u9009\u9879\u4E8C"}],actionsWithIcon:[{text:"\u9009\u9879\u4E00",icon:"add-o"},{text:"\u9009\u9879\u4E8C",icon:"music-o"},{text:"\u9009\u9879\u4E09",icon:"more-o"}],actionsDisabled:[{text:"\u9009\u9879\u4E00",disabled:!0},{text:"\u9009\u9879\u4E8C",disabled:!0},{text:"\u9009\u9879\u4E09"}],showIcon:"\u5C55\u793A\u56FE\u6807",placement:"\u5F39\u51FA\u4F4D\u7F6E",darkTheme:"\u6DF1\u8272\u98CE\u683C",lightTheme:"\u6D45\u8272\u98CE\u683C",showPopover:"\u70B9\u51FB\u5F39\u51FA\u6C14\u6CE1",actionOptions:"\u9009\u9879\u914D\u7F6E",customContent:"\u81EA\u5B9A\u4E49\u5185\u5BB9",disableAction:"\u7981\u7528\u9009\u9879",choosePlacement:"\u9009\u62E9\u5F39\u51FA\u4F4D\u7F6E"},"en-US":{actions:[{text:"Option 1"},{text:"Option 2"},{text:"Option 3"}],shortActions:[{text:"Option 1"},{text:"Option 2"}],actionsWithIcon:[{text:"Option 1",icon:"add-o"},{text:"Option 2",icon:"music-o"},{text:"Option 3",icon:"more-o"}],actionsDisabled:[{text:"Option 1",disabled:!0},{text:"Option 2",disabled:!0},{text:"Option 3"}],showIcon:"Show Icon",placement:"Placement",darkTheme:"Dark Theme",lightTheme:"Light Theme",showPopover:"Show Popover",actionOptions:"Action Options",customContent:"Custom Content",disableAction:"Disable Action",choosePlacement:"Placement"}}),o=["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],n=F({showIcon:!1,placement:!1,darkTheme:!1,lightTheme:!1,customContent:!1,disableAction:!1}),r=F(!1),a=F("top"),u=l=>{setTimeout(()=>{n.value.placement=!0,a.value=l})},i=l=>Ue(l.text);return(l,s)=>{const c=Le("demo-block");return re(),ae(K,null,[d(c,{title:f(t)("basicUsage")},{default:h(()=>[d(f(B),{show:n.value.lightTheme,"onUpdate:show":s[0]||(s[0]=p=>n.value.lightTheme=p),actions:f(t)("actions"),placement:"bottom-start",onSelect:i},{reference:h(()=>[d(f(U),{type:"primary"},{default:h(()=>[I(N(f(t)("lightTheme")),1)]),_:1})]),_:1},8,["show","actions"]),d(f(B),{show:n.value.darkTheme,"onUpdate:show":s[1]||(s[1]=p=>n.value.darkTheme=p),theme:"dark",actions:f(t)("actions"),onSelect:i},{reference:h(()=>[d(f(U),{type:"primary"},{default:h(()=>[I(N(f(t)("darkTheme")),1)]),_:1})]),_:1},8,["show","actions"])]),_:1},8,["title"]),d(c,{title:f(t)("placement")},{default:h(()=>[d(f(Be),{"is-link":"",readonly:"",name:"picker",label:f(t)("choosePlacement"),onClick:s[2]||(s[2]=p=>r.value=!0)},null,8,["label"]),d(f(oe),{show:r.value,"onUpdate:show":s[4]||(s[4]=p=>r.value=p),round:"",position:"bottom",teleport:"body"},{default:h(()=>[ie("div",Bt,[d(f(B),{show:n.value.placement,"onUpdate:show":s[3]||(s[3]=p=>n.value.placement=p),theme:"dark",actions:f(t)("shortActions"),placement:a.value,onSelect:i},{reference:h(()=>[Ft]),_:1},8,["show","actions","placement"])]),d(f(Fe),{columns:o,"show-toolbar":!1,onChange:u})]),_:1},8,["show"])]),_:1},8,["title"]),d(c,{title:f(t)("actionOptions")},{default:h(()=>[d(f(B),{show:n.value.showIcon,"onUpdate:show":s[5]||(s[5]=p=>n.value.showIcon=p),actions:f(t)("actionsWithIcon"),placement:"bottom-start",onSelect:i},{reference:h(()=>[d(f(U),{type:"primary"},{default:h(()=>[I(N(f(t)("showIcon")),1)]),_:1})]),_:1},8,["show","actions"]),d(f(B),{show:n.value.disableAction,"onUpdate:show":s[6]||(s[6]=p=>n.value.disableAction=p),actions:f(t)("actionsDisabled"),onSelect:i},{reference:h(()=>[d(f(U),{type:"primary"},{default:h(()=>[I(N(f(t)("disableAction")),1)]),_:1})]),_:1},8,["show","actions"])]),_:1},8,["title"]),d(c,{title:f(t)("customContent")},{default:h(()=>[d(f(B),{show:n.value.customContent,"onUpdate:show":s[8]||(s[8]=p=>n.value.customContent=p),placement:"top-start",onSelect:i},{reference:h(()=>[d(f(U),{type:"primary"},{default:h(()=>[I(N(f(t)("customContent")),1)]),_:1})]),default:h(()=>[d(f(Ie),{square:"",clickable:"",border:!1,"column-num":"3",style:{width:"240px"}},{default:h(()=>[(re(),ae(K,null,Me(6,p=>d(f(Ne),{key:p,icon:"photo-o",text:f(t)("option"),onClick:s[7]||(s[7]=k=>n.value.customContent=!1)},null,8,["text"])),64))]),_:1})]),_:1},8,["show"])]),_:1},8,["title"])],64)}}});export{mo as default};
