import{G as ve,E as me,c as N,n as x,t as O,i as M,D as ge,r as he,m as ye,s as z,H as Te,g as U,y as Se,I as X,J as we,K as Ce,e as xe,u as Ie}from"./use-translate.39547e32.js";import{w as Y}from"./with-install.cc9696bc.js";import{z as E,C as w,e as m,A as J,D as j,x as I,G as Be,E as je,q as k,P as ke,I as Re,M as pe,L as Ae,k as Pe,v as $e}from"./vue-libs.71fdcafc.js";import{a as Ne,r as Oe}from"./use-route.913efdd2.js";import{S as ze,u as Ee,a as Le}from"./index.51c98a99.js";import{u as _e}from"./useParent.e4fd6deb.js";import{d as De}from"./constant.4d85ecb9.js";import{c as He}from"./interceptor.33314343.js";import{r as V}from"./utils.39620306.js";import{u as Me}from"./use-refs.6c094865.js";import{u as Ve}from"./use-expose.877c018b.js";import{o as We}from"./on-popup-reopen.d7054786.js";import{S as Ze}from"./index.5645eda4.js";import{B as qe}from"./index.5e447543.js";import{u as Fe}from"./index.c1e8d10d.js";import{u as Ke}from"./useChildren.edf9a3d1.js";import{o as Ge,u as Ue}from"./index.92de2fdc.js";function Xe(e,o,a){let i=0;const d=e.scrollLeft,u=a===0?1:Math.round(a*1e3/16);function f(){e.scrollLeft+=(o-d)/u,++i<u&&V(f)}f()}function Ye(e,o,a,i){let d=ve(e);const u=d<o,f=a===0?1:Math.round(a*1e3/16),c=(o-d)/f;function r(){d+=c,(u&&d>o||!u&&d<o)&&(d=o),me(e,d),u&&d<o||!u&&d>o?V(r):i&&V(i)}r()}function Je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!J(e)}const[Qe,Q]=N("tab");var et=E({name:Qe,props:{dot:Boolean,type:String,color:String,title:String,badge:x,isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:O},setup(e){const o=w(()=>{const i={},{type:d,color:u,disabled:f,isActive:c,activeColor:r,inactiveColor:B}=e;u&&d==="card"&&(i.borderColor=u,f||(c?i.backgroundColor=u:i.color=u));const y=c?r:B;return y&&(i.color=y),i}),a=()=>{const i=m("span",{class:Q("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||M(e.badge)&&e.badge!==""?m(qe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},Je(i)?i:{default:()=>[i]}):i};return()=>m("div",{role:"tab",class:[Q({active:e.isActive,disabled:e.disabled})],style:o.value,"aria-selected":e.isActive},[a()])}});function tt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!J(e)}const[nt,ee]=N("tabs");var at=E({name:nt,props:{inited:Boolean,animated:Boolean,swipeable:Boolean,lazyRender:Boolean,count:{type:Number,required:!0},duration:{type:x,required:!0},currentIndex:{type:Number,required:!0}},emits:["change"],setup(e,{emit:o,slots:a}){const i=j(),d=c=>o("change",c),u=()=>{var r;const c=(r=a.default)==null?void 0:r.call(a);return e.animated||e.swipeable?m(ze,{ref:i,loop:!1,class:ee("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},tt(c)?c:{default:()=>[c]}):c},f=c=>{const r=i.value;r&&r.state.active!==c&&r.swipeTo(c,{immediate:!e.inited})};return I(()=>e.currentIndex,f),Be(()=>{f(e.currentIndex)}),()=>m("div",{class:ee("content",{animated:e.animated||e.swipeable})},[u()])}});const[te,L]=N("tabs"),ot={type:ye("line"),color:String,border:Boolean,sticky:Boolean,active:z(0),duration:z(.3),animated:Boolean,ellipsis:O,swipeable:Boolean,scrollspy:Boolean,offsetTop:z(0),background:String,lazyRender:O,lineWidth:x,lineHeight:x,beforeChange:Function,swipeThreshold:z(5),titleActiveColor:String,titleInactiveColor:String},ne=Symbol(te);var it=E({name:te,props:ot,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:a}){let i,d,u;const f=j(),c=j(),r=j(),B=Ee(),h=Fe(f),[y,_]=Me(),{children:b,linkChildren:D}=Ke(ne),s=je({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=w(()=>b.length>e.swipeThreshold||!e.ellipsis),oe=w(()=>({borderColor:e.color,background:e.background})),R=(t,n)=>{var l;return(l=t.name)!=null?l:n},Z=w(()=>{const t=b[s.currentIndex];if(t)return R(t,s.currentIndex)}),H=w(()=>ge(e.offsetTop)),q=w(()=>e.sticky?H.value+i:0),p=t=>{const n=c.value,l=y.value;if(!T.value||!n||!l||!l[s.currentIndex])return;const v=l[s.currentIndex].$el,g=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Xe(n,g,t?0:+e.duration)},S=()=>{const t=s.inited;k(()=>{const n=y.value;if(!n||!n[s.currentIndex]||e.type!=="line"||Te(f.value))return;const l=n[s.currentIndex].$el,{lineWidth:v,lineHeight:g}=e,C=l.offsetLeft+l.offsetWidth/2,$={width:U(v),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&($.transitionDuration=`${e.duration}s`),M(g)){const G=U(g);$.height=G,$.borderRadius=G}s.lineStyle=$})},ie=t=>{const n=t<s.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=n}},A=t=>{const n=ie(t);if(!M(n))return;const l=b[n],v=R(l,n),g=s.currentIndex!==null;s.currentIndex=n,v!==e.active&&(o("update:active",v),g&&o("change",v,l.title))},P=t=>{const n=b.find((v,g)=>R(v,g)===t),l=n?b.indexOf(n):0;A(l)},F=(t=!1)=>{if(e.scrollspy){const n=b[s.currentIndex].$el;if(n&&h.value){const l=X(n,h.value)-q.value;d=!0,Ye(h.value,l,t?0:+e.duration,()=>{d=!1})}}},re=(t,n,l)=>{const{title:v,disabled:g}=b[n],C=R(b[n],n);o("click-tab",{name:C,title:v,event:l,disabled:g}),g?o("disabled",C,v):(He({interceptor:e.beforeChange,args:[C],done:()=>{A(n),F()}}),o("click",C,v),Ne(t))},le=t=>{u=t.isFixed,o("scroll",t)},ce=t=>{k(()=>{P(t),F(!0)})},se=()=>{for(let t=0;t<b.length;t++)if(Ce(b[t].$el)>q.value)return t===0?0:t-1;return b.length-1},de=()=>{if(e.scrollspy&&!d){const t=se();A(t)}},ue=()=>b.map((t,n)=>m(et,Re({ref:_(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===s.currentIndex,scrollable:T.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:l=>{re(t,n,l)}},he(t,["dot","badge","title","disabled","showZeroBadge"])),null)),K=()=>{var l,v;const{type:t,border:n}=e;return m("div",{ref:r,class:[L("wrap",{scrollable:T.value}),{[De]:t==="line"&&n}]},[m("div",{ref:c,role:"tablist",class:L("nav",[t,{complete:T.value}]),style:oe.value},[(l=a["nav-left"])==null?void 0:l.call(a),ue(),t==="line"&&m("div",{class:L("line"),style:s.lineStyle},null),(v=a["nav-right"])==null?void 0:v.call(a)])])};I([()=>e.color,B.width],S),I(()=>e.active,t=>{t!==Z.value&&P(t)}),I(()=>b.length,()=>{s.inited&&(P(e.active),S(),k(()=>{p(!0)}))}),I(()=>s.currentIndex,()=>{p(),S(),u&&!e.scrollspy&&Se(Math.ceil(X(f.value)-H.value))});const fe=()=>{P(e.active),k(()=>{s.inited=!0,i=we(r.value),p(!0)})},be=(t,n)=>o("rendered",t,n);return Ve({resize:S,scrollTo:ce}),ke(S),We(S),Ge(fe),Ue("scroll",de,{target:h}),D({props:e,setLine:S,onRendered:be,currentName:Z,scrollIntoView:p}),()=>{var t;return m("div",{ref:f,class:L([e.type])},[e.sticky?m(Ze,{container:f.value,offsetTop:H.value,onScroll:le},{default:()=>{var n;return[K(),(n=a["nav-bottom"])==null?void 0:n.call(a)]}}):[K(),(t=a["nav-bottom"])==null?void 0:t.call(a)],m(at,{count:b.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:A},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}}});const ae=Symbol(),Bt=()=>pe(ae,null),[rt,W]=N("tab");var lt=E({name:rt,props:xe({},Oe,{dot:Boolean,name:x,badge:x,title:String,disabled:Boolean,titleClass:Ie,titleStyle:[String,Object],showZeroBadge:O}),setup(e,{slots:o}){const a=j(!1),{parent:i,index:d}=_e(ne);if(!i)return;const u=()=>{var r;return(r=e.name)!=null?r:d.value},f=()=>{a.value=!0,i.props.lazyRender&&k(()=>{i.onRendered(u(),e.title)})},c=w(()=>{const r=u()===i.currentName.value;return r&&!a.value&&f(),r});return I(()=>e.title,()=>{i.setLine(),i.scrollIntoView()}),Ae(ae,c),()=>{var s;const{animated:r,swipeable:B,scrollspy:h,lazyRender:y}=i.props;if(!o.default&&!r)return;const _=h||c.value;if(r||B)return m(Le,{role:"tabpanel","aria-hidden":!c.value,class:W("pane-wrapper",{inactive:!c.value})},{default:()=>{var T;return[m("div",{class:W("pane")},[(T=o.default)==null?void 0:T.call(o)])]}});const D=a.value||h||!y?(s=o.default)==null?void 0:s.call(o):null;return Pe(m("div",{role:"tabpanel",class:W("pane")},[D]),[[$e,_]])}}});const jt=Y(lt),kt=Y(it);export{kt as T,jt as a,Bt as u};
