import{D as e,B as t,c as r,t as a,i as n,A as l,o,E as i,g as s,v as c,F as d,G as u,H as p,e as v,u as f}from"./use-translate.91889477.js";import{w as b}from"./with-install.c9eedd0e.js";import{z as m,C as g,e as y,A as h,D as S,x,G as w,E as j,q as C,P as I,I as B,M as k,L as N,k as T,v as R}from"./vue-libs.71fdcafc.js";import{a as z,r as A}from"./use-route.913efdd2.js";import{S as L,u as $,a as O}from"./index.0a6905cd.js";import{u as W}from"./useParent.e4fd6deb.js";import{d as Z}from"./constant.4d85ecb9.js";import{c as q}from"./interceptor.fd551ac3.js";import{r as F}from"./utils.b0356070.js";import{u as M}from"./use-refs.6c094865.js";import{u as D}from"./use-expose.5ea79906.js";import{o as H}from"./on-popup-reopen.d7054786.js";import{S as E}from"./index.2b3be213.js";import{B as G}from"./index.d38d9435.js";import{u as P}from"./index.9e2e36ca.js";import{u as V}from"./useChildren.edf9a3d1.js";import{o as X,u as J}from"./index.94f7437a.js";const[K,Q]=r("tab");var U=m({name:K,props:{dot:Boolean,type:String,color:String,title:String,badge:[Number,String],isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:a},setup(e){const t=g((()=>{const t={},{type:r,color:a,disabled:n,isActive:l,activeColor:o,inactiveColor:i}=e;a&&"card"===r&&(t.borderColor=a,n||(l?t.backgroundColor=a:t.color=a));const s=l?o:i;return s&&(t.color=s),t})),r=()=>{const t=y("span",{class:Q("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||n(e.badge)&&""!==e.badge?y(G,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},"function"==typeof(r=t)||"[object Object]"===Object.prototype.toString.call(r)&&!h(r)?t:{default:()=>[t]}):t;var r};return()=>y("div",{role:"tab",class:[Q({active:e.isActive,disabled:e.disabled})],style:t.value,"aria-selected":e.isActive},[r()])}});const[Y,_]=r("tabs");var ee=m({name:Y,props:{inited:Boolean,animated:Boolean,swipeable:Boolean,lazyRender:Boolean,count:{type:Number,required:!0},duration:{type:[Number,String],required:!0},currentIndex:{type:Number,required:!0}},emits:["change"],setup(e,{emit:t,slots:r}){const a=S(),n=e=>t("change",e),l=()=>{var t;const l=null==(t=r.default)?void 0:t.call(r);return e.animated||e.swipeable?y(L,{ref:a,loop:!1,class:_("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},"function"==typeof(o=l)||"[object Object]"===Object.prototype.toString.call(o)&&!h(o)?l:{default:()=>[l]}):l;var o},o=t=>{const r=a.value;r&&r.state.active!==t&&r.swipeTo(t,{immediate:!e.inited})};return x((()=>e.currentIndex),o),w((()=>{o(e.currentIndex)})),()=>y("div",{class:_("content",{animated:e.animated||e.swipeable})},[l()])}});const[te,re]=r("tabs"),ae={color:String,border:Boolean,sticky:Boolean,animated:Boolean,ellipsis:a,swipeable:Boolean,scrollspy:Boolean,background:String,lazyRender:a,lineWidth:[Number,String],lineHeight:[Number,String],beforeChange:Function,titleActiveColor:String,titleInactiveColor:String,type:{type:String,default:"line"},active:{type:[Number,String],default:0},duration:{type:[Number,String],default:.3},offsetTop:{type:[Number,String],default:0},swipeThreshold:{type:[Number,String],default:5}},ne=Symbol(te);var le=m({name:te,props:ae,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(r,{emit:a,slots:v}){let f,b,m;const h=S(),w=S(),k=S(),N=$(),T=P(h),[R,A]=M(),{children:L,linkChildren:O}=V(ne),W=j({inited:!1,position:"",lineStyle:{},currentIndex:-1}),G=g((()=>L.length>r.swipeThreshold||!r.ellipsis)),K=g((()=>({borderColor:r.color,background:r.background}))),Q=(e,t)=>{var r;return null!=(r=e.name)?r:t},Y=g((()=>{const e=L[W.currentIndex];if(e)return Q(e,W.currentIndex)})),_=g((()=>l(r.offsetTop))),te=g((()=>r.sticky?_.value+f:0)),ae=e=>{const t=w.value,a=R.value;if(!(G.value&&t&&a&&a[W.currentIndex]))return;const n=a[W.currentIndex].$el;!function(e,t,r){let a=0;const n=e.scrollLeft,l=0===r?1:Math.round(1e3*r/16);!function r(){e.scrollLeft+=(t-n)/l,++a<l&&F(r)}()}(t,n.offsetLeft-(t.offsetWidth-n.offsetWidth)/2,e?0:+r.duration)},le=()=>{const e=W.inited;C((()=>{const t=R.value;if(!t||!t[W.currentIndex]||"line"!==r.type||i(h.value))return;const a=t[W.currentIndex].$el,{lineWidth:l,lineHeight:o}=r,c=a.offsetLeft+a.offsetWidth/2,d={width:s(l),backgroundColor:r.color,transform:`translateX(${c}px) translateX(-50%)`};if(e&&(d.transitionDuration=`${r.duration}s`),n(o)){const e=s(o);d.height=e,d.borderRadius=e}W.lineStyle=d}))},oe=e=>{const t=(e=>{const t=e<W.currentIndex?-1:1;for(;e>=0&&e<L.length;){if(!L[e].disabled)return e;e+=t}})(e);if(!n(t))return;const l=L[t],o=Q(l,t),i=null!==W.currentIndex;W.currentIndex=t,o!==r.active&&(a("update:active",o),i&&a("change",o,l.title))},ie=e=>{const t=L.find(((t,r)=>Q(t,r)===e)),r=t?L.indexOf(t):0;oe(r)},se=(a=!1)=>{if(r.scrollspy){const n=L[W.currentIndex].$el;if(n&&T.value){const l=d(n,T.value)-te.value;b=!0,function(r,a,n,l){let o=e(r);const i=o<a,s=0===n?1:Math.round(1e3*n/16),c=(a-o)/s;!function e(){o+=c,(i&&o>a||!i&&o<a)&&(o=a),t(r,o),i&&o<a||!i&&o>a?F(e):l&&F(l)}()}(T.value,l,a?0:+r.duration,(()=>{b=!1}))}}},ce=e=>{m=e.isFixed,a("scroll",e)},de=()=>L.map(((e,t)=>y(U,B({ref:A(t),type:r.type,color:r.color,style:e.titleStyle,class:e.titleClass,isActive:t===W.currentIndex,scrollable:G.value,renderTitle:e.$slots.title,activeColor:r.titleActiveColor,inactiveColor:r.titleInactiveColor,onClick:n=>{((e,t,n)=>{const{title:l,disabled:o}=L[t],i=Q(L[t],t);a("click-tab",{name:i,title:l,event:n,disabled:o}),o?a("disabled",i,l):(q({interceptor:r.beforeChange,args:[i],done:()=>{oe(t),se()}}),a("click",i,l),z(e))})(e,t,n)}},o(e,["dot","badge","title","disabled","showZeroBadge"])),null))),ue=()=>{var e,t;const{type:a,border:n}=r;return y("div",{ref:k,class:[re("wrap",{scrollable:G.value}),{[Z]:"line"===a&&n}]},[y("div",{ref:w,role:"tablist",class:re("nav",[a,{complete:G.value}]),style:K.value},[null==(e=v["nav-left"])?void 0:e.call(v),de(),"line"===a&&y("div",{class:re("line"),style:W.lineStyle},null),null==(t=v["nav-right"])?void 0:t.call(v)])])};x([()=>r.color,N.width],le),x((()=>r.active),(e=>{e!==Y.value&&ie(e)})),x((()=>L.length),(()=>{W.inited&&(ie(r.active),le(),C((()=>{ae(!0)})))})),x((()=>W.currentIndex),(()=>{ae(),le(),m&&!r.scrollspy&&c(Math.ceil(d(h.value)-_.value))}));return D({resize:le,scrollTo:e=>{C((()=>{ie(e),se(!0)}))}}),I(le),H(le),X((()=>{ie(r.active),C((()=>{W.inited=!0,f=u(k.value),ae(!0)}))})),J("scroll",(()=>{if(r.scrollspy&&!b){const e=(()=>{for(let e=0;e<L.length;e++)if(p(L[e].$el)>te.value)return 0===e?0:e-1;return L.length-1})();oe(e)}}),{target:T}),O({props:r,setLine:le,onRendered:(e,t)=>a("rendered",e,t),currentName:Y,scrollIntoView:ae}),()=>{var e;return y("div",{ref:h,class:re([r.type])},[r.sticky?y(E,{container:h.value,offsetTop:_.value,onScroll:ce},{default:()=>{var e;return[ue(),null==(e=v["nav-bottom"])?void 0:e.call(v)]}}):[ue(),null==(e=v["nav-bottom"])?void 0:e.call(v)],y(ee,{count:L.length,inited:W.inited,animated:r.animated,duration:r.duration,swipeable:r.swipeable,lazyRender:r.lazyRender,currentIndex:W.currentIndex,onChange:oe},{default:()=>{var e;return[null==(e=v.default)?void 0:e.call(v)]}})])}}});const oe=Symbol(),ie=()=>k(oe,null),[se,ce]=r("tab");const de=b(m({name:se,props:v({},A,{dot:Boolean,name:[Number,String],badge:[Number,String],title:String,disabled:Boolean,titleClass:f,titleStyle:[String,Object],showZeroBadge:a}),setup(e,{slots:t}){const r=S(!1),{parent:a,index:n}=W(ne);if(!a)return;const l=()=>{var t;return null!=(t=e.name)?t:n.value},o=g((()=>{const t=l()===a.currentName.value;return t&&!r.value&&(r.value=!0,a.props.lazyRender&&C((()=>{a.onRendered(l(),e.title)}))),t}));return x((()=>e.title),(()=>{a.setLine(),a.scrollIntoView()})),N(oe,o),()=>{var e;const{animated:n,swipeable:l,scrollspy:i,lazyRender:s}=a.props;if(!t.default&&!n)return;const c=i||o.value;if(n||l)return y(O,{role:"tabpanel","aria-hidden":!o.value,class:ce("pane-wrapper",{inactive:!o.value})},{default:()=>{var e;return[y("div",{class:ce("pane")},[null==(e=t.default)?void 0:e.call(t)])]}});const d=r.value||i||!s?null==(e=t.default)?void 0:e.call(t):null;return T(y("div",{role:"tabpanel",class:ce("pane")},[d]),[[R,c]])}}})),ue=b(le);export{ue as T,de as a,ie as u};
