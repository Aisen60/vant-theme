import{J as Z,K as Te,H as Se,c as _,i as F,L as we,b as Ce,E as xe,M as Ie,o as Be,n as ke,p as Re,N as je,h as Y,y as $e,O as Q,G as p,e as Pe,u as Ae}from"./use-translate.5cf29aa7.js";import{n as B,t as E,d as V,m as Ne,c as M,u as Oe,w as ee}from"./with-install.28bb645f.js";import{z as H,B as C,e as m,P as te,C as R,x as k,M as ze,G as Le,q as j,J as _e,Q as Ee,D as Me,H as He,j as De,v as We}from"./vue-libs.cab43f37.js";import{u as ne}from"./use-id.af5595af.js";import{u as ae}from"./use-expose.e3e68c29.js";import{a as Ze,r as Fe}from"./use-route.1ad21ca2.js";import{S as Ve,a as Ke}from"./index.97594c1e.js";import{b as qe}from"./constant.80c6de18.js";import{c as Ge}from"./interceptor.e15676cf.js";import{u as Je}from"./use-refs.38ed045b.js";import{o as Ue}from"./on-popup-reopen.6de6ab9a.js";import{S as Xe}from"./index.fbbfcaaa.js";import{B as Ye}from"./index.71a5f3d3.js";function Qe(e,i,a){let l=0;const o=e.scrollLeft,s=a===0?1:Math.round(a*1e3/16);function b(){e.scrollLeft+=(i-o)/s,++l<s&&Z(b)}b()}function pe(e,i,a,l){let o=Te(e);const s=o<i,b=a===0?1:Math.round(a*1e3/16),u=(i-o)/b;function c(){o+=u,(s&&o>i||!s&&o<i)&&(o=i),Se(e,o),s&&o<i||!s&&o>i?Z(c):l&&Z(l)}c()}function et(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[tt,ie]=_("tab");var nt=H({name:tt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:B,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:E},setup(e){const i=C(()=>{const l={},{type:o,color:s,disabled:b,isActive:u,activeColor:c,inactiveColor:h}=e;s&&o==="card"&&(l.borderColor=s,b||(u?l.backgroundColor=s:l.color=s));const T=u?c:h;return T&&(l.color=T),l}),a=()=>{const l=m("span",{class:ie("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||F(e.badge)&&e.badge!==""?m(Ye,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},et(l)?l:{default:()=>[l]}):l};return()=>m("div",{id:e.id,role:"tab",class:[ie({active:e.isActive,disabled:e.disabled})],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[a()])}});function at(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const[it,oe]=_("tabs");var ot=H({name:it,props:{count:V(Number),inited:Boolean,animated:Boolean,duration:V(B),swipeable:Boolean,lazyRender:Boolean,currentIndex:V(Number)},emits:["change"],setup(e,{emit:i,slots:a}){const l=R(),o=u=>i("change",u),s=()=>{var c;const u=(c=a.default)==null?void 0:c.call(a);return e.animated||e.swipeable?m(Ve,{ref:l,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},at(u)?u:{default:()=>[u]}):u},b=u=>{const c=l.value;c&&c.state.active!==u&&c.swipeTo(u,{immediate:!e.inited})};return k(()=>e.currentIndex,b),ze(()=>{b(e.currentIndex)}),()=>m("div",{class:oe("content",{animated:e.animated||e.swipeable})},[s()])}});const[le,D]=_("tabs"),lt={type:Ne("line"),color:String,border:Boolean,sticky:Boolean,active:M(0),duration:M(.3),animated:Boolean,ellipsis:E,swipeable:Boolean,scrollspy:Boolean,offsetTop:M(0),background:String,lazyRender:E,lineWidth:B,lineHeight:B,beforeChange:Function,swipeThreshold:M(5),titleActiveColor:String,titleInactiveColor:String},re=Symbol(le);var rt=H({name:le,props:lt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:a}){let l,o,s;const b=R(),u=R(),c=R(),h=ne(),y=we(b),[T,$]=Je(),{children:f,linkChildren:P}=Ce(re),d=Le({inited:!1,position:"",lineStyle:{},currentIndex:-1}),x=C(()=>f.length>e.swipeThreshold||!e.ellipsis),A=C(()=>({borderColor:e.color,background:e.background})),S=(t,n)=>{var r;return(r=t.name)!=null?r:n},q=C(()=>{const t=f[d.currentIndex];if(t)return S(t,d.currentIndex)}),W=C(()=>xe(e.offsetTop)),G=C(()=>e.sticky?W.value+l:0),N=t=>{const n=u.value,r=T.value;if(!x.value||!n||!r||!r[d.currentIndex])return;const v=r[d.currentIndex].$el,g=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Qe(n,g,t?0:+e.duration)},w=()=>{const t=d.inited;j(()=>{const n=T.value;if(!n||!n[d.currentIndex]||e.type!=="line"||je(b.value))return;const r=n[d.currentIndex].$el,{lineWidth:v,lineHeight:g}=e,I=r.offsetLeft+r.offsetWidth/2,L={width:Y(v),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(t&&(L.transitionDuration=`${e.duration}s`),F(g)){const X=Y(g);L.height=X,L.borderRadius=X}d.lineStyle=L})},se=t=>{const n=t<d.currentIndex?-1:1;for(;t>=0&&t<f.length;){if(!f[t].disabled)return t;t+=n}},O=t=>{const n=se(t);if(!F(n))return;const r=f[n],v=S(r,n),g=d.currentIndex!==null;d.currentIndex=n,v!==e.active&&(i("update:active",v),g&&i("change",v,r.title))},z=t=>{const n=f.find((v,g)=>S(v,g)===t),r=n?f.indexOf(n):0;O(r)},J=(t=!1)=>{if(e.scrollspy){const n=f[d.currentIndex].$el;if(n&&y.value){const r=Q(n,y.value)-G.value;o=!0,pe(y.value,r,t?0:+e.duration,()=>{o=!1})}}},de=(t,n,r)=>{const{title:v,disabled:g}=f[n],I=S(f[n],n);g?i("disabled",I,v):(Ge(e.beforeChange,{args:[I],done:()=>{O(n),J()}}),i("click",I,v),Ze(t)),i("click-tab",{name:I,title:v,event:r,disabled:g})},ue=t=>{s=t.isFixed,i("scroll",t)},fe=t=>{j(()=>{z(t),J(!0)})},be=()=>{for(let t=0;t<f.length;t++){const{top:n}=p(f[t].$el);if(n>G.value)return t===0?0:t-1}return f.length-1},ve=()=>{if(e.scrollspy&&!o){const t=be();O(t)}},me=()=>f.map((t,n)=>m(nt,Ee({id:`${h}-${n}`,ref:$(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===d.currentIndex,controls:t.id,scrollable:x.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:r=>de(t,n,r)},Re(t,["dot","badge","title","disabled","showZeroBadge"])),null)),he=()=>{if(e.type==="line"&&f.length)return m("div",{class:D("line"),style:d.lineStyle},null)},U=()=>{var r,v;const{type:t,border:n}=e;return m("div",{ref:c,class:[D("wrap",{scrollable:x.value}),{[qe]:t==="line"&&n}]},[m("div",{ref:u,role:"tablist",class:D("nav",[t,{complete:x.value}]),style:A.value,"aria-orientation":"horizontal"},[(r=a["nav-left"])==null?void 0:r.call(a),me(),he(),(v=a["nav-right"])==null?void 0:v.call(a)])])};k([()=>e.color,Ie],w),k(()=>e.active,t=>{t!==q.value&&z(t)}),k(()=>f.length,()=>{d.inited&&(z(e.active),w(),j(()=>{N(!0)}))}),k(()=>d.currentIndex,()=>{N(),w(),s&&!e.scrollspy&&$e(Math.ceil(Q(b.value)-W.value))});const ge=()=>{z(e.active),j(()=>{d.inited=!0,c.value&&(l=p(c.value).height),N(!0)})},ye=(t,n)=>i("rendered",t,n);return ae({resize:w,scrollTo:fe}),_e(w),Ue(w),Be(ge),ke("scroll",ve,{target:y}),P({id:h,props:e,setLine:w,onRendered:ye,currentName:q,scrollIntoView:N}),()=>{var t;return m("div",{ref:b,class:D([e.type])},[e.sticky?m(Xe,{container:b.value,offsetTop:W.value,onScroll:ue},{default:()=>{var n;return[U(),(n=a["nav-bottom"])==null?void 0:n.call(a)]}}):[U(),(t=a["nav-bottom"])==null?void 0:t.call(a)],m(ot,{count:f.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:O},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}}});const ce=Symbol(),It=()=>Me(ce,null),[ct,K]=_("tab"),st=Pe({},Fe,{dot:Boolean,name:B,badge:B,title:String,disabled:Boolean,titleClass:Oe,titleStyle:[String,Object],showZeroBadge:E});var dt=H({name:ct,props:st,setup(e,{slots:i}){const a=ne(),l=R(!1),{parent:o,index:s}=Ae(re);if(!o)return;const b=()=>{var h;return(h=e.name)!=null?h:s.value},u=()=>{l.value=!0,o.props.lazyRender&&j(()=>{o.onRendered(b(),e.title)})},c=C(()=>{const h=b()===o.currentName.value;return h&&!l.value&&u(),h});return k(()=>e.title,()=>{o.setLine(),o.scrollIntoView()}),He(ce,c),()=>{var A;const h=`${o.id}-${s.value}`,{animated:y,swipeable:T,scrollspy:$,lazyRender:f}=o.props;if(!i.default&&!y)return;const P=$||c.value;if(y||T)return m(Ke,{id:a,role:"tabpanel",class:K("panel-wrapper",{inactive:!c.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":h},{default:()=>{var S;return[m("div",{class:K("panel")},[(S=i.default)==null?void 0:S.call(i)])]}});const x=l.value||$||!f?(A=i.default)==null?void 0:A.call(i):null;return ae({id:a}),De(m("div",{id:a,role:"tabpanel",class:K("panel"),tabindex:P?0:-1,"aria-labelledby":h},[x]),[[We,P]])}}});const Bt=ee(dt),kt=ee(rt);export{kt as T,Bt as a,It as u};
