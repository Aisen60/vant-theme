import{c as I,b as _,M as R,i as $,W as H,n as G,G as K,u as L,t as Y,a as Z}from"./use-translate.43484c14.js";import{t as E,n as q,c as J,m as Q,w as U,b as X,u as z}from"./with-install.d47ea1a2.js";import{H as ee}from"./constant.80c6de18.js";import{z as T,C as V,B as D,e as o,G as te,j as oe,v as le,P as ne,R as ae,r as ue,o as se,a as ie,w as d,A as t,d as re,h as de,t as ce,F as pe}from"./vue-libs.f710b8ed.js";import{u as me}from"./use-expose.f4ec549a.js";import{C as S}from"./index.f669a479.js";import{I as ve}from"./index.2cac46c1.js";import{P as fe}from"./index.26ad4b0e.js";import{S as F}from"./index.e8ab8b03.js";import{B as Ce}from"./index.fbdfcd01.js";import"./use-route.600bd02b.js";import"./interceptor.bbea64df.js";import"./use-touch.8e5a0907.js";import"./use-lazy-render.c4d421a8.js";import"./on-popup-reopen.4b166a39.js";import"./index.bd0fe4b9.js";import"./index.da11a5bc.js";const[M,j]=I("dropdown-menu"),we={overlay:E,zIndex:q,duration:J(.2),direction:Q("down"),activeColor:String,closeOnClickOutside:E,closeOnClickOverlay:E},N=Symbol(M);var be=T({name:M,props:we,setup(a,{slots:u}){const c=V(),s=V(),m=V(0),{children:i,linkChildren:p}=_(N),w=R(c),f=D(()=>i.some(e=>e.state.showWrapper)),P=D(()=>{if(f.value&&$(a.zIndex))return{zIndex:+a.zIndex+1}}),g=()=>{a.closeOnClickOutside&&i.forEach(e=>{e.toggle(!1)})},n=()=>{if(s.value){const e=K(s);a.direction==="down"?m.value=e.bottom:m.value=window.innerHeight-e.top}},b=()=>{f.value&&n()},l=e=>{i.forEach((r,v)=>{v===e?(n(),r.toggle()):r.state.showPopup&&r.toggle(!1,{immediate:!0})})},O=(e,r)=>{const{showPopup:v}=e.state,{disabled:x,titleClass:y}=e;return o("div",{role:"button",tabindex:x?-1:0,class:[j("item",{disabled:x}),{[ee]:!x}],onClick:()=>{x||l(r)}},[o("span",{class:[j("title",{down:v===(a.direction==="down"),active:v}),y],style:{color:v?a.activeColor:""}},[o("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return p({props:a,offset:m}),H(c,g),G("scroll",b,{target:w}),()=>{var e;return o("div",{ref:c,class:j()},[o("div",{ref:s,style:P.value,class:j("bar",{opened:f.value})},[i.map(O)]),(e=u.default)==null?void 0:e.call(u)])}}});const h=U(be);function xe(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!ne(a)}const[Ve,B]=I("dropdown-item"),ge={title:String,options:X(),disabled:Boolean,teleport:[String,Object],lazyRender:E,modelValue:z,titleClass:z};var ye=T({name:Ve,props:ge,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:u,slots:c}){const s=te({showPopup:!1,transition:!0,showWrapper:!1}),{parent:m}=L(N);if(!m)return;const i=e=>()=>u(e),p=i("open"),w=i("close"),f=i("opened"),P=()=>{s.showWrapper=!1,u("closed")},g=e=>{a.teleport&&e.stopPropagation()},n=(e=!s.showPopup,r={})=>{e!==s.showPopup&&(s.showPopup=e,s.transition=!r.immediate,e&&(s.showWrapper=!0))},b=()=>{if(c.title)return c.title();if(a.title)return a.title;const e=a.options.find(r=>r.value===a.modelValue);return e?e.text:""},l=e=>{const{activeColor:r}=m.props,v=e.value===a.modelValue,x=()=>{s.showPopup=!1,e.value!==a.modelValue&&(u("update:modelValue",e.value),u("change",e.value))},y=()=>{if(v)return o(ve,{class:B("icon"),color:r,name:"success"},null)};return o(S,{clickable:!0,key:e.value,icon:e.icon,title:e.text,class:B("option",{active:v}),style:{color:v?r:""},onClick:x},{value:y})},O=()=>{const{offset:e}=m,{zIndex:r,overlay:v,duration:x,direction:y,closeOnClickOverlay:W}=m.props,A=Y(r);return y==="down"?A.top=`${e.value}px`:A.bottom=`${e.value}px`,oe(o("div",{style:A,class:B([y]),onClick:g},[o(fe,{show:s.showPopup,"onUpdate:show":k=>s.showPopup=k,class:B("content"),overlay:v,position:y==="down"?"top":"bottom",duration:s.transition?x:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:W,onOpen:p,onClose:w,onOpened:f,onClosed:P},{default:()=>{var k;return[a.options.map(l),(k=c.default)==null?void 0:k.call(c)]}})]),[[le,s.showWrapper]])};return me({state:s,toggle:n,renderTitle:b}),()=>{if(a.teleport){let e;return o(ae,{to:a.teleport},xe(e=O())?e:{default:()=>[e]})}return O()}}});const C=U(ye),Oe={style:{padding:"5px 16px"}},_e=T({setup(a){const u=Z({"zh-CN":{disableMenu:"\u7981\u7528\u83DC\u5355",switchTitle1:"\u5305\u90AE",switchTitle2:"\u56E2\u8D2D",itemTitle:"\u7B5B\u9009",expandDirection:"\u5411\u4E0A\u5C55\u5F00",customContent:"\u81EA\u5B9A\u4E49\u83DC\u5355\u5185\u5BB9",customActiveColor:"\u81EA\u5B9A\u4E49\u9009\u4E2D\u6001\u989C\u8272",option1:[{text:"\u5168\u90E8\u5546\u54C1",value:0},{text:"\u65B0\u6B3E\u5546\u54C1",value:1},{text:"\u6D3B\u52A8\u5546\u54C1",value:2}],option2:[{text:"\u9ED8\u8BA4\u6392\u5E8F",value:"a"},{text:"\u597D\u8BC4\u6392\u5E8F",value:"b"},{text:"\u9500\u91CF\u6392\u5E8F",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),c=V(),s=V(!0),m=V(!1),i=V(0),p=V("a"),w=D(()=>u("option1")),f=D(()=>u("option2")),P=()=>{var g;(g=c.value)==null||g.toggle()};return(g,n)=>{const b=ue("demo-block");return se(),ie(pe,null,[o(b,{title:t(u)("basicUsage")},{default:d(()=>[o(t(h),null,{default:d(()=>[o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=l=>i.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=l=>p.value=l),options:t(f)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(b,{title:t(u)("customContent")},{default:d(()=>[o(t(h),null,{default:d(()=>[o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=l=>i.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{title:t(u)("itemTitle"),ref:(l,O)=>{O.item=l,c.value=l}},{default:d(()=>[o(t(S),{center:"",title:t(u)("switchTitle1")},{"right-icon":d(()=>[o(t(F),{modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=l=>s.value=l),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])]),_:1},8,["title"]),o(t(S),{center:"",title:t(u)("switchTitle2")},{"right-icon":d(()=>[o(t(F),{modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=l=>m.value=l),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])]),_:1},8,["title"]),re("div",Oe,[o(t(Ce),{type:"danger",block:"",round:"",style:{height:"40px"},onClick:P},{default:d(()=>[de(ce(t(u)("confirm")),1)]),_:1})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title"]),o(b,{title:t(u)("customActiveColor")},{default:d(()=>[o(t(h),{"active-color":"#1989fa"},{default:d(()=>[o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[5]||(n[5]=l=>i.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:p.value,"onUpdate:modelValue":n[6]||(n[6]=l=>p.value=l),options:t(f)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(b,{title:t(u)("expandDirection")},{default:d(()=>[o(t(h),{direction:"up"},{default:d(()=>[o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[7]||(n[7]=l=>i.value=l),options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:p.value,"onUpdate:modelValue":n[8]||(n[8]=l=>p.value=l),options:t(f)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),o(b,{title:t(u)("disableMenu")},{default:d(()=>[o(t(h),null,{default:d(()=>[o(t(C),{modelValue:i.value,"onUpdate:modelValue":n[9]||(n[9]=l=>i.value=l),disabled:"",options:t(w)},null,8,["modelValue","options"]),o(t(C),{modelValue:p.value,"onUpdate:modelValue":n[10]||(n[10]=l=>p.value=l),disabled:"",options:t(f)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"])],64)}}});export{_e as default};
