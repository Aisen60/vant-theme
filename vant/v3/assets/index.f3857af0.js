import{c as Q,h as D,q as U,B as J,z as _,i as j,T as X,A as Y,m as Z}from"./use-translate.43484c14.js";import{c,t as r,n as f,w as p}from"./with-install.d47ea1a2.js";import{z as ee,C as z,B as h,x as V,e as b,j as I,v as y,Q as F,q as te}from"./vue-libs.f710b8ed.js";import{H as A}from"./constant.80c6de18.js";import{c as ne}from"./interceptor.bbea64df.js";const[ae,g]=Q("stepper"),le=200,se=600,v=(t,i)=>String(t)===String(i),ie={min:c(1),max:c(1/0),name:c(""),step:c(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:r,showMinus:r,showInput:r,longPress:r,allowEmpty:Boolean,modelValue:f,inputWidth:f,buttonSize:f,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:c(1),decimalLength:f};var ue=ee({name:ae,props:ie,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:i}){const o=e=>{const{min:n,max:s,allowEmpty:m,decimalLength:l}=t;return m&&e===""||(e=_(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+n:e,e=Math.max(Math.min(+s,e),+n),j(l)&&(e=e.toFixed(+l))),e},R=()=>{var s;const e=(s=t.modelValue)!=null?s:t.defaultValue,n=o(e);return v(n,t.modelValue)||i("update:modelValue",n),n};let u;const x=z(),a=z(R()),S=h(()=>t.disabled||t.disableMinus||a.value<=+t.min),w=h(()=>t.disabled||t.disablePlus||a.value>=+t.max),k=h(()=>({width:D(t.inputWidth),height:D(t.buttonSize)})),N=h(()=>U(t.buttonSize)),q=()=>{const e=o(a.value);v(e,a.value)||(a.value=e)},B=e=>{t.beforeChange?ne(t.beforeChange,{args:[e],done(){a.value=e}}):a.value=e},P=()=>{if(u==="plus"&&w.value||u==="minus"&&S.value){i("overlimit",u);return}const e=u==="minus"?-t.step:+t.step,n=o(X(+a.value,e));B(n),i(u)},G=e=>{const n=e.target,{value:s}=n,{decimalLength:m}=t;let l=_(String(s),!t.integer);if(j(m)&&l.includes(".")){const M=l.split(".");l=`${M[0]}.${M[1].slice(0,+m)}`}t.beforeChange?n.value=String(a.value):v(s,l)||(n.value=l);const K=l===String(+l);B(K?+l:l)},H=e=>{var n;t.disableInput?(n=x.value)==null||n.blur():i("focus",e)},O=e=>{const n=e.target,s=o(n.value);n.value=String(s),a.value=s,te(()=>{i("blur",e),Y()})};let T,d;const C=()=>{d=setTimeout(()=>{P(),C()},le)},W=()=>{t.longPress&&(T=!1,clearTimeout(d),d=setTimeout(()=>{T=!0,P(),C()},se))},E=e=>{t.longPress&&(clearTimeout(d),T&&Z(e))},$=e=>{t.disableInput&&e.preventDefault()},L=e=>({onClick:n=>{n.preventDefault(),u=e,P()},onTouchstart:()=>{u=e,W()},onTouchend:E,onTouchcancel:E});return V([()=>t.max,()=>t.min,()=>t.integer,()=>t.decimalLength],q),V(()=>t.modelValue,e=>{v(e,a.value)||(a.value=o(e))}),V(a,e=>{i("update:modelValue",e),i("change",e,{name:t.name})}),J(()=>t.modelValue),()=>b("div",{class:g([t.theme])},[I(b("button",F({type:"button",style:N.value,class:[g("minus",{disabled:S.value}),{[A]:!S.value}]},L("minus")),null),[[y,t.showMinus]]),I(b("input",{ref:x,type:t.integer?"tel":"text",role:"spinbutton",class:g("input"),value:a.value,style:k.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,"aria-valuemax":+t.max,"aria-valuemin":+t.min,"aria-valuenow":+a.value,onBlur:O,onInput:G,onFocus:H,onMousedown:$},null),[[y,t.showInput]]),I(b("button",F({type:"button",style:N.value,class:[g("plus",{disabled:w.value}),{[A]:!w.value}]},L("plus")),null),[[y,t.showPlus]])])}});const fe=p(ue);export{fe as S};
