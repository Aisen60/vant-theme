import{J as D,K as he,H as ge,c as $,i as W,L as ye,M as Te,b as Se,E as we,o as Ce,n as xe,p as Ie,N as Be,h as U,y as ke,O as X,G as Y,e as Re,u as je}from"./use-translate.aef3085b.js";import{n as x,t as z,d as Z,m as Pe,c as p,u as Ae,w as Q}from"./with-install.796b4cad.js";import{z as L,B as w,e as m,P as ee,C as k,x as I,M as Ne,G as Oe,q as R,J as $e,Q as ze,D as pe,H as Le,j as _e,v as Ee}from"./vue-libs.f710b8ed.js";import{a as Me,r as He}from"./use-route.7ce7c3ed.js";import{S as De,a as We}from"./index.3a921ec7.js";import{b as Ze}from"./constant.80c6de18.js";import{c as Fe}from"./interceptor.3dc21389.js";import{u as Ve}from"./use-refs.29822121.js";import{u as Ke}from"./use-expose.b82056d2.js";import{o as qe}from"./on-popup-reopen.4b166a39.js";import{S as Ge}from"./index.132d67d0.js";import{B as Je}from"./index.c480cbe8.js";function Ue(e,o,a){let i=0;const d=e.scrollLeft,u=a===0?1:Math.round(a*1e3/16);function f(){e.scrollLeft+=(o-d)/u,++i<u&&D(f)}f()}function Xe(e,o,a,i){let d=he(e);const u=d<o,f=a===0?1:Math.round(a*1e3/16),c=(o-d)/f;function r(){d+=c,(u&&d>o||!u&&d<o)&&(d=o),ge(e,d),u&&d<o||!u&&d>o?D(r):i&&D(i)}r()}function Ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ee(e)}const[Qe,te]=$("tab");var et=L({name:Qe,props:{dot:Boolean,type:String,color:String,title:String,badge:x,isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:z},setup(e){const o=w(()=>{const i={},{type:d,color:u,disabled:f,isActive:c,activeColor:r,inactiveColor:B}=e;u&&d==="card"&&(i.borderColor=u,f||(c?i.backgroundColor=u:i.color=u));const y=c?r:B;return y&&(i.color=y),i}),a=()=>{const i=m("span",{class:te("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||W(e.badge)&&e.badge!==""?m(Je,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},Ye(i)?i:{default:()=>[i]}):i};return()=>m("div",{role:"tab",class:[te({active:e.isActive,disabled:e.disabled})],style:o.value,"aria-selected":e.isActive},[a()])}});function tt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ee(e)}const[nt,ne]=$("tabs");var at=L({name:nt,props:{count:Z(Number),inited:Boolean,animated:Boolean,duration:Z(x),swipeable:Boolean,lazyRender:Boolean,currentIndex:Z(Number)},emits:["change"],setup(e,{emit:o,slots:a}){const i=k(),d=c=>o("change",c),u=()=>{var r;const c=(r=a.default)==null?void 0:r.call(a);return e.animated||e.swipeable?m(De,{ref:i,loop:!1,class:ne("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},tt(c)?c:{default:()=>[c]}):c},f=c=>{const r=i.value;r&&r.state.active!==c&&r.swipeTo(c,{immediate:!e.inited})};return I(()=>e.currentIndex,f),Ne(()=>{f(e.currentIndex)}),()=>m("div",{class:ne("content",{animated:e.animated||e.swipeable})},[u()])}});const[ae,_]=$("tabs"),ot={type:Pe("line"),color:String,border:Boolean,sticky:Boolean,active:p(0),duration:p(.3),animated:Boolean,ellipsis:z,swipeable:Boolean,scrollspy:Boolean,offsetTop:p(0),background:String,lazyRender:z,lineWidth:x,lineHeight:x,beforeChange:Function,swipeThreshold:p(5),titleActiveColor:String,titleInactiveColor:String},oe=Symbol(ae);var it=L({name:ae,props:ot,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:a}){let i,d,u;const f=k(),c=k(),r=k(),B=ye(),g=Te(f),[y,E]=Ve(),{children:b,linkChildren:M}=Se(oe),s=Oe({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=w(()=>b.length>e.swipeThreshold||!e.ellipsis),re=w(()=>({borderColor:e.color,background:e.background})),j=(t,n)=>{var l;return(l=t.name)!=null?l:n},V=w(()=>{const t=b[s.currentIndex];if(t)return j(t,s.currentIndex)}),H=w(()=>we(e.offsetTop)),K=w(()=>e.sticky?H.value+i:0),P=t=>{const n=c.value,l=y.value;if(!T.value||!n||!l||!l[s.currentIndex])return;const v=l[s.currentIndex].$el,h=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Ue(n,h,t?0:+e.duration)},S=()=>{const t=s.inited;R(()=>{const n=y.value;if(!n||!n[s.currentIndex]||e.type!=="line"||Be(f.value))return;const l=n[s.currentIndex].$el,{lineWidth:v,lineHeight:h}=e,C=l.offsetLeft+l.offsetWidth/2,O={width:U(v),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(O.transitionDuration=`${e.duration}s`),W(h)){const J=U(h);O.height=J,O.borderRadius=J}s.lineStyle=O})},le=t=>{const n=t<s.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=n}},A=t=>{const n=le(t);if(!W(n))return;const l=b[n],v=j(l,n),h=s.currentIndex!==null;s.currentIndex=n,v!==e.active&&(o("update:active",v),h&&o("change",v,l.title))},N=t=>{const n=b.find((v,h)=>j(v,h)===t),l=n?b.indexOf(n):0;A(l)},q=(t=!1)=>{if(e.scrollspy){const n=b[s.currentIndex].$el;if(n&&g.value){const l=X(n,g.value)-K.value;d=!0,Xe(g.value,l,t?0:+e.duration,()=>{d=!1})}}},ce=(t,n,l)=>{const{title:v,disabled:h}=b[n],C=j(b[n],n);h?o("disabled",C,v):(Fe(e.beforeChange,{args:[C],done:()=>{A(n),q()}}),o("click",C,v),Me(t)),o("click-tab",{name:C,title:v,event:l,disabled:h})},se=t=>{u=t.isFixed,o("scroll",t)},de=t=>{R(()=>{N(t),q(!0)})},ue=()=>{for(let t=0;t<b.length;t++){const{top:n}=Y(b[t].$el);if(n>K.value)return t===0?0:t-1}return b.length-1},fe=()=>{if(e.scrollspy&&!d){const t=ue();A(t)}},be=()=>b.map((t,n)=>m(et,ze({ref:E(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===s.currentIndex,scrollable:T.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:l=>ce(t,n,l)},Ie(t,["dot","badge","title","disabled","showZeroBadge"])),null)),G=()=>{var l,v;const{type:t,border:n}=e;return m("div",{ref:r,class:[_("wrap",{scrollable:T.value}),{[Ze]:t==="line"&&n}]},[m("div",{ref:c,role:"tablist",class:_("nav",[t,{complete:T.value}]),style:re.value},[(l=a["nav-left"])==null?void 0:l.call(a),be(),t==="line"&&m("div",{class:_("line"),style:s.lineStyle},null),(v=a["nav-right"])==null?void 0:v.call(a)])])};I([()=>e.color,B.width],S),I(()=>e.active,t=>{t!==V.value&&N(t)}),I(()=>b.length,()=>{s.inited&&(N(e.active),S(),R(()=>{P(!0)}))}),I(()=>s.currentIndex,()=>{P(),S(),u&&!e.scrollspy&&ke(Math.ceil(X(f.value)-H.value))});const ve=()=>{N(e.active),R(()=>{s.inited=!0,r.value&&(i=Y(r.value).height),P(!0)})},me=(t,n)=>o("rendered",t,n);return Ke({resize:S,scrollTo:de}),$e(S),qe(S),Ce(ve),xe("scroll",fe,{target:g}),M({props:e,setLine:S,onRendered:me,currentName:V,scrollIntoView:P}),()=>{var t;return m("div",{ref:f,class:_([e.type])},[e.sticky?m(Ge,{container:f.value,offsetTop:H.value,onScroll:se},{default:()=>{var n;return[G(),(n=a["nav-bottom"])==null?void 0:n.call(a)]}}):[G(),(t=a["nav-bottom"])==null?void 0:t.call(a)],m(at,{count:b.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:A},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}}});const ie=Symbol(),wt=()=>pe(ie,null),[rt,F]=$("tab"),lt=Re({},He,{dot:Boolean,name:x,badge:x,title:String,disabled:Boolean,titleClass:Ae,titleStyle:[String,Object],showZeroBadge:z});var ct=L({name:rt,props:lt,setup(e,{slots:o}){const a=k(!1),{parent:i,index:d}=je(oe);if(!i)return;const u=()=>{var r;return(r=e.name)!=null?r:d.value},f=()=>{a.value=!0,i.props.lazyRender&&R(()=>{i.onRendered(u(),e.title)})},c=w(()=>{const r=u()===i.currentName.value;return r&&!a.value&&f(),r});return I(()=>e.title,()=>{i.setLine(),i.scrollIntoView()}),Le(ie,c),()=>{var s;const{animated:r,swipeable:B,scrollspy:g,lazyRender:y}=i.props;if(!o.default&&!r)return;const E=g||c.value;if(r||B)return m(We,{role:"tabpanel","aria-hidden":!c.value,class:F("pane-wrapper",{inactive:!c.value})},{default:()=>{var T;return[m("div",{class:F("pane")},[(T=o.default)==null?void 0:T.call(o)])]}});const M=a.value||g||!y?(s=o.default)==null?void 0:s.call(o):null;return _e(m("div",{role:"tabpanel",class:F("pane")},[M]),[[Ee,E]])}}});const Ct=Q(ct),xt=Q(it);export{xt as T,Ct as a,wt as u};
