import{q as e,t,a as s}from"./use-translate.bf1abf23.js";import{c as a,w as l}from"./with-install.af140ae3.js";import{u as o}from"./use-expose.028ef04d.js";import{c as i,i as n,r}from"./utils.fd06bcd3.js";import{G as u,E as m,Q as c,R as d,P as f,B as p,z as h,f as v,r as b,a as S,w as j,D as x,F as D,o as y,e as C,t as H}from"./vendor.09b5b9a9.js";import{V as F,G as M}from"./index.d5ee8a42.js";import{T as g}from"./function-call.2f25783d.js";import"./constant.4d85ecb9.js";import"./unit.36efb2dd.js";import"./useChildren.692bc2bf.js";import"./use-route.bc60204d.js";import"./index.5afcfd01.js";import"./useParent.60a302fe.js";import"./mount-component.14353bf5.js";import"./index.02c1c9ae.js";import"./interceptor.9b43abfe.js";import"./use-touch.871001cd.js";import"./event.7d40caae.js";import"./index.2baefb73.js";import"./index.e4b17f1e.js";import"./use-lazy-render.bae5ade9.js";import"./on-popup-reopen.d2d6f1c6.js";import"./index.bb1b1d01.js";import"./index.4893bdc2.js";function k(e){var t,s,a,l,o=u(e.time),p=m((()=>{return{total:e=o.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),h=()=>{a=!1,i(t)},v=()=>Math.max(s-Date.now(),0),b=t=>{o.value=t,null==e.onChange||e.onChange(p.value),0===t&&(h(),null==e.onFinish||e.onFinish())},S=()=>{t=r((()=>{a&&(b(v()),o.value>0&&S())}))},j=()=>{t=r((()=>{if(a){var e=v();t=e,s=o.value,(Math.floor(t/1e3)!==Math.floor(s/1e3)||0===e)&&b(e),o.value>0&&j()}var t,s}))},x=()=>{n&&(e.millisecond?S():j())};return c(h),d((()=>{l&&(a=!0,l=!1,x())})),f((()=>{a&&(h(),l=!0)})),{start:()=>{a||(s=Date.now()+o.value,a=!0,x())},pause:h,reset:(t=e.time)=>{h(),o.value=t},current:p}}const[w,_]=a("count-down");const z=l(p({name:w,props:{autoStart:t,millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"}},emits:["change","finish"],setup(t,{emit:s,slots:a}){const{start:l,pause:i,reset:n,current:r}=k({time:+t.time,millisecond:t.millisecond,onChange:e=>s("change",e),onFinish:()=>s("finish")}),u=m((()=>function(t,s){const{days:a}=s;let{hours:l,minutes:o,seconds:i,milliseconds:n}=s;if(t.includes("DD")?t=t.replace("DD",e(a)):l+=24*a,t.includes("HH")?t=t.replace("HH",e(l)):o+=60*l,t.includes("mm")?t=t.replace("mm",e(o)):i+=60*o,t.includes("ss")?t=t.replace("ss",e(i)):n+=1e3*i,t.includes("S")){const s=e(n,3);t=t.includes("SSS")?t.replace("SSS",s):t.includes("SS")?t.replace("SS",s.slice(0,2)):t.replace("S",s.charAt(0))}return t}(t.format,r.value))),c=()=>{n(+t.time),t.autoStart&&l()};return h((()=>t.time),c,{immediate:!0}),o({start:l,pause:i,reset:c}),()=>v("div",{class:_()},[a.default?a.default(r.value):u.value])}})),P={class:"block"},W=C("span",{class:"colon"},":",-1),B={class:"block"},G=C("span",{class:"colon"},":",-1),N={class:"block"};var R=p({setup(e){const t=s({"zh-CN":{reset:"重置",pause:"暂停",start:"开始",finished:"倒计时结束",millisecond:"毫秒级渲染",customStyle:"自定义样式",customFormat:"自定义格式",manualControl:"手动控制",formatWithDay:"DD 天 HH 时 mm 分 ss 秒"},"en-US":{reset:"Reset",pause:"Pause",start:"Start",finished:"Finished",millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss"}}),a=u(108e6),l=u(),o=()=>{var e;null==(e=l.value)||e.start()},i=()=>{var e;null==(e=l.value)||e.pause()},n=()=>{var e;null==(e=l.value)||e.reset()},r=()=>g(t("finished"));return(e,s)=>{const u=b("demo-block");return y(),S(D,null,[v(u,{title:x(t)("basicUsage")},{default:j((()=>[v(x(z),{time:a.value},null,8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("customFormat")},{default:j((()=>[v(x(z),{time:a.value,format:x(t)("formatWithDay")},null,8,["time","format"])])),_:1},8,["title"]),v(u,{title:x(t)("millisecond")},{default:j((()=>[v(x(z),{millisecond:"",time:a.value,format:"HH:mm:ss:SS"},null,8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("customStyle")},{default:j((()=>[v(x(z),{time:a.value},{default:j((e=>[C("span",P,H(e.hours),1),W,C("span",B,H(e.minutes),1),G,C("span",N,H(e.seconds),1)])),_:1},8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("manualControl")},{default:j((()=>[v(x(z),{ref:(e,t)=>{t.countDown=e,l.value=e},millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:r},null,512),v(x(F),{clickable:"","column-num":3},{default:j((()=>[v(x(M),{icon:"play-circle-o",text:x(t)("start"),onClick:o},null,8,["text"]),v(x(M),{icon:"pause-circle-o",text:x(t)("pause"),onClick:i},null,8,["text"]),v(x(M),{icon:"replay",text:x(t)("reset"),onClick:n},null,8,["text"])])),_:1})])),_:1},8,["title"])],64)}}});export{R as default};
