import{b as t,e}from"./use-translate.bf1abf23.js";import{c as o,b as s,w as i}from"./with-install.af140ae3.js";import{i as r}from"./style.ae88e9b6.js";import{u as a,b as n}from"./unit.36efb2dd.js";import{P as f,Q as l,B as d,G as u,H as m,E as p,z as c,f as h}from"./vendor.09b5b9a9.js";import{o as b,u as x}from"./index.2baefb73.js";import{u as v}from"./index.e4b17f1e.js";import{u as g}from"./index.18e77546.js";const[w,j]=o("sticky");const y=i(d({name:w,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(o,{emit:i,slots:d}){const w=u(),y=v(w),$=m({fixed:!1,width:0,height:0,transform:0}),S=p((()=>a("top"===o.position?o.offsetTop:o.offsetBottom))),I=p((()=>{const{fixed:t,height:e,width:o}=$;if(t)return{width:`${o}px`,height:`${e}px`}})),z=p((()=>{if(!$.fixed)return;const t=e(n(o.zIndex),{width:`${$.width}px`,height:`${$.height}px`,[o.position]:`${S.value}px`});return $.transform&&(t.transform=`translate3d(0, ${$.transform}px, 0)`),t})),B=()=>{if(!w.value||r(w))return;const{container:t,position:e}=o,a=g(w),n=s(window);if($.width=a.width,$.height=a.height,"top"===e)if(t){const e=g(t),o=e.bottom-S.value-$.height;$.fixed=S.value>a.top&&e.bottom>0,$.transform=o<0?o:0}else $.fixed=S.value>a.top;else{const{clientHeight:e}=document.documentElement;if(t){const o=g(t),s=e-o.top-S.value-$.height;$.fixed=e-S.value<a.bottom&&e>o.top,$.transform=s<0?-s:0}else $.fixed=e-S.value<a.bottom}(t=>{i("scroll",{scrollTop:t,isFixed:$.fixed})})(n)};return c((()=>$.fixed),(t=>i("change",t))),x("scroll",B,{target:y}),function(e,o){if(!t||!window.IntersectionObserver)return;const s=new IntersectionObserver((t=>{o(t[0].intersectionRatio>0)}),{root:document.body}),i=()=>{e.value&&s.unobserve(e.value)};f(i),l(i),b((()=>{e.value&&s.observe(e.value)}))}(w,B),()=>{var t;return h("div",{ref:w,style:I.value},[h("div",{class:j({fixed:$.fixed}),style:z.value},[null==(t=d.default)?void 0:t.call(d)])])}}}));export{y as S};
