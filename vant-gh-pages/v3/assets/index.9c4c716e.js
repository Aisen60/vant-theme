import{t,c as e,a as r}from"./use-translate.bf1abf23.js";import{c as a,w as o}from"./with-install.af140ae3.js";import{g as s}from"./unit.36efb2dd.js";import{B as l,E as n,z as u,f as i,G as c,r as d,a as p,w as m,D as f,e as x,F as v,o as h}from"./vendor.09b5b9a9.js";import{c as y,r as g}from"./utils.fd06bcd3.js";import{V as k}from"./index.700b8aa4.js";import"./constant.4d85ecb9.js";import"./use-route.bc60204d.js";import"./index.5afcfd01.js";import"./index.4893bdc2.js";const[b,S]=a("circle");let C=0;function w(t){return Math.min(Math.max(+t,0),100)}const j=o(l({name:b,props:{text:String,size:[Number,String],color:[String,Object],clockwise:t,layerColor:String,strokeLinecap:String,currentRate:{type:Number,default:0},speed:{type:[Number,String],default:0},fill:{type:String,default:"none"},rate:{type:[Number,String],default:100},strokeWidth:{type:[Number,String],default:40},startPosition:{type:String,default:"top"}},emits:["update:currentRate"],setup(t,{emit:r,slots:a}){const o="van-circle-"+C++,l=n((()=>+t.strokeWidth+1e3)),c=n((()=>function(t,e){const r=t?1:0;return`M ${e/2} ${e/2} m 0, -500 a 500, 500 0 1, ${r} 0, 1000 a 500, 500 0 1, ${r} 0, -1000`}(t.clockwise,l.value))),d=n((()=>{const e={top:0,right:90,bottom:180,left:270}[t.startPosition];if(e)return{transform:`rotate(${e}deg)`}}));u((()=>t.rate),(e=>{let a;const o=Date.now(),s=t.currentRate,l=w(e),n=Math.abs(1e3*(s-l)/+t.speed),u=()=>{const t=Date.now(),e=Math.min((t-o)/n,1)*(l-s)+s;r("update:currentRate",w(parseFloat(e.toFixed(1)))),(l>s?e<l:e>l)&&(a=g(u))};t.speed?(a&&y(a),a=g(u)):r("update:currentRate",l)}),{immediate:!0});const p=()=>{const{strokeWidth:r,currentRate:a,strokeLinecap:s}=t,l=3140*a/100,n=e(t.color)?`url(#${o})`:t.color,u={stroke:n,strokeWidth:+r+1+"px",strokeLinecap:s,strokeDasharray:`${l}px 3140px`};return i("path",{d:c.value,style:u,class:S("hover"),stroke:n},null)},m=()=>{const e={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return i("path",{class:S("layer"),style:e,d:c.value},null)},f=()=>{const{color:r}=t;if(!e(r))return;const a=Object.keys(r).sort(((t,e)=>parseFloat(t)-parseFloat(e))).map(((t,e)=>i("stop",{key:e,offset:t,"stop-color":r[t]},null)));return i("defs",null,[i("linearGradient",{id:o,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[a])])};return()=>i("div",{class:S(),style:s(t.size)},[i("svg",{viewBox:`0 0 ${l.value} ${l.value}`,style:d.value},[f(),m(),p()]),a.default?a.default():t.text?i("div",{class:S("text")},[t.text]):void 0])}})),z={style:{"margin-top":"15px"}};var W=l({setup(t){const e=r({"zh-CN":{left:"左侧",right:"右侧",bottom:"底部",gradient:"渐变色",customSize:"大小定制",customStyle:"样式定制",customColor:"颜色定制",customWidth:"宽度定制",startPosition:"起始位置",counterClockwise:"逆时针"},"en-US":{left:"Left",right:"Right",bottom:"Bottom",gradient:"Gradient",customSize:"Custom Size",customStyle:"Custom Style",customColor:"Custom Color",customWidth:"Custom Width",startPosition:"Start Position",counterClockwise:"Counter Clockwise"}}),a=c(70),o=c(70),s=c(70),l=c(70),n=c(70),u={"0%":"#3fecff","100%":"#6149f6"},y=t=>Math.min(Math.max(t,0),100),g=()=>{a.value=y(a.value+20)},b=()=>{a.value=y(a.value-20)};return(t,r)=>{const c=d("demo-block");return h(),p(v,null,[i(c,{title:f(e)("basicUsage")},{default:m((()=>[i(f(j),{"current-rate":o.value,"onUpdate:current-rate":r[0]||(r[0]=t=>o.value=t),rate:a.value,speed:100,text:o.value.toFixed(0)+"%"},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),i(c,{title:f(e)("customStyle")},{default:m((()=>[i(f(j),{"current-rate":l.value,"onUpdate:current-rate":r[1]||(r[1]=t=>l.value=t),rate:a.value,speed:100,"stroke-width":60,text:f(e)("customWidth")},null,8,["current-rate","rate","text"]),i(f(j),{"current-rate":l.value,"onUpdate:current-rate":r[2]||(r[2]=t=>l.value=t),color:"#ee0a24",rate:a.value,"layer-color":"#ebedf0",speed:100,text:f(e)("customColor")},null,8,["current-rate","rate","text"]),i(f(j),{"current-rate":s.value,"onUpdate:current-rate":r[3]||(r[3]=t=>s.value=t),rate:a.value,speed:100,color:u,text:f(e)("gradient")},null,8,["current-rate","rate","text"]),i(f(j),{"current-rate":n.value,"onUpdate:current-rate":r[4]||(r[4]=t=>n.value=t),color:"#07c160",rate:a.value,speed:100,clockwise:!1,text:f(e)("counterClockwise"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"]),i(f(j),{"current-rate":n.value,"onUpdate:current-rate":r[5]||(r[5]=t=>n.value=t),color:"#7232dd",rate:a.value,speed:100,size:"120px",clockwise:!1,text:f(e)("customSize"),style:{"margin-top":"15px"}},null,8,["current-rate","rate","text"])])),_:1},8,["title"]),x("div",z,[i(f(k),{text:f(e)("add"),type:"primary",size:"small",onClick:g},null,8,["text"]),i(f(k),{text:f(e)("decrease"),type:"danger",size:"small",onClick:b},null,8,["text"])]),i(c,{title:f(e)("startPosition")},{default:m((()=>[i(f(j),{"current-rate":75,rate:a.value,text:f(e)("left"),"start-position":"left"},null,8,["rate","text"]),i(f(j),{"current-rate":75,rate:a.value,text:f(e)("right"),"start-position":"right"},null,8,["rate","text"]),i(f(j),{"current-rate":75,rate:a.value,text:f(e)("bottom"),"start-position":"bottom"},null,8,["rate","text"])])),_:1},8,["title"])],64)}}});export{W as default};
