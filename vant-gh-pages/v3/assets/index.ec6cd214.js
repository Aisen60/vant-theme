import{i as e,a as t}from"./use-translate.bf1abf23.js";import{c as o,w as s}from"./with-install.af140ae3.js";import{p as r}from"./event.7d40caae.js";import{c as i}from"./interceptor.9b43abfe.js";import{c as a}from"./number.b01aa591.js";import{u as l}from"./use-touch.871001cd.js";import{u as n}from"./use-expose.028ef04d.js";import{B as c,G as d,H as u,E as f,f as m,r as p,a as b,w as g,D as j,F as h,o as x}from"./vendor.09b5b9a9.js";import{u as v}from"./index.7d098fe9.js";import{u as C}from"./index.18e77546.js";import{V as y}from"./index.700b8aa4.js";import{C as T}from"./index.8591e547.js";import{C as w}from"./index.d7a9e7ea.js";import{D as q}from"./function-call.709dfb4c.js";import"./utils.fd06bcd3.js";import"./index.2baefb73.js";import"./constant.4d85ecb9.js";import"./use-route.bc60204d.js";import"./index.5afcfd01.js";import"./unit.36efb2dd.js";import"./index.4893bdc2.js";import"./index.f82391be.js";import"./index.429cd099.js";import"./mount-component.14353bf5.js";import"./index.02c1c9ae.js";import"./index.e4b17f1e.js";import"./use-lazy-render.bae5ade9.js";import"./on-popup-reopen.d2d6f1c6.js";import"./index.bb1b1d01.js";import"./index.c08f3caa.js";import"./useChildren.692bc2bf.js";import"./useParent.60a302fe.js";const[W,_]=o("swipe-cell");const k=s(c({name:W,props:{disabled:Boolean,leftWidth:[Number,String],rightWidth:[Number,String],beforeClose:Function,stopPropagation:Boolean,name:{type:[Number,String],default:""}},emits:["open","close","click"],setup(t,{emit:o,slots:s}){let c,p,b;const g=d(),j=d(),h=d(),x=u({offset:0,dragging:!1}),y=l(),T=e=>e.value?C(e).width:0,w=f((()=>e(t.leftWidth)?+t.leftWidth:T(j))),q=f((()=>e(t.rightWidth)?+t.rightWidth:T(h))),W=e=>{c=!0,x.offset="left"===e?w.value:-q.value,o("open",{name:t.name,position:e})},k=e=>{x.offset=0,c&&(c=!1,o("close",{name:t.name,position:e}))},N=e=>{t.disabled||(b=x.offset,y.start(e))},P=e=>{if(t.disabled)return;const{deltaX:o}=y;if(y.move(e),y.isHorizontal()){p=!0,x.dragging=!0;(!c||o.value*b<0)&&r(e,t.stopPropagation),x.offset=a(o.value+b,-q.value,w.value)}},S=()=>{x.dragging&&(x.dragging=!1,(e=>{const t=Math.abs(x.offset),o=c?.85:.15,s="left"===e?w.value:q.value;s&&t>s*o?W(e):k(e)})(x.offset>0?"left":"right"),setTimeout((()=>{p=!1}),0))},z=(e="outside")=>{o("click",e),c&&!p&&i({interceptor:t.beforeClose,args:[{name:t.name,position:e}],done:()=>k(e)})},B=(e,t)=>o=>{t&&o.stopPropagation(),z(e)},D=(e,t)=>{const o=s[e];if(o)return m("div",{ref:t,class:_(e),onClick:B(e,!0)},[o()])};return n({open:W,close:k}),v(g,(()=>z("outside")),{eventName:"touchstart"}),()=>{var e;const t={transform:`translate3d(${x.offset}px, 0, 0)`,transitionDuration:x.dragging?"0s":".6s"};return m("div",{ref:g,class:_(),onClick:B("cell"),onTouchstart:N,onTouchmove:P,onTouchend:S,onTouchcancel:S},[m("div",{class:_("wrapper"),style:t},[D("left",j),null==(e=s.default)?void 0:e.call(s),D("right",h)])])}}}));var N=c({setup(e){const o=t({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),s=({position:e})=>{switch(e){case"left":case"cell":case"outside":return!0;case"right":return new Promise((e=>{q.confirm({title:o("confirm")}).then(e)}))}};return(e,t)=>{const r=p("demo-block");return x(),b(h,null,[m(r,{title:j(o)("basicUsage")},{default:g((()=>[m(j(k),null,{left:g((()=>[m(j(y),{square:"",type:"primary",text:j(o)("select")},null,8,["text"])])),right:g((()=>[m(j(y),{square:"",type:"danger",text:j(o)("delete")},null,8,["text"]),m(j(y),{square:"",type:"primary",text:j(o)("collect")},null,8,["text"])])),default:g((()=>[m(j(T),{border:!1,title:j(o)("title"),value:j(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"]),m(r,{title:j(o)("customContent")},{default:g((()=>[m(j(k),null,{right:g((()=>[m(j(y),{square:"",type:"danger",class:"delete-button",text:j(o)("delete")},null,8,["text"])])),default:g((()=>[m(j(w),{num:"2",price:"2.00",desc:j(o)("desc"),title:j(o)("cardTitle"),thumb:"https://img.yzcdn.cn/vant/ipad.jpeg"},null,8,["desc","title"])])),_:1})])),_:1},8,["title"]),m(r,{title:j(o)("beforeClose")},{default:g((()=>[m(j(k),{"before-close":s},{left:g((()=>[m(j(y),{square:"",type:"primary",text:j(o)("select")},null,8,["text"])])),right:g((()=>[m(j(y),{square:"",type:"danger",text:j(o)("delete")},null,8,["text"])])),default:g((()=>[m(j(T),{border:!1,title:j(o)("title"),value:j(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"])],64)}}});export{N as default};
