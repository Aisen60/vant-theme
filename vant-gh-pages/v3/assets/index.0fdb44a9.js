import{t as e,i as t,u as o,a as l}from"./use-translate.bf1abf23.js";import{c as a,w as i}from"./with-install.af140ae3.js";import{u as n}from"./index.7d098fe9.js";import{B as s,G as u,E as r,f as d,H as p,l as c,v as m,C as v,S as f,r as b,a as x,w as V,D as h,F as w,o as C,e as j,i as g,t as y}from"./vendor.09b5b9a9.js";import{u as O}from"./useChildren.692bc2bf.js";import{u as k}from"./index.e4b17f1e.js";import{u as T}from"./index.2baefb73.js";import{u as U}from"./index.18e77546.js";import{b as _}from"./unit.36efb2dd.js";import{u as z}from"./use-expose.028ef04d.js";import{C as P}from"./index.8591e547.js";import{I as S}from"./index.5afcfd01.js";import{P as A}from"./index.02c1c9ae.js";import{u as D}from"./useParent.60a302fe.js";import{S as I}from"./index.2749fd87.js";import{V as W}from"./index.700b8aa4.js";import"./utils.fd06bcd3.js";import"./use-route.bc60204d.js";import"./interceptor.9b43abfe.js";import"./use-touch.871001cd.js";import"./event.7d40caae.js";import"./use-lazy-render.bae5ade9.js";import"./on-popup-reopen.d2d6f1c6.js";import"./index.bb1b1d01.js";import"./index.4893bdc2.js";import"./index.e6355079.js";import"./constant.4d85ecb9.js";const[E,M]=a("dropdown-menu"),B={overlay:e,zIndex:[Number,String],activeColor:String,closeOnClickOutside:e,closeOnClickOverlay:e,duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"}},N=Symbol(E);const R=i(s({name:E,props:B,setup(e,{slots:o}){const l=u(),a=u(),i=u(0),{children:s,linkChildren:p}=O(N),c=k(l),m=r((()=>s.some((e=>e.state.showWrapper)))),v=r((()=>{if(m.value&&t(e.zIndex))return{zIndex:+e.zIndex+1}})),f=()=>{if(a.value){const t=U(a);"down"===e.direction?i.value=t.bottom:i.value=window.innerHeight-t.top}},b=(t,o)=>{const{showPopup:l}=t.state,{disabled:a,titleClass:i}=t;return d("div",{role:"button",tabindex:a?-1:0,class:M("item",{disabled:a}),onClick:()=>{var e;a||(e=o,s.forEach(((t,o)=>{o===e?(f(),t.toggle()):t.state.showPopup&&t.toggle(!1,{immediate:!0})})))}},[d("span",{class:[M("title",{down:l===("down"===e.direction),active:l}),i],style:{color:l?e.activeColor:""}},[d("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return p({props:e,offset:i}),n(l,(()=>{e.closeOnClickOutside&&s.forEach((e=>{e.toggle(!1)}))})),T("scroll",(()=>{m.value&&f()}),{target:c}),()=>{var e;return d("div",{ref:l,class:M()},[d("div",{ref:a,style:v.value,class:M("bar",{opened:m.value})},[s.map(b)]),null==(e=o.default)?void 0:e.call(o)])}}}));const[H,$]=a("dropdown-item");const F=i(s({name:H,props:{title:String,disabled:Boolean,teleport:[String,Object],lazyRender:e,modelValue:o,titleClass:o,options:{type:Array,default:()=>[]}},emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:o}){const l=p({showPopup:!1,transition:!0,showWrapper:!1}),{parent:a}=D(N);if(!a)return;const i=e=>()=>t(e),n=i("open"),s=i("close"),u=i("opened"),r=()=>{l.showWrapper=!1,t("closed")},b=t=>{e.teleport&&t.stopPropagation()},x=o=>{const{activeColor:i}=a.props,n=o.value===e.modelValue;return d(P,{clickable:!0,key:o.value,icon:o.icon,title:o.text,class:$("option",{active:n}),style:{color:n?i:""},onClick:()=>{l.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value))}},{value:()=>{if(n)return d(S,{class:$("icon"),color:i,name:"success"},null)}})},V=()=>{const{offset:t}=a,{zIndex:i,overlay:p,duration:v,direction:f,closeOnClickOverlay:V}=a.props,h=_(i);return"down"===f?h.top=`${t.value}px`:h.bottom=`${t.value}px`,c(d("div",{style:h,class:$([f]),onClick:b},[d(A,{show:l.showPopup,"onUpdate:show":e=>l.showPopup=e,class:$("content"),overlay:p,position:"down"===f?"top":"bottom",duration:l.transition?v:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:V,onOpen:n,onClose:s,onOpened:u,onClosed:r},{default:()=>{var t;return[e.options.map(x),null==(t=o.default)?void 0:t.call(o)]}})]),[[m,l.showWrapper]])};return z({state:l,toggle:(e=!l.showPopup,t={})=>{e!==l.showPopup&&(l.showPopup=e,l.transition=!t.immediate,e&&(l.showWrapper=!0))},renderTitle:()=>{if(o.title)return o.title();if(e.title)return e.title;const t=e.options.find((t=>t.value===e.modelValue));return t?t.text:""}}),()=>{if(e.teleport){let o;return d(f,{to:e.teleport},"function"==typeof(t=o=V())||"[object Object]"===Object.prototype.toString.call(t)&&!v(t)?o:{default:()=>[o]})}var t;return V()}}})),G={style:{padding:"5px 16px"}};var q=s({setup(e){const t=l({"zh-CN":{disableMenu:"禁用菜单",switchTitle1:"包邮",switchTitle2:"团购",itemTitle:"筛选",expandDirection:"向上展开",customContent:"自定义菜单内容",customActiveColor:"自定义选中态颜色",option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),o=u(),a=u(!0),i=u(!1),n=u(0),s=u("a"),p=r((()=>t("option1"))),c=r((()=>t("option2"))),m=()=>{var e;null==(e=o.value)||e.toggle()};return(e,l)=>{const u=b("demo-block");return C(),x(w,null,[d(u,{title:h(t)("basicUsage")},{default:V((()=>[d(h(R),null,{default:V((()=>[d(h(F),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),options:h(p)},null,8,["modelValue","options"]),d(h(F),{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),options:h(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:h(t)("customContent")},{default:V((()=>[d(h(R),null,{default:V((()=>[d(h(F),{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value=e),options:h(p)},null,8,["modelValue","options"]),d(h(F),{title:h(t)("itemTitle"),ref:(e,t)=>{t.item=e,o.value=e}},{default:V((()=>[d(h(P),{center:"",title:h(t)("switchTitle1")},{"right-icon":V((()=>[d(h(I),{modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),d(h(P),{center:"",title:h(t)("switchTitle2")},{"right-icon":V((()=>[d(h(I),{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),size:"24","active-color":"#ee0a24"},null,8,["modelValue"])])),_:1},8,["title"]),j("div",G,[d(h(W),{type:"danger",block:"",round:"",style:{height:"40px"},onClick:m},{default:V((()=>[g(y(h(t)("confirm")),1)])),_:1})])])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),d(u,{title:h(t)("customActiveColor")},{default:V((()=>[d(h(R),{"active-color":"#1989fa"},{default:V((()=>[d(h(F),{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=e=>n.value=e),options:h(p)},null,8,["modelValue","options"]),d(h(F),{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value=e),options:h(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:h(t)("expandDirection")},{default:V((()=>[d(h(R),{direction:"up"},{default:V((()=>[d(h(F),{modelValue:n.value,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value=e),options:h(p)},null,8,["modelValue","options"]),d(h(F),{modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value=e),options:h(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),d(u,{title:h(t)("disableMenu")},{default:V((()=>[d(h(R),null,{default:V((()=>[d(h(F),{modelValue:n.value,"onUpdate:modelValue":l[9]||(l[9]=e=>n.value=e),disabled:"",options:h(p)},null,8,["modelValue","options"]),d(h(F),{modelValue:s.value,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value=e),disabled:"",options:h(c)},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])],64)}}});export{q as default};
