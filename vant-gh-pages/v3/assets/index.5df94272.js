import"./use-translate.bf1abf23.js";import{c as e,w as t}from"./with-install.af140ae3.js";import{s as a,p as r}from"./event.7d40caae.js";import{a as l,g as o}from"./unit.36efb2dd.js";import{a as n,c as i}from"./number.b01aa591.js";import{u as s}from"./use-touch.871001cd.js";import{B as u,G as d,E as m,f as c}from"./vendor.09b5b9a9.js";import{u as v}from"./index.e6355079.js";import{u as b}from"./index.18e77546.js";const[g,f]=e("slider");const p=t(u({name:g,props:{range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:t,slots:u}){let g,p,h;const y=d(),N=d(),S=s(),V=m((()=>Number(e.max)-Number(e.min))),j=m((()=>{const t=e.vertical?"width":"height";return{background:e.inactiveColor,[t]:l(e.barHeight)}})),w=t=>e.range&&Array.isArray(t),x=()=>{const{modelValue:t,min:a}=e;return w(t)?100*(t[1]-t[0])/V.value+"%":100*(t-Number(a))/V.value+"%"},B=m((()=>{const t={[e.vertical?"height":"width"]:x(),background:e.activeColor};N.value&&(t.transition="none");return t[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:t,min:a}=e;return w(t)?100*(t[0]-Number(a))/V.value+"%":"0%"})(),t})),C=t=>{const a=+e.min,r=+e.max,l=+e.step;t=i(t,a,r);const o=Math.round((t-a)/l)*l;return n(a,o)},k=(e,t)=>JSON.stringify(e)===JSON.stringify(t),T=(a,r)=>{a=w(a)?(e=>e[0]>e[1]?e.slice(0).reverse():e)(a).map(C):C(a),k(a,e.modelValue)||t("update:modelValue",a),r&&!k(a,p)&&t("change",a)},z=t=>{if(t.stopPropagation(),e.disabled||e.readonly)return;const{min:a,reverse:r,vertical:l,modelValue:o}=e,n=b(y),i=l?n.height:n.width,s=Number(a)+(l?r?n.bottom-t.clientY:t.clientY-n.top:r?n.right-t.clientX:t.clientX-n.left)/i*V.value;if(w(o)){const[e,t]=o;T(s<=(e+t)/2?[s,t]:[e,s],!0)}else T(s,!0)},A=a=>{if(e.disabled||e.readonly)return;"start"===N.value&&t("drag-start",a),r(a,!0),S.move(a),N.value="dragging";const l=b(y);let o=(e.vertical?S.deltaY.value:S.deltaX.value)/(e.vertical?l.height:l.width)*V.value;if(e.reverse&&(o=-o),w(p)){const t=e.reverse?1-g:g;h[t]=p[t]+o}else h=p+o;T(h)},X=a=>{e.disabled||e.readonly||("dragging"===N.value&&(T(h,!0),t("drag-end",a)),N.value="")},Y=t=>{if("number"==typeof t){return f("button-wrapper",["left","right"][t])}return f("button-wrapper",e.reverse?"left":"right")},H=(t,a)=>{if("number"==typeof a){const e=u[0===a?"left-button":"right-button"];if(e)return e({value:t})}return u.button?u.button({value:t}):c("div",{class:f("button"),style:o(e.buttonSize)},null)},J=t=>{const r="number"==typeof t?e.modelValue[t]:e.modelValue;return c("div",{role:"slider",class:Y(t),tabindex:e.disabled||e.readonly?-1:0,"aria-valuemin":+e.min,"aria-valuenow":r,"aria-valuemax":+e.max,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstart:a=>{"number"==typeof t&&(g=t),(t=>{e.disabled||e.readonly||(S.start(t),h=e.modelValue,p=w(h)?h.map(C):C(h),N.value="start")})(a)},onTouchmove:A,onTouchend:X,onTouchcancel:X,onClick:a},[H(r,t)])};return T(e.modelValue),v((()=>e.modelValue)),()=>c("div",{ref:y,style:j.value,class:f({vertical:e.vertical,disabled:e.disabled}),onClick:z},[c("div",{class:f("bar"),style:B.value},[e.range?[J(0),J(1)]:J()])])}}));export{p as S};
